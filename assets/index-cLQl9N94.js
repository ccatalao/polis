import{r as k,a as sr,u as ci,b as Xo,L as mt,R as Rt,c as ar,g as rr,B as lr,d as cr,e as pt}from"./vendor-CDtJaTRs.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(c){if(c.ep)return;c.ep=!0;const p=a(c);fetch(c.href,p)}})();var Yo={exports:{}},ui={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur=k,hr=Symbol.for("react.element"),dr=Symbol.for("react.fragment"),pr=Object.prototype.hasOwnProperty,fr=ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mr={key:!0,ref:!0,__self:!0,__source:!0};function Qo(o,s,a){var l,c={},p=null,d=null;a!==void 0&&(p=""+a),s.key!==void 0&&(p=""+s.key),s.ref!==void 0&&(d=s.ref);for(l in s)pr.call(s,l)&&!mr.hasOwnProperty(l)&&(c[l]=s[l]);if(o&&o.defaultProps)for(l in s=o.defaultProps,s)c[l]===void 0&&(c[l]=s[l]);return{$$typeof:hr,type:o,key:p,ref:d,props:c,_owner:fr.current}}ui.Fragment=dr;ui.jsx=Qo;ui.jsxs=Qo;Yo.exports=ui;var h=Yo.exports,es,Oo=sr;es=Oo.createRoot,Oo.hydrateRoot;const ts=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,is=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,Se=()=>{window.scrollTo(0,0),window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0),ts()&&is()&&requestAnimationFrame(()=>{if(window.scrollTo(0,0),/iPad|iPhone|iPod/.test(navigator.userAgent)){const o=document.querySelector("#root");if(o){const s=o.style.cssText;o.style.position="fixed",o.style.width="100%",o.style.height="100%",o.style.top="0",o.style.overflow="hidden",setTimeout(()=>{o.style.cssText=s,window.scrollTo(0,0)},50)}}})},tt=()=>{const o=document.body,s=document.documentElement;o.style.removeProperty("position"),o.style.removeProperty("overflow"),o.style.removeProperty("height"),o.style.removeProperty("touch-action"),s.style.removeProperty("position"),s.style.removeProperty("overflow"),s.style.removeProperty("height"),s.style.removeProperty("touch-action"),o.style.touchAction="auto",s.style.touchAction="auto",/iPad|iPhone|iPod/.test(navigator.userAgent)&&(window.scrollTo(0,1),window.scrollTo(0,0))},gr=()=>{if(ts()){const o=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${o}px`);const s=document.getElementById("root");s&&(s.style.minHeight="calc(100 * var(--vh))",s.style.overflowY="auto",s.style.webkitOverflowScrolling="touch"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&is()&&document.addEventListener("touchmove",a=>{const l=a.target,c=ns(l);if(!c||c.scrollHeight<=c.clientHeight){const p=c?c.scrollTop<=0:!0,d=c?c.scrollHeight-c.scrollTop<=c.clientHeight+1:!0;(p&&a.touches[0].screenY>0||d&&a.touches[0].screenY<0)&&a.preventDefault()}},{passive:!1})}},ns=o=>{if(!o)return null;const a=window.getComputedStyle(o).getPropertyValue("overflow-y");return(a==="auto"||a==="scroll")&&o.scrollHeight>o.clientHeight?o:o.parentElement?ns(o.parentElement):null},_r=()=>{const{pathname:o}=ci();return k.useEffect(()=>{gr();const s=()=>{if(window.innerWidth<=768){const a=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${a}px`)}};return window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),k.useEffect(()=>{tt(),Se(),o==="/mapping"?[10,50,100,300,600].forEach(l=>{setTimeout(()=>{Se(),tt()},l)}):(setTimeout(Se,100),setTimeout(Se,300)),sessionStorage.setItem("currentPage",o)},[o]),null},vr=()=>{const[o,s]=k.useState(""),[a,l]=k.useState(!1),c=Xo(),p=m=>{m.preventDefault(),o.trim()&&(c(`/search?q=${encodeURIComponent(o.trim())}`),l(!1),s(""))},d=()=>{l(!a),a||setTimeout(()=>{const m=document.querySelector(".search-input");m&&m.focus()},100)};return h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"header-search-icon",onClick:d,"aria-label":"Toggle search",type:"button",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"search-icon",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsxs("div",{className:`search-bar ${a?"search-visible":""}`,children:[h.jsx("div",{className:"search-overlay",onClick:()=>l(!1)}),h.jsxs("form",{onSubmit:p,className:"search-form",children:[h.jsx("input",{type:"text",className:"search-input",placeholder:"Pesquisar...",value:o,onChange:m=>s(m.target.value),"aria-label":"Search"}),h.jsx("button",{type:"submit",className:"search-button","aria-label":"Submit search",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"search-icon",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]})]})},Ro=(o=!1)=>{window.scrollTo(0,0),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0),Se();const s=o?15:5,a=o?10:50;for(let l=1;l<=s;l++)setTimeout(()=>{window.scrollTo(0,0),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0)},l*a);o&&(requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0)}),sessionStorage.setItem("force_map_scroll","true"))},ni=({title:o,description:s,imageUrl:a,linkTo:l})=>{const[c,p]=k.useState(!1),[d,m]=k.useState(!1),_=O=>O?O.startsWith("http")||O.startsWith("/polis/")?O:`/polis${O}`:"https://via.placeholder.com/400x300?text=Feature",v=()=>{d||(m(!0),console.log(`Image failed to load: ${a}`))},y=O=>{switch(O){case"/municipio":return"Informação do Município";case"/projects":return"Ver Projetos";case"/chapters":return"Ler Publicações";case"/mapping":return"Explorar Mapa";default:return"Explorar"}},P=O=>{if(l==="/mapping"){O.preventDefault(),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,sessionStorage.setItem("force_map_scroll","true"),sessionStorage.setItem("map_scroll_time",Date.now().toString());for(let S=0;S<5;S++)setTimeout(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},S*10);Ro(!0),setTimeout(()=>{window.location.href=`/polis${l}`},50)}else Ro(!1)};return h.jsxs("div",{className:"content-card mobile-fullwidth",children:[h.jsxs(mt,{to:l,className:"content-image-link",onClick:P,children:[h.jsx("div",{className:`content-image ${c?"":"loading"}`,children:h.jsx("picture",{children:h.jsx("img",{src:_(a),alt:o,loading:"lazy",onLoad:()=>p(!0),onError:v})})}),h.jsx("div",{className:"image-overlay",children:h.jsx("span",{children:y(l)})})]}),h.jsxs("div",{className:"content-info",children:[h.jsx("h3",{children:o}),h.jsx("p",{children:s})]})]})},br=()=>{const[o,s]=k.useState(!1);return k.useEffect(()=>{o||s(!0);const a=()=>{window.innerWidth<=768&&(s(!1),setTimeout(()=>s(!0),50))};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[o]),h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsxs("div",{className:"intro-content",children:[h.jsx("p",{children:"Um guia para políticas de desenvolvimento local mais eficazes e sustentáveis. Descubra recursos, serviços e informação sobre ordenamento do território, urbanismo e reabilitação urbana:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Informação municipal"}),h.jsx("li",{children:"Projetos europeus e oportunidades de financiamento"}),h.jsx("li",{children:"Publicações científicas"}),h.jsx("li",{children:"Mapeamento interativo de Palmela"})]})]})}),h.jsxs("div",{className:"full-width-grid",children:[h.jsx(ni,{title:"Município de Palmela",description:"Aceda aos serviços e recursos municipais em matéria de urbanismo, ordenamento do território e habitação.",imageUrl:"/images/home/municipio.webp",linkTo:"/municipio"}),h.jsx(ni,{title:"Projetos europeus",description:"Explore oportunidades de financiamento e colaboração em projetos europeus de desenvolvimento urbano.",imageUrl:"/images/home/projects.webp",linkTo:"/projects"}),h.jsx(ni,{title:"Publicações",description:"Aceda a revistas científicas e recursos académicos sobre urbanismo e ordenamento do território.",imageUrl:"/images/home/publicacoes.webp",linkTo:"/chapters"}),h.jsx(ni,{title:"Mapas Interativos",description:"Explore os dados geográficos de Palmela.",imageUrl:"/images/home/mapa.webp",linkTo:"/mapping"})]}),h.jsx("div",{className:"about-footer full-width",children:h.jsxs("div",{className:"footer-content",children:[h.jsx("h3",{children:"Sobre Palmela Polis"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Palmela Polis"})," é um recurso criado pela Comissão de Ordenamento do Território, Urbanismo, Reabilitação Urbana e Obras Públicas da Assembleia Municipal de Palmela."]}),h.jsx("p",{}),h.jsx("p",{children:"Foi desenvolvido para apoiar cidadãos, decisores políticos e todos os interessados no planeamento informado e sustentável de Palmela."})]})})]})},yr=[{id:"reabilitacao-urbana",title:"Reabilitação Urbana",description:"Palmela incentiva a reabilitação urbana para revitalizar centros urbanos e áreas degradadas, visando renovar e reabitar espaços com maior concentração populacional. O Município oferece medidas de apoio que, em articulação com atores locais, promovem a recuperação do edificado, estimulando a fixação populacional em diversas ocupações.",url:"https://www.cm-palmela.pt/viver/reabilitacao-urbana",features:[{feature:"Reabilitação do Centro Histórico de Palmela",featureURL:"https://www.cm-palmela.pt/viver/reabilitacao-urbana/aru-centro-historico-de-palmela"},{feature:"Reabilitação Urbana do Pinhal Novo",featureURL:"https://www.cm-palmela.pt/viver/reabilitacao-urbana/aru-pinhal-novo"},{feature:"Incentivos à reabilitação urbana",featureURL:"https://www.cm-palmela.pt/viver/reabilitacao-urbana/programa-de-incentivo-a-reabilitacao-urbana"}],imageUrl:{webp:"/images/municipio/cm-site.webp",fallback:"/images/municipio/cm-site.jpeg",thumbnail:{width:400,height:300}}},{id:"planos-municipais",title:"Planos Municipais de Ordenamento do Território",description:"Acesso público a documentos e legislação territorial, incluindo o Plano Diretor Municipal, Planos de Urbanização e Pormenor, e Medidas Preventivas. Esta transparência clarifica as regras de utilização do território. A partilha digital desta informação visa aproximar cidadãos e administração pública.",url:"https://www.cm-palmela.pt/viver/planeamento-e-gestao-urbanistica/planos-municipais-de-ordenamento-do-territorio",features:[{feature:"Plano Diretor Municipal",featureURL:"https://www.cm-palmela.pt/viver/planeamento-e-gestao-urbanistica/planos-municipais-de-ordenamento-do-territorio/plano-diretor-municipal"},{feature:"Estudos de ordenamento do território",featureURL:"https://www.cm-palmela.pt/viver/planeamento-e-gestao-urbanistica/planos-municipais-de-ordenamento-do-territorio/estudos"}],imageUrl:{webp:"/images/municipio/cm-site.webp",fallback:"/images/municipio/cm-site.jpeg",thumbnail:{width:400,height:300}}},{id:"habitacao",title:"Habitação",description:"A Constituição estabelece o direito à habitação para todos, cabendo ao Estado e autarquias implementar políticas adequadas. A Câmara de Palmela, reconhecendo o acesso à habitação como fundamental para integração social, dispõe de 32 fogos municipais sujeitos à Lei nº 81/2014, que define regras de atribuição e regime de arrendamento apoiado, complementados com acompanhamento social.",url:"https://www.cm-palmela.pt/viver/habitacao",features:[{feature:"Estratégia local de habitação",featureURL:"https://www.cm-palmela.pt/viver/habitacao/estrategia-local-de-habitacao-elh"},{feature:"Habitação Municipal",featureURL:"https://www.cm-palmela.pt/viver/habitacao/habitacao-municipal-arrendamento-apoiado"}],imageUrl:{webp:"/images/municipio/cm-site.webp",fallback:"/images/municipio/cm-site.jpeg",thumbnail:{width:400,height:300}}},{id:"centro-historico",title:"Centro Histórico",description:"Património, habitação, comércio, serviços, movimento associativo juvenil, cultural e desportivo, tradição, produtos locais, espaços de conhecimento, oportunidades de negócio, propostas de lazer, refúgios de tranquilidade.",url:"https://www.cm-palmela.pt/viver/centro-historico",features:[{feature:"Portal do Centro Histórico de Palmela",featureURL:"http://centrohistorico.cm-palmela.pt/"}],imageUrl:{webp:"/images/municipio/cm-site.webp",fallback:"/images/municipio/cm-site.jpeg",thumbnail:{width:400,height:300}}}],Xe={municipio:yr},hi=()=>{const o=sessionStorage.getItem("lastSearch");if(!o||o.trim()==="")return;let s=null;try{const a=sessionStorage.getItem("searchMatchInfo");a&&(s=JSON.parse(a))}catch(a){console.error("Error parsing search match info:",a)}setTimeout(()=>{var d,m;if(console.log("Searching for term:",o),s&&console.log("Match info:",s),s&&s.elementId){const _=document.getElementById(s.elementId);if(_){console.log("Found target element by ID:",s.elementId),en(_,o);return}else console.log("Element not found with ID:",s.elementId)}if(s&&(s.exactText||((d=s.matches)==null?void 0:d.length)>0)){const _=s.exactText||((m=s.matches[0])==null?void 0:m.text);if(console.log("Looking for exact match text:",_),_){const v=[];if(mn(document.body,_,v),v.length>0){console.log(`Found ${v.length} nodes containing the exact text`);for(const y of v){const P=wr(y.parentNode);if(P){console.log("Found card containing the exact text:",P.id||"unnamed card"),en(P,o,s,y.parentNode);return}}}}}const a=document.querySelectorAll('.content-card, .search-result-item, .mobile-fullwidth, [id^="project-"], [id^="municipio-"], [id^="chapter-"], [id^="publication-"]');if(console.log("Found",a.length,"potential content cards"),a.length===0){console.log("No cards found, trying broader selectors"),No(o);return}let l=null,c=null,p=0;a.forEach(_=>{_.querySelectorAll("h3, p, .feature-text, .feature-list-item, a").forEach(y=>{const P=y.textContent.toLowerCase(),O=o.toLowerCase();if(P.includes(O)){let E=1;if(s&&(s.title&&P.includes(s.title.toLowerCase())&&(E+=5),s.description&&P.includes(s.description.toLowerCase())&&(E+=3),s.exactText&&P.includes(s.exactText.toLowerCase())&&(E+=10),s.matches&&s.matches.length>0)){for(const C of s.matches)if(C.text&&P.includes(C.text.toLowerCase())){E+=8;break}}const S=(P.match(new RegExp(O,"gi"))||[]).length;E+=S*2,y.tagName.toLowerCase()==="h3"&&(E+=3),s&&s.elementId&&_.id===s.elementId&&(E+=50),E>p&&(p=E,l=_,c=y)}})}),l?(console.log("Found best match card:",l.id||"unnamed card","with score:",p),en(l,o,s,c)):(console.log("No matching card found for term:",o),No(o)),Pr()},800)};function mn(o,s,a){if(!o)return;const l=o.childNodes;for(let c=0;c<l.length;c++){const p=l[c];p.nodeType===Node.TEXT_NODE?p.textContent.toLowerCase().includes(s.toLowerCase())&&a.push(p):p.nodeType===Node.ELEMENT_NODE&&mn(p,s,a)}}function wr(o){if(!o)return null;let s=o;for(;s&&s!==document.body;){if(s.classList.contains("content-card")||s.classList.contains("mobile-fullwidth")||s.classList.contains("search-result-item")||s.id&&(s.id.startsWith("project-")||s.id.startsWith("municipio-")||s.id.startsWith("chapter-")||s.id.startsWith("publication-")))return s;s=s.parentElement}return null}function en(o,s,a,l=null){const c=o.querySelectorAll("h3, p, .feature-text, .feature-list-item, a");c.forEach(m=>{if(m.textContent.toLowerCase().includes(s.toLowerCase())){m.classList.add("search-match-container");const v=m.innerHTML.replace(new RegExp(`(${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),'<span class="search-term-highlight">$1</span>');m.innerHTML=v}}),o.classList.add("highlight-card");const p={behavior:"smooth",block:"center"};o.scrollIntoView(p);const d=l||xr(o,s)||(c.length>0?c[0]:null);d&&setTimeout(()=>{d.classList.add("search-match-flash"),d.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{d.classList.remove("search-match-flash")},2e3)},300)}function xr(o,s){const a=[],l=[];mn(o,s,l);for(const c of l)c.parentElement&&a.push(c.parentElement);return a.length>0?a[0]:null}function No(o,s){const a=document.querySelectorAll(".content-info h3, .content-info p, .feature-list-item, .feature-text, .intro-content p, .data-info p");let l=null;a.forEach(c=>{if(c.textContent.toLowerCase().includes(o.toLowerCase())){c.classList.add("search-match-container"),l||(l=c);const d=c.innerHTML.replace(new RegExp(`(${o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),'<span class="search-term-highlight">$1</span>');c.innerHTML=d}}),l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),l.classList.add("search-match-flash"),setTimeout(()=>{l.classList.remove("search-match-flash")},2e3))}function Pr(){setTimeout(()=>{sessionStorage.removeItem("lastSearch"),sessionStorage.removeItem("lastSearchResultId"),sessionStorage.removeItem("searchMatchInfo")},2e3)}const Lr=({service:o})=>{var _;const[s,a]=k.useState(!1),[l,c]=k.useState(!1),p=v=>v?v.startsWith("http")||v.startsWith("/polis/")?v:v.startsWith("./")?`/polis${v.substring(1)}`:`/polis${v}`:"https://via.placeholder.com/400x300?text=Serviço",d=((_=o.imageUrl)==null?void 0:_.fallback)||o.imageUrl,m=v=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.open(v,"_blank","noopener,noreferrer")},100)};return h.jsxs("div",{className:"content-card mobile-fullwidth",id:`municipio-${o.id}`,children:[h.jsxs("div",{className:"content-image-link",onClick:()=>m(o.url),children:[h.jsx("div",{className:`content-image ${s?"":"loading"}`,children:h.jsx("picture",{children:h.jsx("img",{src:p(d),alt:o.title,loading:"lazy",onLoad:()=>a(!0),onError:v=>{l||(c(!0),console.error(`Image error for ${o.id}`),v.target.src="https://via.placeholder.com/400x300?text=Error")}})})}),h.jsx("div",{className:"image-overlay",children:h.jsx("span",{children:"Visitar"})})]}),h.jsxs("div",{className:"content-info",children:[h.jsx("h3",{children:o.title}),h.jsx("p",{children:o.description}),h.jsxs("div",{className:"feature-list",children:[h.jsx("h4",{className:"feature-list-title",children:"Destaques:"}),o.features.map((v,y)=>h.jsx("div",{className:"feature-list-item",children:h.jsxs("a",{href:v.featureURL,target:"_blank",rel:"noreferrer",className:"feature-link",children:["• ",v.feature]})},y))]}),h.jsx("button",{className:"visit-button",onClick:()=>m(o.url),children:"Visitar site"})]})]})},Tr=()=>{const[o,s]=k.useState([]),[a,l]=k.useState(!0),[c,p]=k.useState(!1);return k.useEffect(()=>{c||p(!0);const d=()=>{window.innerWidth<=768&&(p(!1),setTimeout(()=>p(!0),50))};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[c]),k.useEffect(()=>{try{Xe&&Xe.municipio?(console.log(`Loaded ${Xe.municipio.length} municipal services`),s(Xe.municipio)):(console.warn("No municipio data available or invalid format"),s([]))}catch(d){console.error("Error loading municipio data:",d),s([])}finally{l(!1)}},[]),k.useEffect(()=>{a||hi()},[a]),a?h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{className:"loading-text",children:"A carregar informação municipal..."})]}):o.length===0?h.jsx("div",{className:"full-width-container",children:h.jsx("div",{className:"introduction full-width",children:h.jsxs("div",{className:"intro-content",children:[h.jsx("p",{children:"Aceda a informação e recursos municipais nas áreas do ordenamento do território, urbanismo e reabilitação urbana."}),h.jsx("p",{style:{textAlign:"center",marginTop:"40px",fontWeight:"bold"},children:"Informação em atualização."})]})})}):h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:h.jsx("p",{children:"Aceda a informação e recursos municipais nas áreas do ordenamento do território, urbanismo e reabilitação urbana."})})}),h.jsx("div",{className:"full-width-grid",children:o.map(d=>h.jsx(Lr,{service:d},d.id))})]})},Er=[{id:"dut",title:"DUT Driving Urban Transitions",description:"Financiamento de projetos transnacionais de investigação e inovação.",url:"https://dutpartnership.eu/dut-call-2025/",features:[{feature:"Acesso a financiamento",featureURL:"https://dutpartnership.eu/funding-opportunities/"},{feature:"Biblioteca de recursos",featureURL:"https://dutpartnership.eu/media-library/"}],imageUrl:{webp:"/images/projects/dut.webp",fallback:"/images/projects/dut.jpeg",thumbnail:{width:400,height:300}}},{id:"cordis",title:"CORDIS",description:"Repositório de projetos de investigação financiados pela União Europeia.",url:"https://cordis.europa.eu/",features:[{feature:"Pesquisa avançada de projetos",featureURL:"https://cordis.europa.eu/search"},{feature:"Resultados dos projetos",featureURL:"https://cordis.europa.eu/projects/en"},{feature:"Contactos dos coordenadores",featureURL:"https://cordis.europa.eu/partners"}],imageUrl:{webp:"/images/projects/cordis.webp",fallback:"/images/projects/cordis.jpeg",thumbnail:{width:400,height:300}}},{id:"new-european-bauhaus",title:"Nova Bauhaus Europeia",description:"Reimaginar a vida sustentável na Europa: Uma plataforma para experimentação e inovação estética nas cidades europeias, com acesso a financiamento da UE para projetos sustentáveis e inclusivos.",url:"https://new-european-bauhaus.europa.eu/index_en",features:[{feature:"Financiamento",featureURL:"https://new-european-bauhaus.europa.eu/get-involved/funding-opportunities_en"},{feature:"Recursos e instrumentos",featureURL:"https://new-european-bauhaus.europa.eu/tools-and-resources_en"}],imageUrl:{webp:"/images/projects/bauhaus.webp",fallback:"/images/projects/bauhaus.jpeg",thumbnail:{width:400,height:300}}},{id:"life",title:"Programa LIFE",description:"Projetos de ação ambiental e climática",url:"https://cinea.ec.europa.eu/programmes/life_en",features:[{feature:"Oportunidades de financiamento",featureURL:"https://cinea.ec.europa.eu/funding-opportunities_en"},{feature:"Adaptação Climática",featureURL:"https://cinea.ec.europa.eu/programmes/life/climate-change-mitigation-and-adaptation_en"},{feature:"Estudos e publicações",featureURL:"https://cinea.ec.europa.eu/publications_en"}],imageUrl:{webp:"/images/projects/life.webp",fallback:"/images/projects/life.jpeg",thumbnail:{width:400,height:300}}},{id:"erdf",title:"Fundo Europeu de Desenvolvimento Regional (FEDER)",description:"Desenvolvimento urbano sustentável, economia de baixo carbono",url:"https://ec.europa.eu/regional_policy/funding/erdf_en",features:[{feature:"Financiamento",featureURL:"https://ec.europa.eu/regional_policy/funding_en"},{feature:"Mapa de projetos",featureURL:"https://ec.europa.eu/regional_policy/information-sources/maps_en"}],imageUrl:{webp:"/images/projects/feder.webp",fallback:"/images/projects/feder.jpeg",thumbnail:{width:400,height:300}}},{id:"urbact",title:"URBACT Knowledge Hub",description:"Plataforma especializada em projetos de desenvolvimento urbano, com recuros e partilha de boas práticas.",url:"https://urbact.eu",features:[{feature:"Exemplos de boas práticas",featureURL:"https://urbact.eu/good-practices/home"},{feature:"Base de dados de conhecimento",featureURL:"https://urbact.eu/knowledge-hub"},{feature:"Ferramentas e metodologias",featureURL:"https://urbact.eu/toolbox-home"}],imageUrl:{webp:"/images/projects/urbact.webp",fallback:"/images/projects/urbact.jpeg",thumbnail:{width:400,height:300}}},{id:"jpi-urban-europe",title:"JPI Urban Europe Project Database",description:"Base de dados focada em desenvolvimento urbano sustentável, com soluções inovadoras e resultados de implementação.",url:"https://jpi-urbaneurope.eu/projects/",features:[{feature:"Descrições dos projetos",featureURL:"https://jpi-urbaneurope.eu/projects/#"}],imageUrl:{webp:"/images/projects/jpi-urban.webp",fallback:"/images/projects/jpi-urban.jpeg",thumbnail:{width:400,height:300}}},{id:"investeu",title:"InvestEU",description:"Infraestrutura urbana, renovações de eficiência energética. Dá um impulso ao investimento, inovação e criação de empregos na Europa durante o período 2021-27. usando garantias do orçamento da UE.",url:"https://investeu.europa.eu/",features:[{feature:"Portal de investimento",featureURL:"https://investeu.europa.eu/investeu-programme/investeu-portal_en"},{feature:"Mapa de investimentos",featureURL:"https://investeu.europa.eu/investeu-operations/investeu-operations-map_en"}],imageUrl:{webp:"/images/projects/investeu.webp",fallback:"/images/projects/investeu.jpeg",thumbnail:{width:400,height:300}}},{id:"jtf",title:"Fundo para uma Transição Justa",description:"Apoio às regiões mais afetadas pela transição para a neutralidade climática",url:"https://ec.europa.eu/regional_policy/funding/just-transition-fund/just-transition-platform_en",features:[{feature:"Mecanismos de financiamento",featureURL:"https://ec.europa.eu/regional_policy/whats-new/tenders-and-grants/calls-for-expressions-of-interest_en"},{feature:"Assitência técnica",featureURL:"https://ec.europa.eu/regional_policy/funding/just-transition-fund/just-transition-platform/supportground_en"}],imageUrl:{webp:"/images/projects/jtf.webp",fallback:"/images/projects/jtf.jpeg",thumbnail:{width:400,height:300}}},{id:"keep-eu",title:"KEEP.eu",description:"Base de dados de projetos de cooperação territorial.",url:"https://keep.eu/",features:[{feature:"Mapa interativo de projetos",featureURL:"https://keep.eu/countries-and-regions/"},{feature:"Oportunidades de financiamento",featureURL:"https://interreg.eu/calls-for-projects/"},{feature:"Informação de parcerias",featureURL:"https://keep.eu/partners/"}],imageUrl:{webp:"/images/projects/keep-eu.webp",fallback:"/images/projects/keep-eu.jpeg",thumbnail:{width:400,height:300}}},{id:"espon",title:"ESPON Database",description:"Base de dados especializada em ordenamento do território.",url:"https://www.espon.eu/tools-maps/espon-tools",features:[{feature:"Mapas e Bases de Dados",featureURL:"https://www.espon.eu/tools-maps"},{feature:"Relatórios e indicadores",featureURL:"https://www.espon.eu/tools-maps/indicators"},{feature:"Exemplos e casos de estudo",featureURL:"https://archive.espon.eu/topics-policy/case-studies"}],imageUrl:{webp:"/images/projects/espon.webp",fallback:"/images/projects/espon.jpeg",thumbnail:{width:400,height:300}}},{id:"uia",title:"Urban Innovative Actions",description:"Projetos de inovação urbana.",url:"https://uia-initiative.eu/en",features:[{feature:"Adaptasção climática",featureURL:"https://uia-initiative.eu/en/theme/climate-adaptation"},{feature:"Mobilidade urbana",featureURL:"https://uia-initiative.eu/en/theme/urban-mobility"},{feature:"Habitação",featureURL:"https://uia-initiative.eu/en/theme/housing"}],imageUrl:{webp:"/images/projects/uia.webp",fallback:"/images/projects/uia.jpeg",thumbnail:{width:400,height:300}}}],Ye={projects:Er},Sr=({project:o})=>{var _;const[s,a]=k.useState(!1),[l,c]=k.useState(!1),p=v=>v?v.startsWith("http")||v.startsWith("/polis/")?v:v.startsWith("./")?`/polis${v.substring(1)}`:`/polis${v}`:"https://via.placeholder.com/400x300?text=Project",d=((_=o.imageUrl)==null?void 0:_.fallback)||o.imageUrl,m=v=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.open(v,"_blank","noopener,noreferrer")},100)};return h.jsxs("div",{className:"content-card mobile-fullwidth",id:`project-${o.id}`,children:[h.jsxs("div",{className:"content-image-link",onClick:()=>m(o.url),children:[h.jsx("div",{className:`content-image ${s?"":"loading"}`,children:h.jsx("picture",{children:h.jsx("img",{src:p(d),alt:o.title,loading:"lazy",onLoad:()=>a(!0),onError:v=>{l||(c(!0),console.error(`Image error for ${o.id}`),v.target.src="https://via.placeholder.com/400x300?text=Error")}})})}),h.jsx("div",{className:"image-overlay",children:h.jsx("span",{children:"Visitar site"})})]}),h.jsxs("div",{className:"content-info",children:[h.jsx("h3",{children:o.title}),h.jsx("p",{children:o.description}),h.jsxs("div",{className:"feature-list",children:[h.jsx("h4",{className:"feature-list-title",children:"Destaques:"}),o.features.map((v,y)=>h.jsx("div",{className:"feature-list-item",children:typeof v=="string"?h.jsxs("div",{className:"feature-text",children:["• ",v]}):h.jsxs("a",{href:v.featureURL,target:"_blank",rel:"noreferrer",className:"feature-link",children:["• ",v.feature]})},y))]}),h.jsx("button",{className:"visit-button",onClick:()=>m(o.url),children:"Visitar site"})]})]})},Cr=()=>{const[o,s]=k.useState([]),[a,l]=k.useState(!0),[c,p]=k.useState(!1);return k.useEffect(()=>{c||p(!0);const d=()=>{window.innerWidth<=768&&(p(!1),setTimeout(()=>p(!0),50))};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[c]),k.useEffect(()=>{try{Ye&&Ye.projects?(console.log(`Loaded ${Ye.projects.length} projects`),s(Ye.projects)):(console.warn("No projects data available or invalid format"),s([]))}catch(d){console.error("Error loading projects data:",d),s([])}finally{l(!1)}},[]),k.useEffect(()=>{a||hi()},[a]),a?h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{className:"loading-text",children:"A carregar projetos europeus..."})]}):o.length===0?h.jsx("div",{className:"full-width-container",children:h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:h.jsx("p",{children:"Explore oportunidades de financiamento e colaboração em projetos europeus de desenvolvimento urbano."})})})}):h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:h.jsx("p",{children:"Explore oportunidades de financiamento e colaboração em projetos europeus de desenvolvimento urbano."})})}),h.jsx("div",{className:"full-width-grid",children:o.map(d=>h.jsx(Sr,{project:d},d.id))})]})},kr={urbanism:{title:"Urbanismo",description:"Publicações de urbanismo e reabilitação urbana",imageUrl:{webp:"/images/publications/urbanism.webp",fallback:"/images/publications/urbanism.jpeg",thumbnail:{width:400,height:300}},content:[{id:"articulo",title:"Articulo - Journal of Urban Research",description:"Uma perspetiva multidisciplinar sobre a transformação de questões sociais, ambientais e económicas das cidades e regiões urbanas. Publica artigos teóricos e empíricos, a partir de um fórum internacional de académicos e profissionais que trabalham em questões urbanas.",url:"https://journals.openedition.org/articulo/",imageUrl:{webp:"/images/publications/articulo.webp",fallback:"/images/publications/articulo.jpeg",thumbnail:{width:400,height:300}}},{id:"archive",title:"ARChive",description:"Como uma respeitada plataforma de publicação, a ARChive segue um calendário trimestral de publicação de revisão por pares. É um espaço dinâmico para disseminar e arquivar pesquisas académicas originadas em contribuições apresentadas em conferências académicas. Com um foco especializado nas ciências sociais e comportamentais, acolhe trabalhos de investigação na interação complexa entre cidades e fatores ambientais.",url:"https://press.ierek.com/index.php/ARChive",imageUrl:{webp:"/images/publications/archive.webp",fallback:"/images/publications/archive.jpeg",thumbnail:{width:400,height:300}}},{id:"buildings-cities",title:"Buildings & Cities",description:"Publica investigação sobre a interação entre as diferentes dimensões do ambiente construído: edifícios, bairros, cidades e infraestruturas imobiliárias. A revista centra-se nas políticas, práticas e resultados do ambiente construído. Fornece uma plataforma para novas ideias, abordagens inovadoras e perspetivas baseadas em investigação que podem ajudar a melhorar o ambiente construído.",url:"https://journal-buildingscities.org/",imageUrl:{webp:"/images/publications/buildings.webp",fallback:"/images/publications/buildings.jpeg",thumbnail:{width:400,height:300}}},{id:"cidades",title:"CIDADES, Comunidades e Territórios",description:"Divulga investigação e discussões na área científica dos Estudos Urbanos, com destaque para o panorama editorial científico, nacional e internacional. A revista foi criada por investigadores do Centro de Estudos Territoriais do ISCTE, a aprtir de trabalho consolidado em mais de duas dácadas.",url:"https://revistas.rcaap.pt/cct/",imageUrl:{webp:"/images/publications/cidades.webp",fallback:"/images/publications/cidades.jpeg",thumbnail:{width:400,height:300}}},{id:"city-environment-interactions",title:"City and Environment Interactions",description:"Um fórum internacional e interdisciplinar de acesso aberto rápido focado nas interações entre cidades e pressões ambientais e climáticas.",url:"https://www.sciencedirect.com/journal/city-and-environment-interactions",imageUrl:{webp:"/images/publications/citty-environment-interactions.webp",fallback:"/images/publications/citty-environment-interactions.jpeg",thumbnail:{width:400,height:300}}},{id:"ciudades",title:"Ciudades",description:"Revista científica de periodicidade anual, fundada em 1993 e editada pelo Instituto Universitário de Urbanística da Universidade de Valladolid (Espanha. Dedica-se a temas de urbanismo em sentido amplo e dirige-se ao mundo académico assim como à cidadania interessada pelas questões urbanas e territoriais desde disciplinas diversas.",url:"https://revistas.uva.es/index.php/ciudades/index",imageUrl:{webp:"/images/publications/ciudades.webp",fallback:"/images/publications/ciudades.jpeg",thumbnail:{width:400,height:300}}},{id:"computational-urban-science",title:"Computational Urban Science",description:"Publica artigos originais, revisões, artigos metodológicos e artigos de opinião revistos por pares, com foco na interseção das ciências computacionais e das ciências urbanas na construção de cidades inteligentes e resilientes.",url:"https://link.springer.com/journal/43762",imageUrl:{webp:"/images/publications/computational-urban-science.webp",fallback:"/images/publications/computational-urban-science.jpeg",thumbnail:{width:400,height:300}}},{id:"current-urban-studies",title:"Current Urban Studies",description:"Questões urbanas contemporâneas e participação comunitária.",url:"http://www.scirp.org/journal/cus",imageUrl:{webp:"/images/publications/current-urban-studies.webp",fallback:"/images/publications/current-urban-studies.jpeg",thumbnail:{width:400,height:300}}},{id:"frontiers-built-environment",title:"Frontiers in Built Environment",description:"Uma revista inovadora que avança o nosso conhecimento de engenharia civil. Foco especial no desenvolvimento de metodologias sustentáveis para a gestão de edifícios e infraestruturas resilientes.",url:"https://www.frontiersin.org/journals/built-environment",imageUrl:{webp:"/images/publications/frontiers-built-environment.webp",fallback:"/images/publications/frontiers-built-environment.jpeg",thumbnail:{width:400,height:300}}},{id:"future-cities-environment",title:"Future Cities and Environment",description:"Aborda o impacto ambiental das cidades e os desafios à sua sustentabilidade a longo prazo, tanto na escala local como global.",url:"https://futurecitiesandenvironment.com/",imageUrl:{webp:"/images/publications/future-cities-environment.webp",fallback:"/images/publications/future-cities-environment.jpeg",thumbnail:{width:400,height:300}}},{id:"iet-smart-cities",title:"IET Smart Cities",description:"Publica investigação original multidisciplinar sobre os mais recentes avanços em cidades inteligentes e ciências urbanas e sustentabilidade da academia, indústria e governo. Os nossos artigos abordam normas, arquiteturas, tecnologias-chave, sistemas, implementação, implantação, aplicações, questões sociais, avaliação de desempenho, governança urbana e políticas.",url:"https://ietresearch.onlinelibrary.wiley.com/journal/26317680",imageUrl:{webp:"/images/publications/smart-cities.webp",fallback:"/images/publications/smart-cities.jpeg",thumbnail:{width:400,height:300}}},{id:"international-urban-sustainable",title:"International Journal of Urban Sustainable Development",description:"Com foco no desenvolvimento urbano sustentável e envolvimento comunitário, publica artigos sobre os complexos desafios ambientais, sociais, económicos, políticos, espaciais, institucionais e físicos nas áreas urbanas enfrentam.",url:"https://www.tandfonline.com/toc/tjue20/current",imageUrl:{webp:"/images/publications/urban-sustainable.webp",fallback:"/images/publications/urban-sustainable.jpeg",thumbnail:{width:400,height:300}}},{id:"irspsd",title:"IRSPSD International",description:"Uma revista de acesso aberto, revisada por pares, focada nos impactos da política na implementação do planeamento espacial. A revista é uma plataforma multidisciplinar que reflete uma variedade de perspetivas – como desenvolvimento económico, igualdade social e proteção ecológica – com o objetivo final de fornecer perspetivas sobre formas urbanas sustentáveis no processo de urbanização.",url:"https://www.spsdpress.org/",imageUrl:{webp:"/images/publications/irspsd.webp",fallback:"/images/publications/irspsd.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-ecology",title:"Journal of Urban Ecology",description:"Abrange multíplos aspetos dos ambientes urbanos, incluindo as ciências ecológicas e sociais, bem como o design e planeamento urbanos. Inclui por isso a biologia dos organismos que habitam áreas urbanas, as questões sociais humanas encontradas dentro de paisagens urbanas, a diversidade de serviços ecossistémicos e o design de cidades sustentáveis e resilientes.",url:"https://academic.oup.com/jue",imageUrl:{webp:"/images/publications/urban-ecology.webp",fallback:"/images/publications/urban-ecology.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-management",title:"Journal of Urban Management",description:"Uma revista internacional, revisada por pares, de acesso aberto que abrange o planeamento, administração, regulação e governação da complexidade urbana.",url:"https://www.sciencedirect.com/journal/journal-of-urban-management",imageUrl:{webp:"/images/publications/urban-management.webp",fallback:"/images/publications/urban-management.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-mobility",title:"Journal of Urban Mobility",description:"Publica contribuições revistas por pares em todas as áreas da mobilidade urbana que aceleram soluções que melhoram o uso coletivo de espaços urbanos habitáveis, para garantir uma mobilidade multimodal acessível, conveniente, segura, eficiente, sustentável e acessível.",url:"https://www.sciencedirect.com/journal/journal-of-urban-mobility",imageUrl:{webp:"/images/publications/urban-mobility.webp",fallback:"/images/publications/urban-mobility.jpeg",thumbnail:{width:400,height:300}}},{id:"research-urbanism",title:"Research in Urbanism",description:"Publica investigação, análise e exploração nos campos sobrepostos de design urbano, planeamento urbano, planeamento regional, design metropolitano, planeamento espacial, habitação, renovação urbana, gestão urbana, arquitetura paisagística, design ambiental, sustentabilidade, tecnologia urbana, mobilidade urbana, património cultural, geomática e geodesign.",url:"https://rius.ac/index.php/rius",imageUrl:{webp:"/images/publications/research-urbanism.webp",fallback:"/images/publications/research-urbanism.jpeg",thumbnail:{width:400,height:300}}},{id:"resilient-cities",title:"Resilient Cities and Structures",description:"Publica artigos de investigação originais, revisões, comentários e perspetivas para construir uma cidade resiliente em múltiplos níveis e aspetos. O âmbito da revista inclui investigação fundamental, tecnologias inovadoras e aplicações de engenharia em cidades resilientes, infraestruturas, estruturas e gestão baseada na resiliência.",url:"https://www.sciencedirect.com/journal/resilient-cities-and-structures",imageUrl:{webp:"/images/publications/resilient-cities.webp",fallback:"/images/publications/resilient-cities.jpeg",thumbnail:{width:400,height:300}}},{id:"smart-construction",title:"Smart Construction and Sustainable Cities",description:"Uma revista de acesso aberto na vanguarda da investigação interdisciplinar, abordando desafios urbanos e promovendo a sustentabilidade através de tecnologias inteligentes inovadoras e soluções verdes.",url:"https://link.springer.com/journal/44268",imageUrl:{webp:"/images/publications/smart-construction.webp",fallback:"/images/publications/smart-construction.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-agriculture",title:"Urban Agriculture & Regional Food Systems",description:"Produção agrícola urbana e periurbana. A revista aborda o desafio de garantir o acesso a alimentos nutritivos e seguros para populações urbanas em meio à escassez de recursos e às alterações climáticas.",url:"https://acsess.onlinelibrary.wiley.com/journal/25751220",imageUrl:{webp:"/images/publications/urban-agriculture.webp",fallback:"/images/publications/urban-agriculture.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-governance",title:"Urban Governance",description:"Proporciona um fórum para abordar algumas das questões mais desafiadoras que as cidades e a governança enfrentam em todo o mundo, para inspirar investigação académica e debates, e para partilhar conhecimento, experiência e críticas sobre governança urbana.",url:"https://www.sciencedirect.com/journal/urban-governance",imageUrl:{webp:"/images/publications/urban-governance.webp",fallback:"/images/publications/urban-governance.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-lifeline",title:"Urban Lifeline",description:"Revista de acesso aberto que publica conhecimento científico e produtos de investigação relevantes para a sustentabilidade e resiliência da linha de vida urbana.",url:"https://link.springer.com/journal/44285",imageUrl:{webp:"/images/publications/urban-lifeline.webp",fallback:"/images/publications/urban-lifeline.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-planning",title:"Urban Planning",description:"Revista internacional de acesso aberto de estudos urbanos avaliados por pares, destinada a avançar entendimentos e ideias dos habitats da humanidade — aldeias, vilas, cidades, megacidades — a fim de promover o progresso e a qualidade de vida.",url:"https://www.cogitatiopress.com/urbanplanning",imageUrl:{webp:"/images/publications/urban-planning.webp",fallback:"/images/publications/urban-planning.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-planning-transport",title:"Urban, Planning and Transport Research",description:"Publica investigação urbana, de planeamento e de transporte, incluindo design urbano, desenvolvimento comunitário e geografia humana.",url:"https://www.tandfonline.com/revistas/rupt20",imageUrl:{webp:"/images/publications/urban-planning-transport.webp",fallback:"/images/publications/urban-planning-transport.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-science",title:"Urban Science",description:"Revista internacional, científica, revisata por pares, de acesso aberto de estudos urbanos e regionais, publicada mensalmente online pela MDPI.",url:"https://www.mdpi.com/journal/urbansci",imageUrl:{webp:"/images/publications/urban-science.webp",fallback:"/images/publications/urban-science.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-transcripts",title:"Urban Transcripts",description:"Visa reconhecer, valorizar e avançar uma multiplicidade de conhecimentos sobre a Cidade produzidos através de uma sinergia de disciplinas científicas e profissionais, experiências vividas e práticas culturais.",url:"https://journal.urbantranscripts.org/",imageUrl:{webp:"/images/publications/urban-transcripts.webp",fallback:"/images/publications/urban-transcripts.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-transformations",title:"Urban Transformations",description:"Plataforma de publicação e discussão para pessoas envolvidas em ciência, política e prática, visando impacto na vida real. Convidamos contribuições que abordem a transformação urbana no Norte e Sul globais.",url:"https://urbantransformations.biomedcentral.com/",imageUrl:{webp:"/images/publications/urban-transformations.webp",fallback:"/images/publications/urban-transformations.jpeg",thumbnail:{width:400,height:300}}},{id:"urbana",title:"Urbana: Urban Affairs and Public Policy",description:"Revista académica que se concentra em questões urbanas em todo o mundo, incluindo geografia urbana, planeamento urbano, história urbana, política municipal, política ambiental urbana, economia política das cidades, desenvolvimento metropolitano, cidades e relações internacionais, e visões literárias das cidades.",url:"https://urbanauapp.org/",imageUrl:{webp:"/images/publications/urbana.webp",fallback:"/images/publications/urbana.jpeg",thumbnail:{width:400,height:300}}},{id:"urbe",title:"URBE - Revista Brasileira de Gestão Urbana",description:"A revista eletrónica urbe proporciona um fórum académico para temas especificamente relacionados com a gestão urbana, mas também com o campo mais amplo dos estudos urbanos.",url:"https://periodicos.pucpr.br/Urbe",imageUrl:{webp:"/images/publications/urbe.webp",fallback:"/images/publications/urbe.jpeg",thumbnail:{width:400,height:300}}}]},planning:{title:"Ordenamento do território",description:"Publicações de planeamento territorial",imageUrl:{webp:"/images/publications/planning.webp",fallback:"/images/publications/planning.jpeg",thumbnail:{width:400,height:300}},content:[{id:"blue-green-systems",title:"Blue-Green Systems",description:"Publica pesquisas sobre uso de água sustentável, energeticamente eficiente e ambientalmente responsável em cidades e suas regiões. Contribuições de engenheiros hídricos, economistas, planeadores, hidrólogos, ecologistas, sociólogos, arquitetos, designers de paisagem, profissionais de saúde, decisores políticos e qualquer pessoa envolvida na resolução dos desafios hídricos.",url:"https://iwaponline.com/bgs/pages/Aims_and_Scope",imageUrl:{webp:"/images/publications/blue-green-systems.webp",fallback:"/images/publications/blue-green-systems.jpeg",thumbnail:{width:400,height:300}}},{id:"creative-practices",title:"European Journal of Creative Practices in Cities and Landscapes",description:"Revista semestral, publicar artigos inovadores e originais sobre património cultural no ambiente construído como um conjunto de práticas criativas. O foco será a cidade europeia, com particular atenção às suas transformações dentro da metrópole global e aos seus fluxos de pessoas, capitais, bens e ideias.",url:"https://cpcl.unibo.it/",imageUrl:{webp:"/images/publications/creative-practices.webp",fallback:"/images/publications/creative-practices.jpeg",thumbnail:{width:400,height:300}}},{id:"spatial-development",title:"European Journal of Spatial Development",description:"Uma revista de acesso aberto para o planeamento territorial, desenvolvimento regional, elaboração de políticas e governança, a partir de perspetivas europeias e relacionadas com a UE. Serve como uma plataforma para académicos críticos e profissionais de desenvolvimento espacial partilharem investigação de ponta.",url:"https://journals.polito.it/index.php/EJSD",imageUrl:{webp:"/images/publications/spatial-development.webp",fallback:"/images/publications/spatial-development.jpeg",thumbnail:{width:400,height:300}}},{id:"finisterra",title:"Finisterra",description:"Revista Portuguesa de Geografia, a Finisterra é editada desde 1966 pelo Centro de Estudos Geográficos da Universidade de Lisboa (CEG, Universidade de Lisboa).",url:"https://revistas.rcaap.pt/finisterra",imageUrl:{webp:"/images/publications/finisterra.webp",fallback:"/images/publications/finisterra.jpeg",thumbnail:{width:400,height:300}}},{id:"urban-rural-planning",title:"Frontiers of Urban and Rural Planning",description:"Um fórum para artigos de investigação originais, notas técnicas, revisões e estudos de caso do planeamento urbano. Estudos inovadores e multidisciplinares sobre a promoção do bem-estar das pessoas e do desenvolvimento sustentável em áreas urbanas e rurais, utilizando uma abordagem integrada no planeamento do território.",url:"https://link.springer.com/journal/44243",imageUrl:{webp:"/images/publications/urban-rural-planning.webp",fallback:"/images/publications/urban-rural-planning.jpeg",thumbnail:{width:400,height:300}}},{id:"regional-development",title:"Insights into Regional Development",description:"Visa revelar novos fenómenos de desenvolvimento regional para encontrar as melhores formas de lidar com questões emergentes para o desenvolvimento regional sustentável e seguro em todo o mundo. Foco especial em regiões emergentes e menos desenvolvidas.",url:"https://jssidoi.org/ird/",imageUrl:{webp:"/images/publications/regional-development.webp",fallback:"/images/publications/regional-development.jpeg",thumbnail:{width:400,height:300}}},{id:"public-space",title:"Journal of Public Space",description:"É a primeira revista académica internacional, interdisciplinar, de acesso aberto inteiramente dedicada ao espaço público. Fala diferentes línguas e está aberta a abraçar a diversidade de campos interdisciplinares e todos os países.",url:"https://www.journalpublicspace.org/index.php/jps",imageUrl:{webp:"/images/publications/public-space.webp",fallback:"/images/publications/public-space.jpeg",thumbnail:{width:400,height:300}}},{id:"public-transportation",title:"Journal of Public Transportation",description:"Com foco nas várias formas de transporte público, os tópicos são abordados a partir de várias disciplinas académicas, incluindo engenharia, economia, ciências comportamentais, planeamento, geografia, políticas públicas, ciência de dados e outras. A ênfase é colocada na identificação de soluções inovadoras para problemas de transporte público.",url:"https://www.sciencedirect.com/journal/journal-of-public-transportation",imageUrl:{webp:"/images/publications/public-transportation.webp",fallback:"/images/publications/public-transportation.jpeg",thumbnail:{width:400,height:300}}},{id:"spatial-information",title:"Journal of Spatial Information Science",description:"O Journal of Spatial Information Science (JOSIS) é uma revista internacional, interdisciplinar, de acesso aberto dedicada à publicação de artigos de investigação originais e de alta qualidade em ciência da informação espacial e geográfica, através da computação com informação geoespacial, até às tecnologias para uso de informação geográfica.",url:"https://josis.org/index.php/josis/article/view/357",imageUrl:{webp:"/images/publications/spatial-information.webp",fallback:"/images/publications/spatial-information.jpeg",thumbnail:{width:400,height:300}}},{id:"planext",title:"plaNext",description:"A rede de jovens académicos da AESOP fundou a plaNext para proporcionar aos potenciais autores uma oportunidade de envolver as suas ideias em debates internacionais de planeamento, bem como para tornar a sua investigação disponível para um público mais amplo de planeamento.",url:"https://journals.aesop-planning.eu/index.php/planext",imageUrl:{webp:"/images/publications/planext.webp",fallback:"/images/publications/planext.jpeg",thumbnail:{width:400,height:300}}},{id:"regional-science-policy",title:"Regional Science Policy & Practice",description:"Publica artigos sobre planeamento, política pública, geografia, economia e ciência ambiental. Um fórum para académicos e decisores políticos desenvolverem um diálogo para identificar e explorar muitos dos desafios que enfrentam as economias locais e regionais.",url:"https://www.sciencedirect.com/journal/regional-science-policy-and-practice",imageUrl:{webp:"/images/publications/regional-practice.webp",fallback:"/images/publications/regional-practice.jpeg",thumbnail:{width:400,height:300}}},{id:"regional-studies",title:"Regional Studies, Regional Science",description:"Uma revista de acesso aberto sobre questões regionais e urbanas em geografia, economia, ciência regional, estudos ambientais, planeamento e governança.",url:"https://www.tandfonline.com/journals/rsrs20",imageUrl:{webp:"/images/publications/regional-studies.webp",fallback:"/images/publications/regional-studies.jpeg",thumbnail:{width:400,height:300}}},{id:"scienze-territorio",title:"Scienze del Territorio Rivista di Studi Territorialisti",description:"A revista acolhe estudos pioneiros destinados a valorizar o património territorial, propondo projetos de transformação baseados nas suas diretrizes.",url:"https://oajournals.fupress.net/index.php/sdt/index",imageUrl:{webp:"/images/publications/scienze-territorio.webp",fallback:"/images/publications/scienze-territorio.jpeg",thumbnail:{width:400,height:300}}},{id:"tema",title:"TeMA: Journal of Land Use, Mobility and Environment",description:"A revista TeMA foi estabelecida com o objetivo primário de fomentar e fortalecer a integração entre estudos de transformação urbana e aqueles focados na governança da mobilidade, em todos os seus aspetos, com vista à sustentabilidade ambiental.",url:"http://www.serena.unina.it/index.php/tema/index",imageUrl:{webp:"/images/publications/tema.webp",fallback:"/images/publications/tema.jpeg",thumbnail:{width:400,height:300}}},{id:"territorial-identity",title:"Territorial Identity and Development",description:"Territorial Identity and Development é uma revista internacional e interdisciplinar. Tem duas edições por ano: maio (edição da Primavera) e novembro (edição do Outono). Cada edição inclui 5 artigos de investigação e 2 revisões de livros.",url:"https://territorial-identity.ro/",imageUrl:{webp:"/images/publications/territorial-identity.webp",fallback:"/images/publications/territorial-identity.jpeg",thumbnail:{width:400,height:300}}}]},architecture:{title:"Arquitectura",description:"Publicações de arquitetura",imageUrl:{webp:"/images/publications/architecture.webp",fallback:"/images/publications/architecture.jpeg",thumbnail:{width:400,height:300}},content:[{id:"architecture-mps",title:"MPS - Architecture, Media, Politics, and Society",description:"Architecture_MPS é uma revista internacional da UCL Press. Publica artigos de urbanistas, arquitetos, designers urbanos, sociólogos, artistas, economistas urbanos e advogados especializados em direitos fundiários, e visa abordar a relação destas disciplinas com o ambiente construído.",url:"https://journals.uclpress.co.uk/amps/issues/",imageUrl:{webp:"/images/publications/archicteture-mps.webp",fallback:"/images/publications/archicteture-mps.jpeg",thumbnail:{width:400,height:300}}},{id:"agathon",title:"AGATHÓN",description:"Revista semestral para o crescimento e disseminação do conhecimento nos temas abrangidos pelo Urbanismo, Arquitetura, Engenharia, Arte e Design.",url:"https://www.agathon.it/agathon",imageUrl:{webp:"/images/publications/agathon.webp",fallback:"/images/publications/agathon.jpeg",thumbnail:{width:400,height:300}}},{id:"cadernos-arte-publica",title:"Cadernos de Arte Pública",description:"Publicação científica dedicada à Arte Pública como área de interseção entre arte, design e património e a construção participada do espaço público. Promovido pela AP2 (associação científica) através do projeto Urbancreativity.org.",url:"https://journals.ap2.pt/index.php/CAP/index",imageUrl:{webp:"/images/publications/arte-publlca.webp",fallback:"/images/publications/arte-publlca.jpeg",thumbnail:{width:400,height:300}}},{id:"docomomo-journal",title:"Docomomo Journal",description:"Publica um resumo semestral de investigação recente e original sobre a documentação e conservação de edifícios, locais e bairros do Movimento Moderno.",url:"https://docomomojournal.com/index.php/journal/about",imageUrl:{webp:"/images/publications/docomomo.webp",fallback:"/images/publications/docomomo.jpeg",thumbnail:{width:400,height:300}}},{id:"enq-enquiry",title:"ENQ - Enquiry",description:"Revista de acesso aberto para investigação arquitetónica, publicada pelo Architectural Research Centers Consortium (ARCC) como um recurso para investigação em arquitetura e para apoiar o desenvolvimento contínuo da cultura de investigação na arquitetura.",url:"https://www.arcc-journal.org/index.php/arccjournal",imageUrl:{webp:"/images/publications/enq.webp",fallback:"/images/publications/enq.jpeg",thumbnail:{width:400,height:300}}},{id:"estudo-previo",title:"Estudo Prévio",description:"Publicação académica do Centro de Estudos de Arquitetura, Cidade e Território da Universidade Autónoma de Lisboa (CEACT/UAL).",url:"https://www.estudoprevio.net/",imageUrl:{webp:"/images/publications/estudo-previo.webp",fallback:"/images/publications/estudo-previo.jpeg",thumbnail:{width:400,height:300}}},{id:"field",title:"Field",description:"Publicação internacional de renome, revista por pares e de acesso aberto, com sede na Escola de Arquitetura da Universidade de Sheffield.",url:"https://www.field-journal.org/",imageUrl:{webp:"/images/publications/field.webp",fallback:"/images/publications/field.jpeg",thumbnail:{width:400,height:300}}},{id:"architecture-urbanism",title:"Journal of Architecture and Urbanism",description:"Publica investigação original sobre todos os aspetos da arquitetura urbana.",url:"https://journals.vilniustech.lt/index.php/JAU",imageUrl:{webp:"/images/publications/architecture-urbanism.webp",fallback:"/images/publications/architecture-urbanism.jpeg",thumbnail:{width:400,height:300}}},{id:"revista-arquitectura",title:"Revista de Arquitectura",description:"Constitui um fórum apto para a expressão dos resultados do estudo e do debate académico em relação às diversas dimensões do interesse pela arquitetura e pela cidade.",url:"https://revistas.unav.edu/index.php/revista-de-arquitectura",imageUrl:{webp:"/images/publications/revista-arquitectura.webp",fallback:"/images/publications/revista-arquitectura.jpeg",thumbnail:{width:400,height:300}}}]}},Qe={chapters:kr},Ar=({chapter:o,onOpenDetails:s})=>{const[a,l]=k.useState(!1),[c,p]=k.useState(!1),d=m=>{if(!m)return"https://via.placeholder.com/400x300?text=Chapter";const _=typeof m=="string"?m:m.fallback;return _?_.startsWith("http")||_.startsWith("/polis/")?_:_.startsWith("./")?`/polis${_.substring(1)}`:`/polis/${_}`:"https://via.placeholder.com/400x300?text=Chapter"};return h.jsxs("div",{className:"content-card mobile-fullwidth",id:`chapter-${o.id}`,children:[h.jsxs("div",{className:"content-image-link",onClick:()=>s(o),children:[h.jsx("div",{className:`content-image ${a?"":"loading"}`,children:h.jsx("picture",{children:h.jsx("img",{src:d(o.imageUrl),alt:o.title,loading:"lazy",onLoad:()=>l(!0),onError:m=>{c||(p(!0),console.error(`Image error for category ${o.id}`),m.target.src="https://via.placeholder.com/400x300?text=Error")}})})}),h.jsx("div",{className:"image-overlay",children:h.jsx("span",{children:"Ver revistas"})})]}),h.jsxs("div",{className:"content-info",children:[h.jsx("h3",{children:o.title}),h.jsx("p",{children:o.description}),h.jsx("button",{className:"visit-button",onClick:()=>s(o),children:"Ver revistas"})]})]})},jr=({publication:o})=>{const[s,a]=k.useState(!1),[l,c]=k.useState(!1),p=m=>{if(!m)return"https://via.placeholder.com/400x300?text=Publication";const _=typeof m=="string"?m:m.fallback;return _?_.startsWith("http")||_.startsWith("/polis/")?_:_.startsWith("./")?`/polis${_.substring(1)}`:`/polis/${_}`:"https://via.placeholder.com/400x300?text=Publication"},d=m=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.open(m,"_blank","noopener,noreferrer")},100)};return h.jsxs("div",{className:"content-card mobile-fullwidth",id:`publication-${o.id}`,children:[h.jsxs("div",{className:"content-image-link",onClick:()=>d(o.url),children:[h.jsx("div",{className:`content-image ${s?"":"loading"}`,children:h.jsx("picture",{children:h.jsx("img",{src:p(o.imageUrl),alt:o.title,loading:"lazy",onLoad:()=>a(!0),onError:m=>{l||(c(!0),console.error(`Image error for publication ${o.id}`),m.target.src="https://via.placeholder.com/400x300?text=Error")}})})}),h.jsx("div",{className:"image-overlay",children:h.jsx("span",{children:"Ver revista"})})]}),h.jsxs("div",{className:"content-info",children:[h.jsx("h3",{children:o.title}),h.jsx("p",{children:o.description}),h.jsx("button",{className:"visit-button",onClick:()=>d(o.url),children:"Artigos"})]})]})},Mr=()=>{const[o,s]=k.useState([]),[a,l]=k.useState(!0),[c,p]=k.useState(null),[d,m]=k.useState(!1);k.useEffect(()=>{d||m(!0);const y=()=>{window.innerWidth<=768&&(m(!1),setTimeout(()=>m(!0),50))};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[d]),k.useEffect(()=>{try{if(Qe&&Qe.chapters){const y=Object.keys(Qe.chapters).map(P=>({id:P,...Qe.chapters[P]}));s(y),console.log(`Loaded ${y.length} chapters`)}else console.warn("No chapters data available or invalid format"),s([])}catch(y){console.error("Error loading chapters data:",y),s([])}finally{l(!1)}},[]),k.useEffect(()=>{a||hi()},[a,c]);const _=y=>{p(y),window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.pageYOffset>0&&window.scrollTo(0,0)},100)},v=()=>{p(null),window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.pageYOffset>0&&window.scrollTo(0,0)},100)};return a?h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{className:"loading-text",children:"A carregar publicações..."})]}):o.length===0?h.jsx("div",{className:"full-width-container",children:h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:h.jsx("p",{children:"Aceda a conhecimento científico sobre urbanismo, arquitetura e ordenamento do território."})})})}):c?h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"title-container",children:h.jsx("h1",{className:"card-title",children:c.title})}),h.jsx("div",{className:"introduction full-width",children:h.jsxs("div",{className:"intro-content",children:[h.jsx("p",{children:c.description}),h.jsx("button",{className:"back-button",onClick:v,style:{marginTop:"20px"},children:"Voltar para Publicações"})]})}),h.jsx("div",{className:"full-width-grid",children:c.content.map(y=>h.jsx(jr,{publication:y},y.id))})]}):h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:h.jsx("p",{children:"Aceda a conhecimento científico sobre urbanismo, arquitetura e ordenamento do território."})})}),h.jsx("div",{className:"full-width-grid",children:o.map(y=>h.jsx(Ar,{chapter:y,onOpenDetails:_},y.id))})]})};function Or(o,s){const a=k.useRef(s);k.useEffect(function(){s!==a.current&&o.attributionControl!=null&&(a.current!=null&&o.attributionControl.removeAttribution(a.current),s!=null&&o.attributionControl.addAttribution(s)),a.current=s},[o,s])}const Rr=1;function Nr(o){return Object.freeze({__version:Rr,map:o})}function zr(o,s){return Object.freeze({...o,...s})}const os=k.createContext(null),ss=os.Provider;function gn(){const o=k.useContext(os);if(o==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return o}function Ir(o){function s(a,l){const{instance:c,context:p}=o(a).current;return k.useImperativeHandle(l,()=>c),a.children==null?null:Rt.createElement(ss,{value:p},a.children)}return k.forwardRef(s)}function Br(o){function s(a,l){const{instance:c}=o(a).current;return k.useImperativeHandle(l,()=>c),null}return k.forwardRef(s)}function as(o,s){const a=k.useRef();k.useEffect(function(){return s!=null&&o.instance.on(s),a.current=s,function(){a.current!=null&&o.instance.off(a.current),a.current=null}},[o,s])}function _n(o,s){const a=o.pane??s.pane;return a?{...o,pane:a}:o}var rn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(o,s){(function(a,l){l(s)})(ar,function(a){var l="1.9.4";function c(e){var t,i,n,r;for(i=1,n=arguments.length;i<n;i++){r=arguments[i];for(t in r)e[t]=r[t]}return e}var p=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function d(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}var m=0;function _(e){return"_leaflet_id"in e||(e._leaflet_id=++m),e._leaflet_id}function v(e,t,i){var n,r,u,f;return f=function(){n=!1,r&&(u.apply(i,r),r=!1)},u=function(){n?r=arguments:(e.apply(i,arguments),setTimeout(f,t),n=!0)},u}function y(e,t,i){var n=t[1],r=t[0],u=n-r;return e===n&&i?e:((e-r)%u+u)%u+r}function P(){return!1}function O(e,t){if(t===!1)return e;var i=Math.pow(10,t===void 0?6:t);return Math.round(e*i)/i}function E(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(e){return E(e).split(/\s+/)}function C(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?p(e.options):{});for(var i in t)e.options[i]=t[i];return e.options}function x(e,t,i){var n=[];for(var r in e)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(!t||t.indexOf("?")===-1?"?":"&")+n.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function A(e,t){return e.replace(j,function(i,n){var r=t[n];if(r===void 0)throw new Error("No value provided for variable "+i);return typeof r=="function"&&(r=r(t)),r})}var N=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function q(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var pe=0;function z(e){var t=+new Date,i=Math.max(0,16-(t-pe));return pe=t+i,window.setTimeout(e,i)}var H=window.requestAnimationFrame||ue("RequestAnimationFrame")||z,Le=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function X(e,t,i){if(i&&H===z)e.call(t);else return H.call(window,d(e,t))}function Q(e){e&&Le.call(window,e)}var qe={__proto__:null,extend:c,create:p,bind:d,get lastId(){return m},stamp:_,throttle:v,wrapNum:y,falseFn:P,formatNum:O,trim:E,splitWords:S,setOptions:C,getParamString:x,template:A,isArray:N,indexOf:q,emptyImageUrl:V,requestFn:H,cancelFn:Le,requestAnimFrame:X,cancelAnimFrame:Q};function be(){}be.extend=function(e){var t=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,n=p(i);n.constructor=t,t.prototype=n;for(var r in this)Object.prototype.hasOwnProperty.call(this,r)&&r!=="prototype"&&r!=="__super__"&&(t[r]=this[r]);return e.statics&&c(t,e.statics),e.includes&&(We(e.includes),c.apply(null,[n].concat(e.includes))),c(n,e),delete n.statics,delete n.includes,n.options&&(n.options=i.options?p(i.options):{},c(n.options,e.options)),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var u=0,f=n._initHooks.length;u<f;u++)n._initHooks[u].call(this)}},t},be.include=function(e){var t=this.prototype.options;return c(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},be.mergeOptions=function(e){return c(this.prototype.options,e),this},be.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function We(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=N(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(e,t,i){if(typeof e=="object")for(var n in e)this._on(n,e[n],t);else{e=S(e);for(var r=0,u=e.length;r<u;r++)this._on(e[r],t,i)}return this},off:function(e,t,i){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var n in e)this._off(n,e[n],t);else{e=S(e);for(var r=arguments.length===1,u=0,f=e.length;u<f;u++)r?this._off(e[u]):this._off(e[u],t,i)}return this},_on:function(e,t,i,n){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,i)===!1){i===this&&(i=void 0);var r={fn:t,ctx:i};n&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}},_off:function(e,t,i){var n,r,u;if(this._events&&(n=this._events[e],!!n)){if(arguments.length===1){if(this._firingCount)for(r=0,u=n.length;r<u;r++)n[r].fn=P;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var f=this._listens(e,t,i);if(f!==!1){var g=n[f];this._firingCount&&(g.fn=P,this._events[e]=n=n.slice()),n.splice(f,1)}}},fire:function(e,t,i){if(!this.listens(e,i))return this;var n=c({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var u=0,f=r.length;u<f;u++){var g=r[u],b=g.fn;g.once&&this.off(e,b,g.ctx),b.call(g.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(e,t,i,n){typeof e!="string"&&console.warn('"string" type argument expected');var r=t;typeof t!="function"&&(n=!!t,r=void 0,i=void 0);var u=this._events&&this._events[e];if(u&&u.length&&this._listens(e,r,i)!==!1)return!0;if(n){for(var f in this._eventParents)if(this._eventParents[f].listens(e,t,i,n))return!0}return!1},_listens:function(e,t,i){if(!this._events)return!1;var n=this._events[e]||[];if(!t)return!!n.length;i===this&&(i=void 0);for(var r=0,u=n.length;r<u;r++)if(n[r].fn===t&&n[r].ctx===i)return r;return!1},once:function(e,t,i){if(typeof e=="object")for(var n in e)this._on(n,e[n],t,!0);else{e=S(e);for(var r=0,u=e.length;r<u;r++)this._on(e[r],t,i,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[_(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[_(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,c({layer:e.target,propagatedFrom:e.target},e),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var Ne=be.extend(le);function U(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var wn=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(e){return this.clone()._add(B(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(B(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new U(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new U(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=wn(this.x),this.y=wn(this.y),this},distanceTo:function(e){e=B(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=B(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=B(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function B(e,t,i){return e instanceof U?e:N(e)?new U(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new U(e.x,e.y):new U(e,t,i)}function te(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}te.prototype={extend:function(e){var t,i;if(!e)return this;if(e instanceof U||typeof e[0]=="number"||"x"in e)t=i=B(e);else if(e=me(e),t=e.min,i=e.max,!t||!i)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=i.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(e){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return typeof e[0]=="number"||e instanceof U?e=B(e):e=me(e),e instanceof te?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=me(e);var t=this.min,i=this.max,n=e.min,r=e.max,u=r.x>=t.x&&n.x<=i.x,f=r.y>=t.y&&n.y<=i.y;return u&&f},overlaps:function(e){e=me(e);var t=this.min,i=this.max,n=e.min,r=e.max,u=r.x>t.x&&n.x<i.x,f=r.y>t.y&&n.y<i.y;return u&&f},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,i=this.max,n=Math.abs(t.x-i.x)*e,r=Math.abs(t.y-i.y)*e;return me(B(t.x-n,t.y-r),B(i.x+n,i.y+r))},equals:function(e){return e?(e=me(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function me(e,t){return!e||e instanceof te?e:new te(e,t)}function ge(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}ge.prototype={extend:function(e){var t=this._southWest,i=this._northEast,n,r;if(e instanceof Y)n=e,r=e;else if(e instanceof ge){if(n=e._southWest,r=e._northEast,!n||!r)return this}else return e?this.extend(G(e)||se(e)):this;return!t&&!i?(this._southWest=new Y(n.lat,n.lng),this._northEast=new Y(r.lat,r.lng)):(t.lat=Math.min(n.lat,t.lat),t.lng=Math.min(n.lng,t.lng),i.lat=Math.max(r.lat,i.lat),i.lng=Math.max(r.lng,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new ge(new Y(t.lat-n,t.lng-r),new Y(i.lat+n,i.lng+r))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof Y||"lat"in e?e=G(e):e=se(e);var t=this._southWest,i=this._northEast,n,r;return e instanceof ge?(n=e.getSouthWest(),r=e.getNorthEast()):n=r=e,n.lat>=t.lat&&r.lat<=i.lat&&n.lng>=t.lng&&r.lng<=i.lng},intersects:function(e){e=se(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),u=r.lat>=t.lat&&n.lat<=i.lat,f=r.lng>=t.lng&&n.lng<=i.lng;return u&&f},overlaps:function(e){e=se(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),u=r.lat>t.lat&&n.lat<i.lat,f=r.lng>t.lng&&n.lng<i.lng;return u&&f},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=se(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(e,t){return e instanceof ge?e:new ge(e,t)}function Y(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,i!==void 0&&(this.alt=+i)}Y.prototype={equals:function(e,t){if(!e)return!1;e=G(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+O(this.lat,e)+", "+O(this.lng,e)+")"},distanceTo:function(e){return Ze.distance(this,G(e))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return se([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function G(e,t,i){return e instanceof Y?e:N(e)&&typeof e[0]!="object"?e.length===3?new Y(e[0],e[1],e[2]):e.length===2?new Y(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new Y(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new Y(e,t,i)}var ze={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e),n=this.transformation.transform(t.min,i),r=this.transformation.transform(t.max,i);return new te(n,r)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?y(e.lng,this.wrapLng,!0):e.lng,i=this.wrapLat?y(e.lat,this.wrapLat,!0):e.lat,n=e.alt;return new Y(i,t,n)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,r=t.lng-i.lng;if(n===0&&r===0)return e;var u=e.getSouthWest(),f=e.getNorthEast(),g=new Y(u.lat-n,u.lng-r),b=new Y(f.lat-n,f.lng-r);return new ge(g,b)}},Ze=c({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,u=Math.sin((t.lat-e.lat)*i/2),f=Math.sin((t.lng-e.lng)*i/2),g=u*u+Math.cos(n)*Math.cos(r)*f*f,b=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return this.R*b}}),xn=6378137,yi={R:xn,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=Math.sin(n*t);return new U(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new Y((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=xn*Math.PI;return new te([-e,-e],[e,e])}()};function wi(e,t,i,n){if(N(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=i,this._d=n}wi.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new U((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function vt(e,t,i,n){return new wi(e,t,i,n)}var xi=c({},Ze,{code:"EPSG:3857",projection:yi,transformation:function(){var e=.5/(Math.PI*yi.R);return vt(e,.5,-e,.5)}()}),Ns=c({},xi,{code:"EPSG:900913"});function Pn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ln(e,t){var i="",n,r,u,f,g,b;for(n=0,u=e.length;n<u;n++){for(g=e[n],r=0,f=g.length;r<f;r++)b=g[r],i+=(r?"L":"M")+b.x+" "+b.y;i+=t?R.svg?"z":"x":""}return i||"M0 0"}var Pi=document.documentElement.style,Bt="ActiveXObject"in window,zs=Bt&&!document.addEventListener,Tn="msLaunchUri"in navigator&&!("documentMode"in document),Li=ke("webkit"),En=ke("android"),Sn=ke("android 2")||ke("android 3"),Is=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bs=En&&ke("Google")&&Is<537&&!("AudioNode"in window),Ti=!!window.opera,Cn=!Tn&&ke("chrome"),kn=ke("gecko")&&!Li&&!Ti&&!Bt,Us=!Cn&&ke("safari"),An=ke("phantom"),jn="OTransition"in Pi,Ds=navigator.platform.indexOf("Win")===0,Mn=Bt&&"transition"in Pi,Ei="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sn,On="MozPerspective"in Pi,Zs=!window.L_DISABLE_3D&&(Mn||Ei||On)&&!jn&&!An,bt=typeof orientation<"u"||ke("mobile"),Fs=bt&&Li,Hs=bt&&Ei,Rn=!window.PointerEvent&&window.MSPointerEvent,Nn=!!(window.PointerEvent||Rn),zn="ontouchstart"in window||!!window.TouchEvent,qs=!window.L_NO_TOUCH&&(zn||Nn),Ws=bt&&Ti,Vs=bt&&kn,$s=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gs=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",P,t),window.removeEventListener("testPassiveEventSupport",P,t)}catch{}return e}(),Js=function(){return!!document.createElement("canvas").getContext}(),Si=!!(document.createElementNS&&Pn("svg").createSVGRect),Ks=!!Si&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Xs=!Si&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),Ys=navigator.platform.indexOf("Mac")===0,Qs=navigator.platform.indexOf("Linux")===0;function ke(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var R={ie:Bt,ielt9:zs,edge:Tn,webkit:Li,android:En,android23:Sn,androidStock:Bs,opera:Ti,chrome:Cn,gecko:kn,safari:Us,phantom:An,opera12:jn,win:Ds,ie3d:Mn,webkit3d:Ei,gecko3d:On,any3d:Zs,mobile:bt,mobileWebkit:Fs,mobileWebkit3d:Hs,msPointer:Rn,pointer:Nn,touch:qs,touchNative:zn,mobileOpera:Ws,mobileGecko:Vs,retina:$s,passiveEvents:Gs,canvas:Js,svg:Si,vml:Xs,inlineSvg:Ks,mac:Ys,linux:Qs},In=R.msPointer?"MSPointerDown":"pointerdown",Bn=R.msPointer?"MSPointerMove":"pointermove",Un=R.msPointer?"MSPointerUp":"pointerup",Dn=R.msPointer?"MSPointerCancel":"pointercancel",Ci={touchstart:In,touchmove:Bn,touchend:Un,touchcancel:Dn},Zn={touchstart:sa,touchmove:Ut,touchend:Ut,touchcancel:Ut},ot={},Fn=!1;function ea(e,t,i){return t==="touchstart"&&oa(),Zn[t]?(i=Zn[t].bind(this,i),e.addEventListener(Ci[t],i,!1),i):(console.warn("wrong event specified:",t),P)}function ta(e,t,i){if(!Ci[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(Ci[t],i,!1)}function ia(e){ot[e.pointerId]=e}function na(e){ot[e.pointerId]&&(ot[e.pointerId]=e)}function Hn(e){delete ot[e.pointerId]}function oa(){Fn||(document.addEventListener(In,ia,!0),document.addEventListener(Bn,na,!0),document.addEventListener(Un,Hn,!0),document.addEventListener(Dn,Hn,!0),Fn=!0)}function Ut(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var i in ot)t.touches.push(ot[i]);t.changedTouches=[t],e(t)}}function sa(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&he(t),Ut(e,t)}function aa(e){var t={},i,n;for(n in e)i=e[n],t[n]=i&&i.bind?i.bind(e):i;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var ra=200;function la(e,t){e.addEventListener("dblclick",t);var i=0,n;function r(u){if(u.detail!==1){n=u.detail;return}if(!(u.pointerType==="mouse"||u.sourceCapabilities&&!u.sourceCapabilities.firesTouchEvents)){var f=Gn(u);if(!(f.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!f.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var g=Date.now();g-i<=ra?(n++,n===2&&t(aa(u))):n=1,i=g}}}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function ca(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var ki=Ft(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yt=Ft(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qn=yt==="webkitTransition"||yt==="OTransition"?yt+"End":"transitionend";function Wn(e){return typeof e=="string"?document.getElementById(e):e}function wt(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return i==="auto"?null:i}function K(e,t,i){var n=document.createElement(e);return n.className=t||"",i&&i.appendChild(n),n}function ie(e){var t=e.parentNode;t&&t.removeChild(e)}function Dt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function st(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function at(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Ai(e,t){if(e.classList!==void 0)return e.classList.contains(t);var i=Zt(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function F(e,t){if(e.classList!==void 0)for(var i=S(t),n=0,r=i.length;n<r;n++)e.classList.add(i[n]);else if(!Ai(e,t)){var u=Zt(e);ji(e,(u?u+" ":"")+t)}}function ne(e,t){e.classList!==void 0?e.classList.remove(t):ji(e,E((" "+Zt(e)+" ").replace(" "+t+" "," ")))}function ji(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Zt(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function we(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&ua(e,t)}function ua(e,t){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch{if(t===1)return}t=Math.round(t*100),i?(i.Enabled=t!==100,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}function Ft(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function Ve(e,t,i){var n=t||new U(0,0);e.style[ki]=(R.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ae(e,t){e._leaflet_pos=t,R.any3d?Ve(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function $e(e){return e._leaflet_pos||new U(0,0)}var xt,Pt,Mi;if("onselectstart"in document)xt=function(){D(window,"selectstart",he)},Pt=function(){ee(window,"selectstart",he)};else{var Lt=Ft(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xt=function(){if(Lt){var e=document.documentElement.style;Mi=e[Lt],e[Lt]="none"}},Pt=function(){Lt&&(document.documentElement.style[Lt]=Mi,Mi=void 0)}}function Oi(){D(window,"dragstart",he)}function Ri(){ee(window,"dragstart",he)}var Ht,Ni;function zi(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(qt(),Ht=e,Ni=e.style.outlineStyle,e.style.outlineStyle="none",D(window,"keydown",qt))}function qt(){Ht&&(Ht.style.outlineStyle=Ni,Ht=void 0,Ni=void 0,ee(window,"keydown",qt))}function Vn(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ii(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var ha={__proto__:null,TRANSFORM:ki,TRANSITION:yt,TRANSITION_END:qn,get:Wn,getStyle:wt,create:K,remove:ie,empty:Dt,toFront:st,toBack:at,hasClass:Ai,addClass:F,removeClass:ne,setClass:ji,getClass:Zt,setOpacity:we,testProp:Ft,setTransform:Ve,setPosition:ae,getPosition:$e,get disableTextSelection(){return xt},get enableTextSelection(){return Pt},disableImageDrag:Oi,enableImageDrag:Ri,preventOutline:zi,restoreOutline:qt,getSizedParentNode:Vn,getScale:Ii};function D(e,t,i,n){if(t&&typeof t=="object")for(var r in t)Ui(e,r,t[r],i);else{t=S(t);for(var u=0,f=t.length;u<f;u++)Ui(e,t[u],i,n)}return this}var Ae="_leaflet_events";function ee(e,t,i,n){if(arguments.length===1)$n(e),delete e[Ae];else if(t&&typeof t=="object")for(var r in t)Di(e,r,t[r],i);else if(t=S(t),arguments.length===2)$n(e,function(g){return q(t,g)!==-1});else for(var u=0,f=t.length;u<f;u++)Di(e,t[u],i,n);return this}function $n(e,t){for(var i in e[Ae]){var n=i.split(/\d/)[0];(!t||t(n))&&Di(e,n,null,null,i)}}var Bi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ui(e,t,i,n){var r=t+_(i)+(n?"_"+_(n):"");if(e[Ae]&&e[Ae][r])return this;var u=function(g){return i.call(n||e,g||window.event)},f=u;!R.touchNative&&R.pointer&&t.indexOf("touch")===0?u=ea(e,t,u):R.touch&&t==="dblclick"?u=la(e,u):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(Bi[t]||t,u,R.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(u=function(g){g=g||window.event,Fi(e,g)&&f(g)},e.addEventListener(Bi[t],u,!1)):e.addEventListener(t,f,!1):e.attachEvent("on"+t,u),e[Ae]=e[Ae]||{},e[Ae][r]=u}function Di(e,t,i,n,r){r=r||t+_(i)+(n?"_"+_(n):"");var u=e[Ae]&&e[Ae][r];if(!u)return this;!R.touchNative&&R.pointer&&t.indexOf("touch")===0?ta(e,t,u):R.touch&&t==="dblclick"?ca(e,u):"removeEventListener"in e?e.removeEventListener(Bi[t]||t,u,!1):e.detachEvent("on"+t,u),e[Ae][r]=null}function Ge(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Zi(e){return Ui(e,"wheel",Ge),this}function Tt(e){return D(e,"mousedown touchstart dblclick contextmenu",Ge),e._leaflet_disable_click=!0,this}function he(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Je(e){return he(e),Ge(e),this}function Gn(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function Jn(e,t){if(!t)return new U(e.clientX,e.clientY);var i=Ii(t),n=i.boundingClientRect;return new U((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}var da=R.linux&&R.chrome?window.devicePixelRatio:R.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Kn(e){return R.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/da:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Fi(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e}var pa={__proto__:null,on:D,off:ee,stopPropagation:Ge,disableScrollPropagation:Zi,disableClickPropagation:Tt,preventDefault:he,stop:Je,getPropagationPath:Gn,getMousePosition:Jn,getWheelDelta:Kn,isExternalTarget:Fi,addListener:D,removeListener:ee},Xn=Ne.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=$e(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=this._duration*1e3;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),ae(this._el,i),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),J=Ne.extend({options:{crs:xi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=C(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(G(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yt&&R.any3d&&!R.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),D(this._proxy,qn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(G(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=c({animate:i.animate},i.zoom),i.pan=c({animate:i.animate,duration:i.duration},i.pan));var n=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,i.pan&&i.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),u=e instanceof U?e:this.latLngToContainerPoint(e),f=u.subtract(r).multiplyBy(1-1/n),g=this.containerPointToLatLng(r.add(f));return this.setView(g,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():se(e);var i=B(t.paddingTopLeft||t.padding||[0,0]),n=B(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));if(r=typeof t.maxZoom=="number"?Math.min(t.maxZoom,r):r,r===1/0)return{center:e.getCenter(),zoom:r};var u=n.subtract(i).divideBy(2),f=this.project(e.getSouthWest(),r),g=this.project(e.getNorthEast(),r),b=this.unproject(f.add(g).divideBy(2).add(u),r);return{center:b,zoom:r}},fitBounds:function(e,t){if(e=se(e),!e.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=B(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){F(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(i=i||{},i.animate===!1||!R.any3d)return this.setView(e,t,i);this._stop();var n=this.project(this.getCenter()),r=this.project(e),u=this.getSize(),f=this._zoom;e=G(e),t=t===void 0?f:t;var g=Math.max(u.x,u.y),b=g*this.getZoomScale(f,t),T=r.distanceTo(n)||1,M=1.42,I=M*M;function W(re){var ii=re?-1:1,tr=re?b:g,ir=b*b-g*g+ii*I*I*T*T,nr=2*tr*I*T,Qi=ir/nr,Mo=Math.sqrt(Qi*Qi+1)-Qi,or=Mo<1e-9?-18:Math.log(Mo);return or}function fe(re){return(Math.exp(re)-Math.exp(-re))/2}function ce(re){return(Math.exp(re)+Math.exp(-re))/2}function Pe(re){return fe(re)/ce(re)}var _e=W(0);function dt(re){return g*(ce(_e)/ce(_e+M*re))}function Xa(re){return g*(ce(_e)*Pe(_e+M*re)-fe(_e))/I}function Ya(re){return 1-Math.pow(1-re,1.5)}var Qa=Date.now(),Ao=(W(1)-_e)/M,er=i.duration?1e3*i.duration:1e3*Ao*.8;function jo(){var re=(Date.now()-Qa)/er,ii=Ya(re)*Ao;re<=1?(this._flyToFrame=X(jo,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(Xa(ii)/T)),f),this.getScaleZoom(g/dt(ii),f),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),jo.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=se(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,se(e));return i.equals(n)||this.panTo(n,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var i=B(t.paddingTopLeft||t.padding||[0,0]),n=B(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),u=this.project(e),f=this.getPixelBounds(),g=me([f.min.add(i),f.max.subtract(n)]),b=g.getSize();if(!g.contains(u)){this._enforcingBounds=!0;var T=u.subtract(g.getCenter()),M=g.extend(u).getSize().subtract(b);r.x+=T.x<0?-M.x:M.x,r.y+=T.y<0?-M.y:M.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=c({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=t.divideBy(2).round(),r=i.divideBy(2).round(),u=n.subtract(r);return!u.x&&!u.y?this:(e.animate&&e.pan?this.panBy(u):(e.pan&&this._rawPanBy(u),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=c({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,i=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,i=e.coords.longitude,n=new Y(t,i),r=n.toBounds(e.coords.accuracy*2),u=this._locateOptions;if(u.setView){var f=this.getBoundsZoom(r);this.setView(n,u.maxZoom?Math.min(f,u.maxZoom):f)}var g={latlng:n,bounds:r,timestamp:e.timestamp};for(var b in e.coords)typeof e.coords[b]=="number"&&(g[b]=e.coords[b]);this.fire("locationfound",g)}},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)ie(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),n=K("div",i,t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new ge(t,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=se(e),i=B(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),u=this.getMaxZoom(),f=e.getNorthWest(),g=e.getSouthEast(),b=this.getSize().subtract(i),T=me(this.project(g,n),this.project(f,n)).getSize(),M=R.any3d?this.options.zoomSnap:1,I=b.x/T.x,W=b.y/T.y,fe=t?Math.max(I,W):Math.min(I,W);return n=this.getScaleZoom(fe,n),M&&(n=Math.round(n/(M/100))*(M/100),n=t?Math.ceil(n/M)*M:Math.floor(n/M)*M),Math.max(r,Math.min(u,n))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new te(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=t===void 0?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=t===void 0?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?1/0:n},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(G(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(B(e),t)},layerPointToLatLng:function(e){var t=B(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(G(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(G(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(se(e))},distance:function(e,t){return this.options.crs.distance(G(e),G(t))},containerPointToLayerPoint:function(e){return B(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return B(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(B(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(e)))},mouseEventToContainerPoint:function(e){return Jn(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=Wn(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");D(t,"scroll",this._onScroll,this),this._containerId=_(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&R.any3d,F(e,"leaflet-container"+(R.touch?" leaflet-touch":"")+(R.retina?" leaflet-retina":"")+(R.ielt9?" leaflet-oldie":"")+(R.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=wt(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ae(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(F(e.markerPane,"leaflet-zoom-hide"),F(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,i){ae(this._mapPane,new U(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,i)._move(e,t)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i,n){t===void 0&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),n?i&&i.pinch&&this.fire("zoom",i):((r||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){ae(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[_(this._container)]=this;var t=e?ee:D;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),R.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i=[],n,r=t==="mouseout"||t==="mouseover",u=e.target||e.srcElement,f=!1;u;){if(n=this._targets[_(u)],n&&(t==="click"||t==="preclick")&&this._draggableMoved(n)){f=!0;break}if(n&&n.listens(t,!0)&&(r&&!Fi(u,e)||(i.push(n),r))||u===this._container)break;u=u.parentNode}return!i.length&&!f&&!r&&this.listens(t,!0)&&(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var i=e.type;i==="mousedown"&&zi(t),this._fireDOMEvent(e,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if(e.type==="click"){var n=c({},e);n.type="preclick",this._fireDOMEvent(n,n.type,i)}var r=this._findEventTargets(e,t);if(i){for(var u=[],f=0;f<i.length;f++)i[f].listens(t,!0)&&u.push(i[f]);r=u.concat(r)}if(r.length){t==="contextmenu"&&he(e);var g=r[0],b={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var T=g.getLatLng&&(!g._radius||g._radius<=10);b.containerPoint=T?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(e),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=T?g.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(f=0;f<r.length;f++)if(r[f].fire(t,b,!0),b.originalEvent._stopped||r[f].options.bubblingMouseEvents===!1&&q(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return $e(this._mapPane)||new U(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return me([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),r=this.getSize().divideBy(2),u=new te(n.subtract(r),n.add(r)),f=this._getBoundsOffset(u,i,t);return Math.abs(f.x)<=1&&Math.abs(f.y)<=1?e:this.unproject(n.add(f),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new te(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=me(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),r=n.min.subtract(e.min),u=n.max.subtract(e.max),f=this._rebound(r.x,-u.x),g=this._rebound(r.y,-u.y);return new U(f,g)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=R.any3d?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ne(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=K("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var i=ki,n=this._proxy.style[i];Ve(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Ve(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/n);return i.animate!==!0&&!this.getSize().contains(r)?!1:(X(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,F(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ne(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fa(e,t){return new J(e,t)}var Te=be.extend({options:{position:"topright"},initialize:function(e){C(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return F(t,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(t,n.firstChild):n.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Et=function(e){return new Te(e)};J.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=K("div",t+"control-container",this._container);function n(r,u){var f=t+r+" "+t+u;e[r+u]=K("div",f,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ie(this._controlCorners[e]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yn=Te.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){C(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var n in e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Te.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(_(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){F(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(F(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ne(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ne(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=K("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Tt(t),Zi(t);var n=this._section=K("section",e+"-list");i&&(this._map.on("click",this.collapse,this),D(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=K("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),D(r,{keydown:function(u){u.keyCode===13&&this._expandSafely()},click:function(u){he(u),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=K("div",e+"-base",n),this._separator=K("div",e+"-separator",n),this._overlaysList=K("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&_(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(d(function(n,r){return this.options.sortFunction(n.layer,r.layer,n.name,r.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dt(this._baseLayersList),Dt(this._overlaysList),this._layerControlInputs=[];var e,t,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),t=t||n.overlay,e=e||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(_(e.target)),i=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(e){var t=document.createElement("label"),i=this._map.hasLayer(e.layer),n;e.overlay?(n=document.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=i):n=this._createRadioElement("leaflet-base-layers_"+_(this),i),this._layerControlInputs.push(n),n.layerId=_(e.layer),D(n,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var u=document.createElement("span");t.appendChild(u),u.appendChild(n),u.appendChild(r);var f=e.overlay?this._overlaysList:this._baseLayersList;return f.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,i,n=[],r=[];this._handlingClick=!0;for(var u=e.length-1;u>=0;u--)t=e[u],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||r.push(i);for(u=0;u<r.length;u++)this._map.hasLayer(r[u])&&this._map.removeLayer(r[u]);for(u=0;u<n.length;u++)this._map.hasLayer(n[u])||this._map.addLayer(n[u]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,i,n=this._map.getZoom(),r=e.length-1;r>=0;r--)t=e[r],i=this._getLayer(t.layerId).layer,t.disabled=i.options.minZoom!==void 0&&n<i.options.minZoom||i.options.maxZoom!==void 0&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,D(e,"click",he),this.expand();var t=this;setTimeout(function(){ee(e,"click",he),t._preventClick=!1})}}),ma=function(e,t,i){return new Yn(e,t,i)},Hi=Te.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=K("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,r){var u=K("a",i,n);return u.innerHTML=e,u.href="#",u.title=t,u.setAttribute("role","button"),u.setAttribute("aria-label",t),Tt(u),D(u,"click",Je),D(u,"click",r,this),D(u,"click",this._refocusOnMap,this),u},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ne(this._zoomInButton,t),ne(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(F(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(F(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});J.mergeOptions({zoomControl:!0}),J.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hi,this.addControl(this.zoomControl))});var ga=function(e){return new Hi(e)},Qn=Te.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=K("div",t),n=this.options;return this._addScales(n,t+"-line",i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=K("div",t,i)),e.imperial&&(this._iScale=K("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t=e*3.2808399,i,n,r;t>5280?(i=t/5280,n=this._getRoundNum(i),this._updateScale(this._iScale,n+" mi",n/i)):(r=this._getRoundNum(t),this._updateScale(this._iScale,r+" ft",r/t))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),_a=function(e){return new Qn(e)},va='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qi=Te.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(R.inlineSvg?va+" ":"")+"Leaflet</a>"},initialize:function(e){C(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=K("div","leaflet-control-attribution"),Tt(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});J.mergeOptions({attributionControl:!0}),J.addInitHook(function(){this.options.attributionControl&&new qi().addTo(this)});var ba=function(e){return new qi(e)};Te.Layers=Yn,Te.Zoom=Hi,Te.Scale=Qn,Te.Attribution=qi,Et.layers=ma,Et.zoom=ga,Et.scale=_a,Et.attribution=ba;var je=be.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});je.addTo=function(e,t){return e.addHandler(t,this),this};var ya={Events:le},eo=R.touch?"touchstart mousedown":"mousedown",Fe=Ne.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){C(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(D(this._dragStartTarget,eo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fe._dragging===this&&this.finishDrag(!0),ee(this._dragStartTarget,eo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Ai(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Fe._dragging===this&&this.finishDrag();return}if(!(Fe._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Fe._dragging=this,this._preventOutline&&zi(this._element),Oi(),xt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,i=Vn(this._element);this._startPoint=new U(t.clientX,t.clientY),this._startPos=$e(this._element),this._parentScale=Ii(i);var n=e.type==="mousedown";D(document,n?"mousemove":"touchmove",this._onMove,this),D(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,i=new U(t.clientX,t.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,he(e),this._moved||(this.fire("dragstart"),this._moved=!0,F(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),F(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),ae(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){ne(document.body,"leaflet-dragging"),this._lastTarget&&(ne(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ee(document,"mousemove touchmove",this._onMove,this),ee(document,"mouseup touchend touchcancel",this._onUp,this),Ri(),Pt();var t=this._moved&&this._moving;this._moving=!1,Fe._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function to(e,t,i){var n,r=[1,4,2,8],u,f,g,b,T,M,I,W;for(u=0,M=e.length;u<M;u++)e[u]._code=Ke(e[u],t);for(g=0;g<4;g++){for(I=r[g],n=[],u=0,M=e.length,f=M-1;u<M;f=u++)b=e[u],T=e[f],b._code&I?T._code&I||(W=Wt(T,b,I,t,i),W._code=Ke(W,t),n.push(W)):(T._code&I&&(W=Wt(T,b,I,t,i),W._code=Ke(W,t),n.push(W)),n.push(b));e=n}return e}function io(e,t){var i,n,r,u,f,g,b,T,M;if(!e||e.length===0)throw new Error("latlngs not passed");xe(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var I=G([0,0]),W=se(e),fe=W.getNorthWest().distanceTo(W.getSouthWest())*W.getNorthEast().distanceTo(W.getNorthWest());fe<1700&&(I=Wi(e));var ce=e.length,Pe=[];for(i=0;i<ce;i++){var _e=G(e[i]);Pe.push(t.project(G([_e.lat-I.lat,_e.lng-I.lng])))}for(g=b=T=0,i=0,n=ce-1;i<ce;n=i++)r=Pe[i],u=Pe[n],f=r.y*u.x-u.y*r.x,b+=(r.x+u.x)*f,T+=(r.y+u.y)*f,g+=f*3;g===0?M=Pe[0]:M=[b/g,T/g];var dt=t.unproject(B(M));return G([dt.lat+I.lat,dt.lng+I.lng])}function Wi(e){for(var t=0,i=0,n=0,r=0;r<e.length;r++){var u=G(e[r]);t+=u.lat,i+=u.lng,n++}return G([t/n,i/n])}var wa={__proto__:null,clipPolygon:to,polygonCenter:io,centroid:Wi};function no(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=La(e,i),e=Pa(e,i),e}function oo(e,t,i){return Math.sqrt(St(e,t,i,!0))}function xa(e,t,i){return St(e,t,i)}function Pa(e,t){var i=e.length,n=typeof Uint8Array<"u"?Uint8Array:Array,r=new n(i);r[0]=r[i-1]=1,Vi(e,r,t,0,i-1);var u,f=[];for(u=0;u<i;u++)r[u]&&f.push(e[u]);return f}function Vi(e,t,i,n,r){var u=0,f,g,b;for(g=n+1;g<=r-1;g++)b=St(e[g],e[n],e[r],!0),b>u&&(f=g,u=b);u>i&&(t[f]=1,Vi(e,t,i,n,f),Vi(e,t,i,f,r))}function La(e,t){for(var i=[e[0]],n=1,r=0,u=e.length;n<u;n++)Ta(e[n],e[r])>t&&(i.push(e[n]),r=n);return r<u-1&&i.push(e[u-1]),i}var so;function ao(e,t,i,n,r){var u=n?so:Ke(e,i),f=Ke(t,i),g,b,T;for(so=f;;){if(!(u|f))return[e,t];if(u&f)return!1;g=u||f,b=Wt(e,t,g,i,r),T=Ke(b,i),g===u?(e=b,u=T):(t=b,f=T)}}function Wt(e,t,i,n,r){var u=t.x-e.x,f=t.y-e.y,g=n.min,b=n.max,T,M;return i&8?(T=e.x+u*(b.y-e.y)/f,M=b.y):i&4?(T=e.x+u*(g.y-e.y)/f,M=g.y):i&2?(T=b.x,M=e.y+f*(b.x-e.x)/u):i&1&&(T=g.x,M=e.y+f*(g.x-e.x)/u),new U(T,M,r)}function Ke(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function Ta(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function St(e,t,i,n){var r=t.x,u=t.y,f=i.x-r,g=i.y-u,b=f*f+g*g,T;return b>0&&(T=((e.x-r)*f+(e.y-u)*g)/b,T>1?(r=i.x,u=i.y):T>0&&(r+=f*T,u+=g*T)),f=e.x-r,g=e.y-u,n?f*f+g*g:new U(r,u)}function xe(e){return!N(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function ro(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xe(e)}function lo(e,t){var i,n,r,u,f,g,b,T;if(!e||e.length===0)throw new Error("latlngs not passed");xe(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var M=G([0,0]),I=se(e),W=I.getNorthWest().distanceTo(I.getSouthWest())*I.getNorthEast().distanceTo(I.getNorthWest());W<1700&&(M=Wi(e));var fe=e.length,ce=[];for(i=0;i<fe;i++){var Pe=G(e[i]);ce.push(t.project(G([Pe.lat-M.lat,Pe.lng-M.lng])))}for(i=0,n=0;i<fe-1;i++)n+=ce[i].distanceTo(ce[i+1])/2;if(n===0)T=ce[0];else for(i=0,u=0;i<fe-1;i++)if(f=ce[i],g=ce[i+1],r=f.distanceTo(g),u+=r,u>n){b=(u-n)/r,T=[g.x-b*(g.x-f.x),g.y-b*(g.y-f.y)];break}var _e=t.unproject(B(T));return G([_e.lat+M.lat,_e.lng+M.lng])}var Ea={__proto__:null,simplify:no,pointToSegmentDistance:oo,closestPointOnSegment:xa,clipSegment:ao,_getEdgeIntersection:Wt,_getBitCode:Ke,_sqClosestPointOnSegment:St,isFlat:xe,_flat:ro,polylineCenter:lo},$i={project:function(e){return new U(e.lng,e.lat)},unproject:function(e){return new Y(e.y,e.x)},bounds:new te([-180,-90],[180,90])},Gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,u=Math.sqrt(1-r*r),f=u*Math.sin(n),g=Math.tan(Math.PI/4-n/2)/Math.pow((1-f)/(1+f),u/2);return n=-i*Math.log(Math.max(g,1e-10)),new U(e.lng*t*i,n)},unproject:function(e){for(var t=180/Math.PI,i=this.R,n=this.R_MINOR/i,r=Math.sqrt(1-n*n),u=Math.exp(-e.y/i),f=Math.PI/2-2*Math.atan(u),g=0,b=.1,T;g<15&&Math.abs(b)>1e-7;g++)T=r*Math.sin(f),T=Math.pow((1-T)/(1+T),r/2),b=Math.PI/2-2*Math.atan(u*T)-f,f+=b;return new Y(f*t,e.x*t/i)}},Sa={__proto__:null,LonLat:$i,Mercator:Gi,SphericalMercator:yi},Ca=c({},Ze,{code:"EPSG:3395",projection:Gi,transformation:function(){var e=.5/(Math.PI*Gi.R);return vt(e,.5,-e,.5)}()}),co=c({},Ze,{code:"EPSG:4326",projection:$i,transformation:vt(1/180,1,-1/180,.5)}),ka=c({},ze,{projection:$i,transformation:vt(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:!0});ze.Earth=Ze,ze.EPSG3395=Ca,ze.EPSG3857=xi,ze.EPSG900913=Ns,ze.EPSG4326=co,ze.Simple=ka;var Ee=Ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[_(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[_(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});J.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=_(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=_(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return _(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){e=e?N(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[_(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=_(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;e=r.minZoom===void 0?e:Math.min(e,r.minZoom),t=r.maxZoom===void 0?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rt=Ee.extend({initialize:function(e,t){C(this,t),this._layers={};var i,n;if(e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers)n=this._layers[i],n[e]&&n[e].apply(n,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return _(e)}}),Aa=function(e,t){return new rt(e,t)},Ie=rt.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),rt.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),rt.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ge;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),ja=function(e,t){return new Ie(e,t)},lt=be.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){C(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(n,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),n},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"];typeof n=="number"&&(n=[n,n]);var r=B(n),u=B(t==="shadow"&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),u&&(e.style.marginLeft=-u.x+"px",e.style.marginTop=-u.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return R.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Ma(e){return new lt(e)}var Ct=lt.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Ct.imagePath!="string"&&(Ct.imagePath=this._detectIconPath()),(this.options.imagePath||Ct.imagePath)+lt.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(i,n,r){var u=n.exec(i);return u&&u[r]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=K("div","leaflet-default-icon-path",document.body),t=wt(e,"background-image")||wt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),uo=je.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Fe(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),F(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ne(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,u=$e(t._icon),f=i.getPixelBounds(),g=i.getPixelOrigin(),b=me(f.min._subtract(g).add(r),f.max._subtract(g).subtract(r));if(!b.contains(u)){var T=B((Math.max(b.max.x,u.x)-b.max.x)/(f.max.x-b.max.x)-(Math.min(b.min.x,u.x)-b.min.x)/(f.min.x-b.min.x),(Math.max(b.max.y,u.y)-b.max.y)/(f.max.y-b.max.y)-(Math.min(b.min.y,u.y)-b.min.y)/(f.min.y-b.min.y)).multiplyBy(n);i.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),ae(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=X(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=$e(t._icon),r=t._map.layerPointToLatLng(n);i&&ae(i,n),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Vt=Ee.extend({options:{icon:new Ct,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){C(this,t),this._latlng=G(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=G(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),i.tagName==="IMG"&&(i.alt=e.alt||"")),F(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&D(i,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),u=!1;r!==this._shadow&&(this._removeShadow(),u=!0),r&&(F(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&u&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ee(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&ae(this._icon,e),this._shadow&&ae(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(F(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uo)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uo(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&we(this._icon,e),this._shadow&&we(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,i=t.iconSize?B(t.iconSize):B(0,0),n=t.iconAnchor?B(t.iconAnchor):B(0,0);e.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Oa(e,t){return new Vt(e,t)}var He=Ee.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return C(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$t=He.extend({options:{fill:!0,radius:10},initialize:function(e,t){C(this,t),this._latlng=G(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=G(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return He.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new te(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ra(e,t){return new $t(e,t)}var Ji=$t.extend({initialize:function(e,t,i){if(typeof t=="number"&&(t=c({},i,{radius:t})),C(this,t),this._latlng=G(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:He.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===Ze.distance){var r=Math.PI/180,u=this._mRadius/Ze.R/r,f=i.project([t+u,e]),g=i.project([t-u,e]),b=f.add(g).divideBy(2),T=i.unproject(b).lat,M=Math.acos((Math.cos(u*r)-Math.sin(t*r)*Math.sin(T*r))/(Math.cos(t*r)*Math.cos(T*r)))/r;(isNaN(M)||M===0)&&(M=u/Math.cos(Math.PI/180*t)),this._point=b.subtract(i.getPixelOrigin()),this._radius=isNaN(M)?0:b.x-i.project([T,e-M]).x,this._radiusY=b.y-f.y}else{var I=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(I).x}this._updateBounds()}});function Na(e,t,i){return new Ji(e,t,i)}var Be=He.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){C(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,i=null,n=St,r,u,f=0,g=this._parts.length;f<g;f++)for(var b=this._parts[f],T=1,M=b.length;T<M;T++){r=b[T-1],u=b[T];var I=n(e,r,u,!0);I<t&&(t=I,i=n(e,r,u))}return i&&(i.distance=Math.sqrt(t)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=G(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ge,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return xe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=xe(e),n=0,r=e.length;n<r;n++)i?(t[n]=G(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new U(e,e);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,i){var n=e[0]instanceof Y,r=e.length,u,f;if(n){for(f=[],u=0;u<r;u++)f[u]=this._map.latLngToLayerPoint(e[u]),i.extend(f[u]);t.push(f)}else for(u=0;u<r;u++)this._projectLatlngs(e[u],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,i,n,r,u,f,g,b;for(i=0,r=0,u=this._rings.length;i<u;i++)for(b=this._rings[i],n=0,f=b.length;n<f-1;n++)g=ao(b[n],b[n+1],e,n,!0),g&&(t[r]=t[r]||[],t[r].push(g[0]),(g[1]!==b[n+1]||n===f-2)&&(t[r].push(g[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=no(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,r,u,f,g,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,u=this._parts.length;i<u;i++)for(g=this._parts[i],n=0,f=g.length,r=f-1;n<f;r=n++)if(!(!t&&n===0)&&oo(e,g[r],g[n])<=b)return!0;return!1}});function za(e,t){return new Be(e,t)}Be._flat=ro;var ct=Be.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return io(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Be.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof Y&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){Be.prototype._setLatLngs.call(this,e),xe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new U(t,t);if(e=new te(e.min.subtract(i),e.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var n=0,r=this._rings.length,u;n<r;n++)u=to(this._rings[n],e,!0),u.length&&this._parts.push(u)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,i,n,r,u,f,g,b,T;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(u=0,b=this._parts.length;u<b;u++)for(i=this._parts[u],f=0,T=i.length,g=T-1;f<T;g=f++)n=i[f],r=i[g],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(t=!t);return t||Be.prototype._containsPoint.call(this,e,!0)}});function Ia(e,t){return new ct(e,t)}var Ue=Ie.extend({initialize:function(e,t){C(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=N(e)?e:e.features,i,n,r;if(t){for(i=0,n=t.length;i<n;i++)r=t[i],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var u=this.options;if(u.filter&&!u.filter(e))return this;var f=Gt(e,u);return f?(f.feature=Xt(e),f.defaultOptions=f.options,this.resetStyle(f),u.onEachFeature&&u.onEachFeature(e,f),this.addLayer(f)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=c({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function Gt(e,t){var i=e.type==="Feature"?e.geometry:e,n=i?i.coordinates:null,r=[],u=t&&t.pointToLayer,f=t&&t.coordsToLatLng||Ki,g,b,T,M;if(!n&&!i)return null;switch(i.type){case"Point":return g=f(n),ho(u,e,g,t);case"MultiPoint":for(T=0,M=n.length;T<M;T++)g=f(n[T]),r.push(ho(u,e,g,t));return new Ie(r);case"LineString":case"MultiLineString":return b=Jt(n,i.type==="LineString"?0:1,f),new Be(b,t);case"Polygon":case"MultiPolygon":return b=Jt(n,i.type==="Polygon"?1:2,f),new ct(b,t);case"GeometryCollection":for(T=0,M=i.geometries.length;T<M;T++){var I=Gt({geometry:i.geometries[T],type:"Feature",properties:e.properties},t);I&&r.push(I)}return new Ie(r);case"FeatureCollection":for(T=0,M=i.features.length;T<M;T++){var W=Gt(i.features[T],t);W&&r.push(W)}return new Ie(r);default:throw new Error("Invalid GeoJSON object.")}}function ho(e,t,i,n){return e?e(t,i):new Vt(i,n&&n.markersInheritOptions&&n)}function Ki(e){return new Y(e[1],e[0],e[2])}function Jt(e,t,i){for(var n=[],r=0,u=e.length,f;r<u;r++)f=t?Jt(e[r],t-1,i):(i||Ki)(e[r]),n.push(f);return n}function Xi(e,t){return e=G(e),e.alt!==void 0?[O(e.lng,t),O(e.lat,t),O(e.alt,t)]:[O(e.lng,t),O(e.lat,t)]}function Kt(e,t,i,n){for(var r=[],u=0,f=e.length;u<f;u++)r.push(t?Kt(e[u],xe(e[u])?0:t-1,i,n):Xi(e[u],n));return!t&&i&&r.length>0&&r.push(r[0].slice()),r}function ut(e,t){return e.feature?c({},e.feature,{geometry:t}):Xt(t)}function Xt(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Yi={toGeoJSON:function(e){return ut(this,{type:"Point",coordinates:Xi(this.getLatLng(),e)})}};Vt.include(Yi),Ji.include(Yi),$t.include(Yi),Be.include({toGeoJSON:function(e){var t=!xe(this._latlngs),i=Kt(this._latlngs,t?1:0,!1,e);return ut(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}}),ct.include({toGeoJSON:function(e){var t=!xe(this._latlngs),i=t&&!xe(this._latlngs[0]),n=Kt(this._latlngs,i?2:t?1:0,!0,e);return t||(n=[n]),ut(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),rt.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON(e).geometry.coordinates)}),ut(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var i=t==="GeometryCollection",n=[];return this.eachLayer(function(r){if(r.toGeoJSON){var u=r.toGeoJSON(e);if(i)n.push(u.geometry);else{var f=Xt(u);f.type==="FeatureCollection"?n.push.apply(n,f.features):n.push(f)}}}),i?ut(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});function po(e,t){return new Ue(e,t)}var Ba=po,Yt=Ee.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=se(t),C(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(F(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&st(this._image),this},bringToBack:function(){return this._map&&at(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=se(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:K("img");if(F(t,"leaflet-image-layer"),this._zoomAnimated&&F(t,"leaflet-zoom-animated"),this.options.className&&F(t,this.options.className),t.onselectstart=P,t.onmousemove=P,t.onload=d(this.fire,this,"load"),t.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Ve(this._image,i,t)},_reset:function(){var e=this._image,t=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();ae(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ua=function(e,t,i){return new Yt(e,t,i)},fo=Yt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:K("video");if(F(t,"leaflet-image-layer"),this._zoomAnimated&&F(t,"leaflet-zoom-animated"),this.options.className&&F(t,this.options.className),t.onselectstart=P,t.onmousemove=P,t.onloadeddata=d(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],r=0;r<i.length;r++)n.push(i[r].src);this._url=i.length>0?n:[t.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var u=0;u<this._url.length;u++){var f=K("source");f.src=this._url[u],t.appendChild(f)}}});function Da(e,t,i){return new fo(e,t,i)}var mo=Yt.extend({_initImage:function(){var e=this._image=this._url;F(e,"leaflet-image-layer"),this._zoomAnimated&&F(e,"leaflet-zoom-animated"),this.options.className&&F(e,this.options.className),e.onselectstart=P,e.onmousemove=P}});function Za(e,t,i){return new mo(e,t,i)}var Me=Ee.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof Y||N(e))?(this._latlng=G(e),C(this,t)):(C(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(F(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(d(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(ne(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=G(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&st(this._container),this},bringToBack:function(){return this._map&&at(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Ie){t=null;var i=this._source._layers;for(var n in i)if(i[n]._map){t=i[n];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=B(this.options.offset),i=this._getAnchor();this._zoomAnimated?ae(this._container,e.add(i)):t=t.add(e).add(i);var n=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});J.include({_initOverlay:function(e,t,i,n){var r=t;return r instanceof e||(r=new e(n).setContent(t)),i&&r.setLatLng(i),r}}),Ee.include({_initOverlay:function(e,t,i,n){var r=i;return r instanceof e?(C(r,n),r._source=this):(r=t&&!n?t:new e(n,this),r.setContent(i)),r}});var Qt=Me.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Me.prototype.openOn.call(this,e)},onAdd:function(e){Me.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof He||this._source.on("preclick",Ge))},onRemove:function(e){Me.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof He||this._source.off("preclick",Ge))},getEvents:function(){var e=Me.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=K("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=K("div",e+"-content-wrapper",t);if(this._contentNode=K("div",e+"-content",i),Tt(t),Zi(this._contentNode),D(t,"contextmenu",Ge),this._tipContainer=K("div",e+"-tip-container",t),this._tip=K("div",e+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=K("a",e+"-close-button",t);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',D(n,"click",function(r){he(r),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,r=this.options.maxHeight,u="leaflet-popup-scrolled";r&&n>r?(t.height=r+"px",F(e,u)):ne(e,u),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();ae(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(wt(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,n=this._containerWidth,r=new U(this._containerLeft,-i-this._containerBottom);r._add($e(this._container));var u=e.layerPointToContainerPoint(r),f=B(this.options.autoPanPadding),g=B(this.options.autoPanPaddingTopLeft||f),b=B(this.options.autoPanPaddingBottomRight||f),T=e.getSize(),M=0,I=0;u.x+n+b.x>T.x&&(M=u.x+n-T.x+b.x),u.x-M-g.x<0&&(M=u.x-g.x),u.y+i+b.y>T.y&&(I=u.y+i-T.y+b.y),u.y-I-g.y<0&&(I=u.y-g.y),(M||I)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([M,I]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fa=function(e,t){return new Qt(e,t)};J.mergeOptions({closePopupOnClick:!0}),J.include({openPopup:function(e,t,i){return this._initOverlay(Qt,e,t,i).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Ee.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Qt,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Ie||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Je(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof He)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var ei=Me.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Me.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Me.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Me.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=K("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,n=this._map,r=this._container,u=n.latLngToContainerPoint(n.getCenter()),f=n.layerPointToContainerPoint(e),g=this.options.direction,b=r.offsetWidth,T=r.offsetHeight,M=B(this.options.offset),I=this._getAnchor();g==="top"?(t=b/2,i=T):g==="bottom"?(t=b/2,i=0):g==="center"?(t=b/2,i=T/2):g==="right"?(t=0,i=T/2):g==="left"?(t=b,i=T/2):f.x<u.x?(g="right",t=0,i=T/2):(g="left",t=b+(M.x+I.x)*2,i=T/2),e=e.subtract(B(t,i,!0)).add(M).add(I),ne(r,"leaflet-tooltip-right"),ne(r,"leaflet-tooltip-left"),ne(r,"leaflet-tooltip-top"),ne(r,"leaflet-tooltip-bottom"),F(r,"leaflet-tooltip-"+g),ae(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&we(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ha=function(e,t){return new ei(e,t)};J.include({openTooltip:function(e,t,i){return this._initOverlay(ei,e,t,i).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Ee.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ei,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Ie||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(D(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),D(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,i,n;this._tooltip.options.sticky&&e.originalEvent&&(i=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(i),t=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(t)}});var go=lt.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(Dt(t),t.appendChild(i.html)):t.innerHTML=i.html!==!1?i.html:"",i.bgPos){var n=B(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function qa(e){return new go(e)}lt.Default=Ct;var kt=Ee.extend({options:{tileSize:256,opacity:1,updateWhenIdle:R.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){C(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ie(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(st(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(at(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof U?e:new U(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,i=-e(-1/0,1/0),n=0,r=t.length,u;n<r;n++)u=t[n].style.zIndex,t[n]!==this._container&&u&&(i=e(i,+u));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!R.ielt9){we(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(!(!r.current||!r.loaded)){var u=Math.min(1,(e-r.loaded)/200);we(r.el,u),u<1?t=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(Q(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=K("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(ie(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],r=this._map;return n||(n=this._levels[e]={},n.el=K("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),P(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ie(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var r=Math.floor(e/2),u=Math.floor(t/2),f=i-1,g=new U(+r,+u);g.z=+f;var b=this._tileCoordsToKey(g),T=this._tiles[b];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),f>n?this._retainParent(r,u,f,n):!1)},_retainChildren:function(e,t,i,n){for(var r=2*e;r<2*e+2;r++)for(var u=2*t;u<2*t+2;u++){var f=new U(r,u);f.z=i+1;var g=this._tileCoordsToKey(f),b=this._tiles[g];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);i+1<n&&this._retainChildren(r,u,i+1,n)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var r=Math.round(t);this.options.maxZoom!==void 0&&r>this.options.maxZoom||this.options.minZoom!==void 0&&r<this.options.minZoom?r=void 0:r=this._clampZoom(r);var u=this.options.updateWhenZooming&&r!==this._tileZoom;(!n||u)&&(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),r!==void 0&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),r=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();R.any3d?Ve(e.el,r,n):ae(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),r=t.project(e,this._tileZoom).floor(),u=t.getSize().divideBy(n*2);return new te(r.subtract(u),r.add(u))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var n=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(n),u=r.getCenter(),f=[],g=this.options.keepBuffer,b=new te(r.getBottomLeft().subtract([g,-g]),r.getTopRight().add([g,-g]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var M=this._tiles[T].coords;(M.z!==this._tileZoom||!b.contains(new U(M.x,M.y)))&&(this._tiles[T].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(e,i);return}for(var I=r.min.y;I<=r.max.y;I++)for(var W=r.min.x;W<=r.max.x;W++){var fe=new U(W,I);if(fe.z=this._tileZoom,!!this._isValidTile(fe)){var ce=this._tiles[this._tileCoordsToKey(fe)];ce?ce.current=!0:f.push(fe)}}if(f.sort(function(_e,dt){return _e.distanceTo(u)-dt.distanceTo(u)}),f.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Pe=document.createDocumentFragment();for(W=0;W<f.length;W++)this._addTile(f[W],Pe);this._level.el.appendChild(Pe)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(e);return se(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),r=n.add(i),u=t.unproject(n,e.z),f=t.unproject(r,e.z);return[u,f]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new ge(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new U(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(ie(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){F(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=P,e.onmousemove=P,R.ielt9&&this.options.opacity<1&&we(e,this.options.opacity)},_addTile:function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),r=this.createTile(this._wrapCoords(e),d(this._tileReady,this,e));this._initTile(r),this.createTile.length<2&&X(d(this._tileReady,this,e,null,r)),ae(r,i),this._tiles[n]={el:r,coords:e,current:!0},t.appendChild(r),this.fire("tileloadstart",{tile:r,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var n=this._tileCoordsToKey(e);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(we(i.el,0),Q(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(F(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),R.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new U(this._wrapX?y(e.x,this._wrapX):e.x,this._wrapY?y(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new te(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Wa(e){return new kt(e)}var ht=kt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=C(this,t),t.detectRetina&&R.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return D(i,"load",d(this._tileOnLoad,this,t,i)),D(i,"error",d(this._tileOnError,this,t,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:R.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return A(this._url,c(t,this.options))},_tileOnLoad:function(e,t){R.ielt9?setTimeout(d(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(e=t-e),e+n},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=P,t.onerror=P,!t.complete)){t.src=V;var i=this._tiles[e].coords;ie(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:i})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",V),kt.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(!(!this._map||i&&i.getAttribute("src")===V))return kt.prototype._tileReady.call(this,e,t,i)}});function _o(e,t){return new ht(e,t)}var vo=ht.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=c({},this.defaultWmsParams);for(var n in t)n in this.options||(i[n]=t[n]);t=C(this,t);var r=t.detectRetina&&R.retina?2:1,u=this.getTileSize();i.width=u.x*r,i.height=u.y*r,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,ht.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=me(i.project(t[0]),i.project(t[1])),r=n.min,u=n.max,f=(this._wmsVersion>=1.3&&this._crs===co?[r.y,r.x,u.y,u.x]:[r.x,r.y,u.x,u.y]).join(","),g=ht.prototype.getTileUrl.call(this,e);return g+x(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(e,t){return c(this.wmsParams,e),t||this.redraw(),this}});function Va(e,t){return new vo(e,t)}ht.WMS=vo,_o.wms=Va;var De=Ee.extend({options:{padding:.1},initialize:function(e){C(this,e),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),F(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),u=n.multiplyBy(-i).add(r).subtract(this._map._getNewPixelOrigin(e,t));R.any3d?Ve(this._container,u,i):ae(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new te(i,i.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bo=De.extend({options:{tolerance:0},getEvents:function(){var e=De.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){De.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");D(e,"mousemove",this._onMouseMove,this),D(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),D(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,ie(this._container),ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){De.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=R.retina?2:1;ae(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",R.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){De.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[_(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,n=t.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete e._order,delete this._layers[_(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),i=[],n,r;for(r=0;r<t.length;r++){if(n=Number(t[r]),isNaN(n))return;i.push(n)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,n,r,u,f=e._parts,g=f.length,b=this._ctx;if(g){for(b.beginPath(),i=0;i<g;i++){for(n=0,r=f[i].length;n<r;n++)u=f[i][n],b[n?"lineTo":"moveTo"](u.x,u.y);t&&b.closePath()}this._fillStroke(b,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||n)/n;r!==1&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(t.x,t.y/r,n,0,Math.PI*2,!1),r!==1&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),i,n,r=this._drawFirst;r;r=r.next)i=r.layer,i.options.interactive&&i._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(i))&&(n=i);this._fireEvent(n?[n]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(ne(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,n,r=this._drawFirst;r;r=r.next)i=r.layer,i.options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(F(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;if(i)i.prev=n;else return;n?n.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;if(n)n.next=i;else return;i?i.prev=n:n&&(this._drawLast=n),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function yo(e){return R.canvas?new bo(e):null}var At=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$a={_initContainer:function(){this._container=K("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(De.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=At("shape");F(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=At("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ie(t),e.removeInteractiveTarget(t),delete this._layers[_(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(t||(t=e._stroke=At("stroke")),r.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=N(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(r.removeChild(t),e._stroke=null),n.fill?(i||(i=e._fill=At("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){st(e._container)},_bringToBack:function(e){at(e._container)}},ti=R.vml?At:Pn,jt=De.extend({_initContainer:function(){this._container=ti("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ti("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){De.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),ae(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=ti("path");e.options.className&&F(t,e.options.className),e.options.interactive&&F(t,"leaflet-interactive"),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ie(e._path),e.removeInteractiveTarget(e._path),delete this._layers[_(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Ln(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n=Math.max(Math.round(e._radiusY),1)||i,r="a"+i+","+n+" 0 1,0 ",u=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+r+i*2+",0 "+r+-i*2+",0 ";this._setPath(e,u)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){st(e._path)},_bringToBack:function(e){at(e._path)}});R.vml&&jt.include($a);function wo(e){return R.svg||R.vml?new jt(e):null}J.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&yo(e)||wo(e)}});var xo=ct.extend({initialize:function(e,t){ct.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=se(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ga(e,t){return new xo(e,t)}jt.create=ti,jt.pointsToPath=Ln,Ue.geometryToLayer=Gt,Ue.coordsToLatLng=Ki,Ue.coordsToLatLngs=Jt,Ue.latLngToCoords=Xi,Ue.latLngsToCoords=Kt,Ue.getFeature=ut,Ue.asFeature=Xt,J.mergeOptions({boxZoom:!0});var Po=je.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){D(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xt(),Oi(),this._startPoint=this._map.mouseEventToContainerPoint(e),D(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=K("div","leaflet-zoom-box",this._container),F(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new te(this._point,this._startPoint),i=t.getSize();ae(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ie(this._box),ne(this._container,"leaflet-crosshair")),Pt(),Ri(),ee(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var t=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});J.addInitHook("addHandler","boxZoom",Po),J.mergeOptions({doubleClickZoom:!0});var Lo=je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,r=e.originalEvent.shiftKey?i-n:i+n;t.options.doubleClickZoom==="center"?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});J.addInitHook("addHandler","doubleClickZoom",Lo),J.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var To=je.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Fe(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}F(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ne(this._map._container,"leaflet-grab"),ne(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=se(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,u=(n+t+i)%e-t-i,f=Math.abs(r+i)<Math.abs(u+i)?r:u;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=f},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),n)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),u=(this._lastTime-this._times[0])/1e3,f=i.easeLinearity,g=r.multiplyBy(f/u),b=g.distanceTo([0,0]),T=Math.min(i.inertiaMaxSpeed,b),M=g.multiplyBy(T/b),I=T/(i.inertiaDeceleration*f),W=M.multiplyBy(-I/2).round();!W.x&&!W.y?t.fire("moveend"):(W=t._limitOffset(W,t.options.maxBounds),X(function(){t.panBy(W,{duration:I,easeLinearity:f,noMoveStart:!0,animate:!0})}))}}});J.addInitHook("addHandler","dragging",To),J.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Eo=je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),D(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},i=this.keyCodes,n,r;for(n=0,r=i.left.length;n<r;n++)t[i.left[n]]=[-1*e,0];for(n=0,r=i.right.length;n<r;n++)t[i.right[n]]=[e,0];for(n=0,r=i.down.length;n<r;n++)t[i.down[n]]=[0,e];for(n=0,r=i.up.length;n<r;n++)t[i.up[n]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},i=this.keyCodes,n,r;for(n=0,r=i.zoomIn.length;n<r;n++)t[i.zoomIn[n]]=e;for(n=0,r=i.zoomOut.length;n<r;n++)t[i.zoomOut[n]]=-e},_addHooks:function(){D(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,i=this._map,n;if(t in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(n=this._panKeys[t],e.shiftKey&&(n=B(n).multiplyBy(3)),i.options.maxBounds&&(n=i._limitOffset(B(n),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(n)));i.panTo(r)}else i.panBy(n)}else if(t in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Je(e)}}});J.addInitHook("addHandler","keyboard",Eo),J.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var So=je.extend({addHooks:function(){D(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Kn(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),n),Je(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,u=i?Math.ceil(r/i)*i:r,f=e._limitZoom(t+(this._delta>0?u:-u))-t;this._delta=0,this._startTime=null,f&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+f):e.setZoomAround(this._lastMousePos,t+f))}});J.addInitHook("addHandler","scrollWheelZoom",So);var Ja=600;J.mergeOptions({tapHold:R.touchNative&&R.safari&&R.mobile,tapTolerance:15});var Co=je.extend({addHooks:function(){D(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new U(t.clientX,t.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(D(document,"touchend",he),D(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),Ja),D(document,"touchend touchcancel contextmenu",this._cancel,this),D(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){ee(document,"touchend",he),ee(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),ee(document,"touchend touchcancel contextmenu",this._cancel,this),ee(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new U(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var i=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});i._simulated=!0,t.target.dispatchEvent(i)}});J.addInitHook("addHandler","tapHold",Co),J.mergeOptions({touchZoom:R.touch,bounceAtZoomLimits:!0});var ko=je.extend({addHooks:function(){F(this._map._container,"leaflet-touch-zoom"),D(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ne(this._map._container,"leaflet-touch-zoom"),ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),D(document,"touchmove",this._onTouchMove,this),D(document,"touchend touchcancel",this._onTouchEnd,this),he(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),r=i.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(r,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&r>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,r===1)return}else{var u=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(r===1&&u.x===0&&u.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(u),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var f=d(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(f,this,!0),he(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),ee(document,"touchmove",this._onTouchMove,this),ee(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});J.addInitHook("addHandler","touchZoom",ko),J.BoxZoom=Po,J.DoubleClickZoom=Lo,J.Drag=To,J.Keyboard=Eo,J.ScrollWheelZoom=So,J.TapHold=Co,J.TouchZoom=ko,a.Bounds=te,a.Browser=R,a.CRS=ze,a.Canvas=bo,a.Circle=Ji,a.CircleMarker=$t,a.Class=be,a.Control=Te,a.DivIcon=go,a.DivOverlay=Me,a.DomEvent=pa,a.DomUtil=ha,a.Draggable=Fe,a.Evented=Ne,a.FeatureGroup=Ie,a.GeoJSON=Ue,a.GridLayer=kt,a.Handler=je,a.Icon=lt,a.ImageOverlay=Yt,a.LatLng=Y,a.LatLngBounds=ge,a.Layer=Ee,a.LayerGroup=rt,a.LineUtil=Ea,a.Map=J,a.Marker=Vt,a.Mixin=ya,a.Path=He,a.Point=U,a.PolyUtil=wa,a.Polygon=ct,a.Polyline=Be,a.Popup=Qt,a.PosAnimation=Xn,a.Projection=Sa,a.Rectangle=xo,a.Renderer=De,a.SVG=jt,a.SVGOverlay=mo,a.TileLayer=ht,a.Tooltip=ei,a.Transformation=wi,a.Util=qe,a.VideoOverlay=fo,a.bind=d,a.bounds=me,a.canvas=yo,a.circle=Na,a.circleMarker=Ra,a.control=Et,a.divIcon=qa,a.extend=c,a.featureGroup=ja,a.geoJSON=po,a.geoJson=Ba,a.gridLayer=Wa,a.icon=Ma,a.imageOverlay=Ua,a.latLng=G,a.latLngBounds=se,a.layerGroup=Aa,a.map=fa,a.marker=Oa,a.point=B,a.polygon=Ia,a.polyline=za,a.popup=Fa,a.rectangle=Ga,a.setOptions=C,a.stamp=_,a.svg=wo,a.svgOverlay=Za,a.tileLayer=_o,a.tooltip=Ha,a.transformation=vt,a.version=l,a.videoOverlay=Da;var Ka=window.L;a.noConflict=function(){return window.L=Ka,this},window.L=a})})(rn,rn.exports);var di=rn.exports;const pi=rr(di);function rs(o,s,a){return Object.freeze({instance:o,context:s,container:a})}function ls(o,s){return s==null?function(l,c){const p=k.useRef();return p.current||(p.current=o(l,c)),p}:function(l,c){const p=k.useRef();p.current||(p.current=o(l,c));const d=k.useRef(l),{instance:m}=p.current;return k.useEffect(function(){d.current!==l&&(s(m,l,d.current),d.current=l)},[m,l,c]),p}}function cs(o,s){k.useEffect(function(){return(s.layerContainer??s.map).addLayer(o.instance),function(){var p;(p=s.layerContainer)==null||p.removeLayer(o.instance),s.map.removeLayer(o.instance)}},[s,o])}function Ur(o){return function(a){const l=gn(),c=o(_n(a,l),l);return Or(l.map,a.attribution),as(c.current,a.eventHandlers),cs(c.current,l),c}}function Dr(o,s){const a=k.useRef();k.useEffect(function(){if(s.pathOptions!==a.current){const c=s.pathOptions??{};o.instance.setStyle(c),a.current=c}},[o,s])}function Zr(o){return function(a){const l=gn(),c=o(_n(a,l),l);return as(c.current,a.eventHandlers),cs(c.current,l),Dr(c.current,a),c}}function Fr(o,s){const a=ls(o,s),l=Zr(a);return Ir(l)}function Hr(o,s){const a=ls(o,s),l=Ur(a);return Br(l)}function qr(o,s,a){const{opacity:l,zIndex:c}=s;l!=null&&l!==a.opacity&&o.setOpacity(l),c!=null&&c!==a.zIndex&&o.setZIndex(c)}function Wr(){return gn().map}const Vr=Fr(function({data:s,...a},l){const c=new di.GeoJSON(s,a);return rs(c,zr(l,{overlayContainer:c}))},function(s,a,l){a.style!==l.style&&(a.style==null?s.resetStyle():s.setStyle(a.style))});function ln(){return ln=Object.assign||function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o},ln.apply(this,arguments)}function $r({bounds:o,boundsOptions:s,center:a,children:l,className:c,id:p,placeholder:d,style:m,whenReady:_,zoom:v,...y},P){const[O]=k.useState({className:c,id:p,style:m}),[E,S]=k.useState(null);k.useImperativeHandle(P,()=>(E==null?void 0:E.map)??null,[E]);const C=k.useCallback(j=>{if(j!==null&&E===null){const A=new di.Map(j,y);a!=null&&v!=null?A.setView(a,v):o!=null&&A.fitBounds(o,s),_!=null&&A.whenReady(_),S(Nr(A))}},[]);k.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const x=E?Rt.createElement(ss,{value:E},l):d??null;return Rt.createElement("div",ln({},O,{ref:C}),x)}const Gr=k.forwardRef($r),Jr=Hr(function({url:s,...a},l){const c=new di.TileLayer(s,_n(a,l));return rs(c,l)},function(s,a,l){qr(s,a,l);const{url:c}=a;c!=null&&c!==l.url&&s.setUrl(c)}),Kr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Xr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",Yr=pi.icon({iconUrl:Kr,shadowUrl:Xr,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});pi.Marker.prototype.options.icon=Yr;const $={school:{icon:"🏫",color:"#ff0000"},college:{icon:"🎓",color:"#ff0000"},university:{icon:"🎓",color:"#ff0000"},library:{icon:"📚",color:"#995500"},museum:{icon:"🏛️",color:"#995500"},historic:{icon:"🏛️",color:"#995500"},archaeological_site:{icon:"🏺",color:"#995500"},monument:{icon:"🗿",color:"#995500"},memorial:{icon:"🪦",color:"#995500"},castle:{icon:"🏰",color:"#995500"},ruins:{icon:"🏚️",color:"#995500"},park:{icon:"🌳",color:"#00aa00"},garden:{icon:"🌷",color:"#00aa00"},forest:{icon:"🌲",color:"#00aa00"},nature_reserve:{icon:"🌿",color:"#00aa00"},water:{icon:"💧",color:"#0099ff"},river:{icon:"🏞️",color:"#0099ff"},lake:{icon:"🏞️",color:"#0099ff"},reservoir:{icon:"💦",color:"#0099ff"},winery:{icon:"🍷",color:"#722F37"},vineyard:{icon:"🍇",color:"#722F37"},restaurant:{icon:"🍽️",color:"#ff7800"},cafe:{icon:"☕",color:"#ff7800"},bar:{icon:"🍺",color:"#ff7800"},hotel:{icon:"🏨",color:"#ff7800"},guest_house:{icon:"🏠",color:"#ff7800"},hostel:{icon:"🛏️",color:"#ff7800"},campsite:{icon:"⛺",color:"#ff7800"},information:{icon:"ℹ️",color:"#ff7800"},viewpoint:{icon:"🔭",color:"#ff7800"},picnic_site:{icon:"🧺",color:"#ff7800"},building:{icon:"🏢",color:"#999999"},residential:{icon:"🏘️",color:"#999999"},commercial:{icon:"🏬",color:"#999999"},industrial:{icon:"🏭",color:"#999999"},default:{icon:"📍",color:"#3388ff"}},zo=o=>o?o.amenity==="school"?$.school:o.amenity==="college"?$.college:o.amenity==="university"?$.university:o.amenity==="library"?$.library:o.amenity==="museum"?$.museum:o.amenity==="restaurant"?$.restaurant:o.amenity==="cafe"?$.cafe:o.amenity==="bar"?$.bar:o.amenity==="winery"?$.winery:o.tourism==="hotel"?$.hotel:o.tourism==="guest_house"?$.guest_house:o.tourism==="hostel"?$.hostel:o.tourism==="information"?$.information:o.tourism==="viewpoint"?$.viewpoint:o.tourism==="picnic_site"?$.picnic_site:o.tourism==="museum"?$.museum:o.tourism==="camp_site"?$.campsite:o.historic?$[o.historic]||$.historic:o.leisure==="park"?$.park:o.leisure==="garden"?$.garden:o.leisure==="nature_reserve"?$.nature_reserve:o.natural==="water"?$.water:o.water==="river"?$.river:o.water==="lake"?$.lake:o.water==="reservoir"?$.reservoir:o.craft==="winery"||o.amenity==="winery"?$.winery:o.landuse==="vineyard"?$.vineyard:o.landuse==="forest"?$.forest:o.building==="yes"?$.building:o.building==="residential"?$.residential:o.building==="commercial"?$.commercial:o.building==="industrial"?$.industrial:$.default:$.default,Qr=({geojsonData:o})=>{const s=Wr();return k.useEffect(()=>{if(o&&o.features&&o.features.length>0)try{const l=pi.geoJSON(o).getBounds();l.isValid()&&s.fitBounds(l,{padding:[50,50]})}catch(a){console.error("Error setting map bounds:",a)}},[o,s]),null},el=({geojsonData:o,center:s=[38.569,-8.8],zoom:a=12,height:l="600px",showPopups:c=!0,onFeatureClick:p=null,style:d={},mapStyle:m="streets"})=>{const[_,v]=k.useState(null),y=k.useRef(null),O=(()=>{switch(m){case"satellite":return{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"};case"terrain":return{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'};case"dark":return{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'};case"streets":default:return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}})(),E=x=>{const j={weight:2,opacity:.8,color:"#3388ff",dashArray:"",fillOpacity:.4,fillColor:"#3388ff"};if(m==="dark"?(j.opacity=1,j.fillOpacity=.6,j.weight=3):m==="satellite"&&(j.opacity=1,j.fillOpacity=.5,j.weight=3,j.color="#ffffff"),x.properties){const{color:A}=zo(x.properties);if(x.properties.amenity==="school")return{...j,fillColor:A,color:m==="dark"?"#ff6666":"#800000"};if(x.properties.leisure==="park"||x.properties.landuse==="forest")return{...j,fillColor:A,color:m==="dark"?"#66ff66":"#006600"};if(x.properties.historic)return{...j,fillColor:A,color:m==="dark"?"#ffaa66":"#663300"};if(x.properties.natural==="water")return{...j,fillColor:A,color:m==="dark"?"#66aaff":"#0066cc"};if(x.properties.building)return{...j,fillColor:A,color:m==="dark"?"#aaaaaa":"#666666",weight:m==="dark"?2:1};if(x.properties.highway)return{...j,weight:x.properties.highway==="primary"?5:x.properties.highway==="secondary"?4:x.properties.highway==="tertiary"?3:2,color:m==="dark"?"#dddddd":"#ffffff",opacity:.9};if(x.properties.craft==="winery"||x.properties.amenity==="winery")return{...j,fillColor:A,color:m==="dark"?"#ff99aa":"#4A1D24"}}return j},S=(x,j)=>{const{color:A}=zo(x.properties),N={radius:8,fillColor:A,color:"#000",weight:1,opacity:1,fillOpacity:.8};return m==="dark"?(N.color="#fff",N.weight=2,N.fillOpacity=.9):m==="satellite"&&(N.color="#fff",N.weight=2,N.radius=9,N.fillOpacity=.9),pi.circleMarker(j,N)},C=(x,j)=>{if(x.properties){x.properties.name&&j.bindTooltip(`<div class="feature-tooltip">${x.properties.name}</div>`,{permanent:!1,direction:"top",className:"feature-tooltip-container",offset:[0,-10]});const N=Object.entries(x.properties).filter(([q])=>!q.startsWith("osm_")&&q!=="building"&&q!=="highway").sort(([q],[V])=>q==="name"?-1:V==="name"?1:q.localeCompare(V)).map(([q,V])=>`<strong>${q}:</strong> ${V}`).join("<br/>");N&&c&&j.bindPopup(`<div class="custom-popup-content">${N}</div>`,{maxWidth:300,className:"custom-popup"}),p&&j.on("click",q=>{q.originalEvent.stopPropagation(),p(x,q)})}};return k.useEffect(()=>{if(_&&y.current&&(y.current.clearLayers(),o&&o.features&&o.features.length>0))try{y.current.addData(o),console.log(`Rendered ${o.features.length} features on the map`)}catch(x){console.error("Error adding GeoJSON data to map:",x)}},[o,_]),k.useEffect(()=>{_&&y.current&&_.invalidateSize()},[o,_]),h.jsxs(Gr,{center:s,zoom:a,style:{height:l,...d},whenCreated:v,className:`custom-map-container map-${m}`,children:[h.jsx(Jr,{attribution:O.attribution,url:O.url}),o&&h.jsx(Vr,{data:o,style:E,pointToLayer:S,onEachFeature:C,ref:y},JSON.stringify(o)),h.jsx(Qr,{geojsonData:o})]})};function us(o,s){return function(){return o.apply(s,arguments)}}const{toString:tl}=Object.prototype,{getPrototypeOf:vn}=Object,fi=(o=>s=>{const a=tl.call(s);return o[a]||(o[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ce=o=>(o=o.toLowerCase(),s=>fi(s)===o),mi=o=>s=>typeof s===o,{isArray:gt}=Array,Nt=mi("undefined");function il(o){return o!==null&&!Nt(o)&&o.constructor!==null&&!Nt(o.constructor)&&ye(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const hs=Ce("ArrayBuffer");function nl(o){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(o):s=o&&o.buffer&&hs(o.buffer),s}const ol=mi("string"),ye=mi("function"),ds=mi("number"),gi=o=>o!==null&&typeof o=="object",sl=o=>o===!0||o===!1,oi=o=>{if(fi(o)!=="object")return!1;const s=vn(o);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},al=Ce("Date"),rl=Ce("File"),ll=Ce("Blob"),cl=Ce("FileList"),ul=o=>gi(o)&&ye(o.pipe),hl=o=>{let s;return o&&(typeof FormData=="function"&&o instanceof FormData||ye(o.append)&&((s=fi(o))==="formdata"||s==="object"&&ye(o.toString)&&o.toString()==="[object FormData]"))},dl=Ce("URLSearchParams"),[pl,fl,ml,gl]=["ReadableStream","Request","Response","Headers"].map(Ce),_l=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zt(o,s,{allOwnKeys:a=!1}={}){if(o===null||typeof o>"u")return;let l,c;if(typeof o!="object"&&(o=[o]),gt(o))for(l=0,c=o.length;l<c;l++)s.call(null,o[l],l,o);else{const p=a?Object.getOwnPropertyNames(o):Object.keys(o),d=p.length;let m;for(l=0;l<d;l++)m=p[l],s.call(null,o[m],m,o)}}function ps(o,s){s=s.toLowerCase();const a=Object.keys(o);let l=a.length,c;for(;l-- >0;)if(c=a[l],s===c.toLowerCase())return c;return null}const et=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fs=o=>!Nt(o)&&o!==et;function cn(){const{caseless:o}=fs(this)&&this||{},s={},a=(l,c)=>{const p=o&&ps(s,c)||c;oi(s[p])&&oi(l)?s[p]=cn(s[p],l):oi(l)?s[p]=cn({},l):gt(l)?s[p]=l.slice():s[p]=l};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&zt(arguments[l],a);return s}const vl=(o,s,a,{allOwnKeys:l}={})=>(zt(s,(c,p)=>{a&&ye(c)?o[p]=us(c,a):o[p]=c},{allOwnKeys:l}),o),bl=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),yl=(o,s,a,l)=>{o.prototype=Object.create(s.prototype,l),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:s.prototype}),a&&Object.assign(o.prototype,a)},wl=(o,s,a,l)=>{let c,p,d;const m={};if(s=s||{},o==null)return s;do{for(c=Object.getOwnPropertyNames(o),p=c.length;p-- >0;)d=c[p],(!l||l(d,o,s))&&!m[d]&&(s[d]=o[d],m[d]=!0);o=a!==!1&&vn(o)}while(o&&(!a||a(o,s))&&o!==Object.prototype);return s},xl=(o,s,a)=>{o=String(o),(a===void 0||a>o.length)&&(a=o.length),a-=s.length;const l=o.indexOf(s,a);return l!==-1&&l===a},Pl=o=>{if(!o)return null;if(gt(o))return o;let s=o.length;if(!ds(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=o[s];return a},Ll=(o=>s=>o&&s instanceof o)(typeof Uint8Array<"u"&&vn(Uint8Array)),Tl=(o,s)=>{const l=(o&&o[Symbol.iterator]).call(o);let c;for(;(c=l.next())&&!c.done;){const p=c.value;s.call(o,p[0],p[1])}},El=(o,s)=>{let a;const l=[];for(;(a=o.exec(s))!==null;)l.push(a);return l},Sl=Ce("HTMLFormElement"),Cl=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,l,c){return l.toUpperCase()+c}),Io=(({hasOwnProperty:o})=>(s,a)=>o.call(s,a))(Object.prototype),kl=Ce("RegExp"),ms=(o,s)=>{const a=Object.getOwnPropertyDescriptors(o),l={};zt(a,(c,p)=>{let d;(d=s(c,p,o))!==!1&&(l[p]=d||c)}),Object.defineProperties(o,l)},Al=o=>{ms(o,(s,a)=>{if(ye(o)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const l=o[a];if(ye(l)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},jl=(o,s)=>{const a={},l=c=>{c.forEach(p=>{a[p]=!0})};return gt(o)?l(o):l(String(o).split(s)),a},Ml=()=>{},Ol=(o,s)=>o!=null&&Number.isFinite(o=+o)?o:s;function Rl(o){return!!(o&&ye(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const Nl=o=>{const s=new Array(10),a=(l,c)=>{if(gi(l)){if(s.indexOf(l)>=0)return;if(!("toJSON"in l)){s[c]=l;const p=gt(l)?[]:{};return zt(l,(d,m)=>{const _=a(d,c+1);!Nt(_)&&(p[m]=_)}),s[c]=void 0,p}}return l};return a(o,0)},zl=Ce("AsyncFunction"),Il=o=>o&&(gi(o)||ye(o))&&ye(o.then)&&ye(o.catch),gs=((o,s)=>o?setImmediate:s?((a,l)=>(et.addEventListener("message",({source:c,data:p})=>{c===et&&p===a&&l.length&&l.shift()()},!1),c=>{l.push(c),et.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ye(et.postMessage)),Bl=typeof queueMicrotask<"u"?queueMicrotask.bind(et):typeof process<"u"&&process.nextTick||gs,w={isArray:gt,isArrayBuffer:hs,isBuffer:il,isFormData:hl,isArrayBufferView:nl,isString:ol,isNumber:ds,isBoolean:sl,isObject:gi,isPlainObject:oi,isReadableStream:pl,isRequest:fl,isResponse:ml,isHeaders:gl,isUndefined:Nt,isDate:al,isFile:rl,isBlob:ll,isRegExp:kl,isFunction:ye,isStream:ul,isURLSearchParams:dl,isTypedArray:Ll,isFileList:cl,forEach:zt,merge:cn,extend:vl,trim:_l,stripBOM:bl,inherits:yl,toFlatObject:wl,kindOf:fi,kindOfTest:Ce,endsWith:xl,toArray:Pl,forEachEntry:Tl,matchAll:El,isHTMLForm:Sl,hasOwnProperty:Io,hasOwnProp:Io,reduceDescriptors:ms,freezeMethods:Al,toObjectSet:jl,toCamelCase:Cl,noop:Ml,toFiniteNumber:Ol,findKey:ps,global:et,isContextDefined:fs,isSpecCompliantForm:Rl,toJSONObject:Nl,isAsyncFn:zl,isThenable:Il,setImmediate:gs,asap:Bl};function Z(o,s,a,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}w.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});const _s=Z.prototype,vs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{vs[o]={value:o}});Object.defineProperties(Z,vs);Object.defineProperty(_s,"isAxiosError",{value:!0});Z.from=(o,s,a,l,c,p)=>{const d=Object.create(_s);return w.toFlatObject(o,d,function(_){return _!==Error.prototype},m=>m!=="isAxiosError"),Z.call(d,o.message,s,a,l,c),d.cause=o,d.name=o.name,p&&Object.assign(d,p),d};const Ul=null;function un(o){return w.isPlainObject(o)||w.isArray(o)}function bs(o){return w.endsWith(o,"[]")?o.slice(0,-2):o}function Bo(o,s,a){return o?o.concat(s).map(function(c,p){return c=bs(c),!a&&p?"["+c+"]":c}).join(a?".":""):s}function Dl(o){return w.isArray(o)&&!o.some(un)}const Zl=w.toFlatObject(w,{},null,function(s){return/^is[A-Z]/.test(s)});function _i(o,s,a){if(!w.isObject(o))throw new TypeError("target must be an object");s=s||new FormData,a=w.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,x){return!w.isUndefined(x[C])});const l=a.metaTokens,c=a.visitor||y,p=a.dots,d=a.indexes,_=(a.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(s);if(!w.isFunction(c))throw new TypeError("visitor must be a function");function v(S){if(S===null)return"";if(w.isDate(S))return S.toISOString();if(!_&&w.isBlob(S))throw new Z("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(S)||w.isTypedArray(S)?_&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function y(S,C,x){let j=S;if(S&&!x&&typeof S=="object"){if(w.endsWith(C,"{}"))C=l?C:C.slice(0,-2),S=JSON.stringify(S);else if(w.isArray(S)&&Dl(S)||(w.isFileList(S)||w.endsWith(C,"[]"))&&(j=w.toArray(S)))return C=bs(C),j.forEach(function(N,q){!(w.isUndefined(N)||N===null)&&s.append(d===!0?Bo([C],q,p):d===null?C:C+"[]",v(N))}),!1}return un(S)?!0:(s.append(Bo(x,C,p),v(S)),!1)}const P=[],O=Object.assign(Zl,{defaultVisitor:y,convertValue:v,isVisitable:un});function E(S,C){if(!w.isUndefined(S)){if(P.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));P.push(S),w.forEach(S,function(j,A){(!(w.isUndefined(j)||j===null)&&c.call(s,j,w.isString(A)?A.trim():A,C,O))===!0&&E(j,C?C.concat(A):[A])}),P.pop()}}if(!w.isObject(o))throw new TypeError("data must be an object");return E(o),s}function Uo(o){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(l){return s[l]})}function bn(o,s){this._pairs=[],o&&_i(o,this,s)}const ys=bn.prototype;ys.append=function(s,a){this._pairs.push([s,a])};ys.toString=function(s){const a=s?function(l){return s.call(this,l,Uo)}:Uo;return this._pairs.map(function(c){return a(c[0])+"="+a(c[1])},"").join("&")};function Fl(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ws(o,s,a){if(!s)return o;const l=a&&a.encode||Fl;w.isFunction(a)&&(a={serialize:a});const c=a&&a.serialize;let p;if(c?p=c(s,a):p=w.isURLSearchParams(s)?s.toString():new bn(s,a).toString(l),p){const d=o.indexOf("#");d!==-1&&(o=o.slice(0,d)),o+=(o.indexOf("?")===-1?"?":"&")+p}return o}class Do{constructor(){this.handlers=[]}use(s,a,l){return this.handlers.push({fulfilled:s,rejected:a,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){w.forEach(this.handlers,function(l){l!==null&&s(l)})}}const xs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hl=typeof URLSearchParams<"u"?URLSearchParams:bn,ql=typeof FormData<"u"?FormData:null,Wl=typeof Blob<"u"?Blob:null,Vl={isBrowser:!0,classes:{URLSearchParams:Hl,FormData:ql,Blob:Wl},protocols:["http","https","file","blob","url","data"]},yn=typeof window<"u"&&typeof document<"u",hn=typeof navigator=="object"&&navigator||void 0,$l=yn&&(!hn||["ReactNative","NativeScript","NS"].indexOf(hn.product)<0),Gl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jl=yn&&window.location.href||"http://localhost",Kl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yn,hasStandardBrowserEnv:$l,hasStandardBrowserWebWorkerEnv:Gl,navigator:hn,origin:Jl},Symbol.toStringTag,{value:"Module"})),de={...Kl,...Vl};function Xl(o,s){return _i(o,new de.classes.URLSearchParams,Object.assign({visitor:function(a,l,c,p){return de.isNode&&w.isBuffer(a)?(this.append(l,a.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},s))}function Yl(o){return w.matchAll(/\w+|\[(\w*)]/g,o).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Ql(o){const s={},a=Object.keys(o);let l;const c=a.length;let p;for(l=0;l<c;l++)p=a[l],s[p]=o[p];return s}function Ps(o){function s(a,l,c,p){let d=a[p++];if(d==="__proto__")return!0;const m=Number.isFinite(+d),_=p>=a.length;return d=!d&&w.isArray(c)?c.length:d,_?(w.hasOwnProp(c,d)?c[d]=[c[d],l]:c[d]=l,!m):((!c[d]||!w.isObject(c[d]))&&(c[d]=[]),s(a,l,c[d],p)&&w.isArray(c[d])&&(c[d]=Ql(c[d])),!m)}if(w.isFormData(o)&&w.isFunction(o.entries)){const a={};return w.forEachEntry(o,(l,c)=>{s(Yl(l),c,a,0)}),a}return null}function ec(o,s,a){if(w.isString(o))try{return(s||JSON.parse)(o),w.trim(o)}catch(l){if(l.name!=="SyntaxError")throw l}return(a||JSON.stringify)(o)}const It={transitional:xs,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const l=a.getContentType()||"",c=l.indexOf("application/json")>-1,p=w.isObject(s);if(p&&w.isHTMLForm(s)&&(s=new FormData(s)),w.isFormData(s))return c?JSON.stringify(Ps(s)):s;if(w.isArrayBuffer(s)||w.isBuffer(s)||w.isStream(s)||w.isFile(s)||w.isBlob(s)||w.isReadableStream(s))return s;if(w.isArrayBufferView(s))return s.buffer;if(w.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let m;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return Xl(s,this.formSerializer).toString();if((m=w.isFileList(s))||l.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return _i(m?{"files[]":s}:s,_&&new _,this.formSerializer)}}return p||c?(a.setContentType("application/json",!1),ec(s)):s}],transformResponse:[function(s){const a=this.transitional||It.transitional,l=a&&a.forcedJSONParsing,c=this.responseType==="json";if(w.isResponse(s)||w.isReadableStream(s))return s;if(s&&w.isString(s)&&(l&&!this.responseType||c)){const d=!(a&&a.silentJSONParsing)&&c;try{return JSON.parse(s)}catch(m){if(d)throw m.name==="SyntaxError"?Z.from(m,Z.ERR_BAD_RESPONSE,this,null,this.response):m}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],o=>{It.headers[o]={}});const tc=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ic=o=>{const s={};let a,l,c;return o&&o.split(`
`).forEach(function(d){c=d.indexOf(":"),a=d.substring(0,c).trim().toLowerCase(),l=d.substring(c+1).trim(),!(!a||s[a]&&tc[a])&&(a==="set-cookie"?s[a]?s[a].push(l):s[a]=[l]:s[a]=s[a]?s[a]+", "+l:l)}),s},Zo=Symbol("internals");function Mt(o){return o&&String(o).trim().toLowerCase()}function si(o){return o===!1||o==null?o:w.isArray(o)?o.map(si):String(o)}function nc(o){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=a.exec(o);)s[l[1]]=l[2];return s}const oc=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function tn(o,s,a,l,c){if(w.isFunction(l))return l.call(this,s,a);if(c&&(s=a),!!w.isString(s)){if(w.isString(l))return s.indexOf(l)!==-1;if(w.isRegExp(l))return l.test(s)}}function sc(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,l)=>a.toUpperCase()+l)}function ac(o,s){const a=w.toCamelCase(" "+s);["get","set","has"].forEach(l=>{Object.defineProperty(o,l+a,{value:function(c,p,d){return this[l].call(this,s,c,p,d)},configurable:!0})})}let ve=class{constructor(s){s&&this.set(s)}set(s,a,l){const c=this;function p(m,_,v){const y=Mt(_);if(!y)throw new Error("header name must be a non-empty string");const P=w.findKey(c,y);(!P||c[P]===void 0||v===!0||v===void 0&&c[P]!==!1)&&(c[P||_]=si(m))}const d=(m,_)=>w.forEach(m,(v,y)=>p(v,y,_));if(w.isPlainObject(s)||s instanceof this.constructor)d(s,a);else if(w.isString(s)&&(s=s.trim())&&!oc(s))d(ic(s),a);else if(w.isHeaders(s))for(const[m,_]of s.entries())p(_,m,l);else s!=null&&p(a,s,l);return this}get(s,a){if(s=Mt(s),s){const l=w.findKey(this,s);if(l){const c=this[l];if(!a)return c;if(a===!0)return nc(c);if(w.isFunction(a))return a.call(this,c,l);if(w.isRegExp(a))return a.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=Mt(s),s){const l=w.findKey(this,s);return!!(l&&this[l]!==void 0&&(!a||tn(this,this[l],l,a)))}return!1}delete(s,a){const l=this;let c=!1;function p(d){if(d=Mt(d),d){const m=w.findKey(l,d);m&&(!a||tn(l,l[m],m,a))&&(delete l[m],c=!0)}}return w.isArray(s)?s.forEach(p):p(s),c}clear(s){const a=Object.keys(this);let l=a.length,c=!1;for(;l--;){const p=a[l];(!s||tn(this,this[p],p,s,!0))&&(delete this[p],c=!0)}return c}normalize(s){const a=this,l={};return w.forEach(this,(c,p)=>{const d=w.findKey(l,p);if(d){a[d]=si(c),delete a[p];return}const m=s?sc(p):String(p).trim();m!==p&&delete a[p],a[m]=si(c),l[m]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return w.forEach(this,(l,c)=>{l!=null&&l!==!1&&(a[c]=s&&w.isArray(l)?l.join(", "):l)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const l=new this(s);return a.forEach(c=>l.set(c)),l}static accessor(s){const l=(this[Zo]=this[Zo]={accessors:{}}).accessors,c=this.prototype;function p(d){const m=Mt(d);l[m]||(ac(c,d),l[m]=!0)}return w.isArray(s)?s.forEach(p):p(s),this}};ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(ve.prototype,({value:o},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>o,set(l){this[a]=l}}});w.freezeMethods(ve);function nn(o,s){const a=this||It,l=s||a,c=ve.from(l.headers);let p=l.data;return w.forEach(o,function(m){p=m.call(a,p,c.normalize(),s?s.status:void 0)}),c.normalize(),p}function Ls(o){return!!(o&&o.__CANCEL__)}function _t(o,s,a){Z.call(this,o??"canceled",Z.ERR_CANCELED,s,a),this.name="CanceledError"}w.inherits(_t,Z,{__CANCEL__:!0});function Ts(o,s,a){const l=a.config.validateStatus;!a.status||!l||l(a.status)?o(a):s(new Z("Request failed with status code "+a.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function rc(o){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return s&&s[1]||""}function lc(o,s){o=o||10;const a=new Array(o),l=new Array(o);let c=0,p=0,d;return s=s!==void 0?s:1e3,function(_){const v=Date.now(),y=l[p];d||(d=v),a[c]=_,l[c]=v;let P=p,O=0;for(;P!==c;)O+=a[P++],P=P%o;if(c=(c+1)%o,c===p&&(p=(p+1)%o),v-d<s)return;const E=y&&v-y;return E?Math.round(O*1e3/E):void 0}}function cc(o,s){let a=0,l=1e3/s,c,p;const d=(v,y=Date.now())=>{a=y,c=null,p&&(clearTimeout(p),p=null),o.apply(null,v)};return[(...v)=>{const y=Date.now(),P=y-a;P>=l?d(v,y):(c=v,p||(p=setTimeout(()=>{p=null,d(c)},l-P)))},()=>c&&d(c)]}const ri=(o,s,a=3)=>{let l=0;const c=lc(50,250);return cc(p=>{const d=p.loaded,m=p.lengthComputable?p.total:void 0,_=d-l,v=c(_),y=d<=m;l=d;const P={loaded:d,total:m,progress:m?d/m:void 0,bytes:_,rate:v||void 0,estimated:v&&m&&y?(m-d)/v:void 0,event:p,lengthComputable:m!=null,[s?"download":"upload"]:!0};o(P)},a)},Fo=(o,s)=>{const a=o!=null;return[l=>s[0]({lengthComputable:a,total:o,loaded:l}),s[1]]},Ho=o=>(...s)=>w.asap(()=>o(...s)),uc=de.hasStandardBrowserEnv?((o,s)=>a=>(a=new URL(a,de.origin),o.protocol===a.protocol&&o.host===a.host&&(s||o.port===a.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,hc=de.hasStandardBrowserEnv?{write(o,s,a,l,c,p){const d=[o+"="+encodeURIComponent(s)];w.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),w.isString(l)&&d.push("path="+l),w.isString(c)&&d.push("domain="+c),p===!0&&d.push("secure"),document.cookie=d.join("; ")},read(o){const s=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dc(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function pc(o,s){return s?o.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):o}function Es(o,s,a){let l=!dc(s);return o&&(l||a==!1)?pc(o,s):s}const qo=o=>o instanceof ve?{...o}:o;function nt(o,s){s=s||{};const a={};function l(v,y,P,O){return w.isPlainObject(v)&&w.isPlainObject(y)?w.merge.call({caseless:O},v,y):w.isPlainObject(y)?w.merge({},y):w.isArray(y)?y.slice():y}function c(v,y,P,O){if(w.isUndefined(y)){if(!w.isUndefined(v))return l(void 0,v,P,O)}else return l(v,y,P,O)}function p(v,y){if(!w.isUndefined(y))return l(void 0,y)}function d(v,y){if(w.isUndefined(y)){if(!w.isUndefined(v))return l(void 0,v)}else return l(void 0,y)}function m(v,y,P){if(P in s)return l(v,y);if(P in o)return l(void 0,v)}const _={url:p,method:p,data:p,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:m,headers:(v,y,P)=>c(qo(v),qo(y),P,!0)};return w.forEach(Object.keys(Object.assign({},o,s)),function(y){const P=_[y]||c,O=P(o[y],s[y],y);w.isUndefined(O)&&P!==m||(a[y]=O)}),a}const Ss=o=>{const s=nt({},o);let{data:a,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:p,headers:d,auth:m}=s;s.headers=d=ve.from(d),s.url=ws(Es(s.baseURL,s.url,s.allowAbsoluteUrls),o.params,o.paramsSerializer),m&&d.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):"")));let _;if(w.isFormData(a)){if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((_=d.getContentType())!==!1){const[v,...y]=_?_.split(";").map(P=>P.trim()).filter(Boolean):[];d.setContentType([v||"multipart/form-data",...y].join("; "))}}if(de.hasStandardBrowserEnv&&(l&&w.isFunction(l)&&(l=l(s)),l||l!==!1&&uc(s.url))){const v=c&&p&&hc.read(p);v&&d.set(c,v)}return s},fc=typeof XMLHttpRequest<"u",mc=fc&&function(o){return new Promise(function(a,l){const c=Ss(o);let p=c.data;const d=ve.from(c.headers).normalize();let{responseType:m,onUploadProgress:_,onDownloadProgress:v}=c,y,P,O,E,S;function C(){E&&E(),S&&S(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let x=new XMLHttpRequest;x.open(c.method.toUpperCase(),c.url,!0),x.timeout=c.timeout;function j(){if(!x)return;const N=ve.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),V={data:!m||m==="text"||m==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:N,config:o,request:x};Ts(function(pe){a(pe),C()},function(pe){l(pe),C()},V),x=null}"onloadend"in x?x.onloadend=j:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(j)},x.onabort=function(){x&&(l(new Z("Request aborted",Z.ECONNABORTED,o,x)),x=null)},x.onerror=function(){l(new Z("Network Error",Z.ERR_NETWORK,o,x)),x=null},x.ontimeout=function(){let q=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const V=c.transitional||xs;c.timeoutErrorMessage&&(q=c.timeoutErrorMessage),l(new Z(q,V.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,o,x)),x=null},p===void 0&&d.setContentType(null),"setRequestHeader"in x&&w.forEach(d.toJSON(),function(q,V){x.setRequestHeader(V,q)}),w.isUndefined(c.withCredentials)||(x.withCredentials=!!c.withCredentials),m&&m!=="json"&&(x.responseType=c.responseType),v&&([O,S]=ri(v,!0),x.addEventListener("progress",O)),_&&x.upload&&([P,E]=ri(_),x.upload.addEventListener("progress",P),x.upload.addEventListener("loadend",E)),(c.cancelToken||c.signal)&&(y=N=>{x&&(l(!N||N.type?new _t(null,o,x):N),x.abort(),x=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const A=rc(c.url);if(A&&de.protocols.indexOf(A)===-1){l(new Z("Unsupported protocol "+A+":",Z.ERR_BAD_REQUEST,o));return}x.send(p||null)})},gc=(o,s)=>{const{length:a}=o=o?o.filter(Boolean):[];if(s||a){let l=new AbortController,c;const p=function(v){if(!c){c=!0,m();const y=v instanceof Error?v:this.reason;l.abort(y instanceof Z?y:new _t(y instanceof Error?y.message:y))}};let d=s&&setTimeout(()=>{d=null,p(new Z(`timeout ${s} of ms exceeded`,Z.ETIMEDOUT))},s);const m=()=>{o&&(d&&clearTimeout(d),d=null,o.forEach(v=>{v.unsubscribe?v.unsubscribe(p):v.removeEventListener("abort",p)}),o=null)};o.forEach(v=>v.addEventListener("abort",p));const{signal:_}=l;return _.unsubscribe=()=>w.asap(m),_}},_c=function*(o,s){let a=o.byteLength;if(a<s){yield o;return}let l=0,c;for(;l<a;)c=l+s,yield o.slice(l,c),l=c},vc=async function*(o,s){for await(const a of bc(o))yield*_c(a,s)},bc=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const s=o.getReader();try{for(;;){const{done:a,value:l}=await s.read();if(a)break;yield l}}finally{await s.cancel()}},Wo=(o,s,a,l)=>{const c=vc(o,s);let p=0,d,m=_=>{d||(d=!0,l&&l(_))};return new ReadableStream({async pull(_){try{const{done:v,value:y}=await c.next();if(v){m(),_.close();return}let P=y.byteLength;if(a){let O=p+=P;a(O)}_.enqueue(new Uint8Array(y))}catch(v){throw m(v),v}},cancel(_){return m(_),c.return()}},{highWaterMark:2})},vi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cs=vi&&typeof ReadableStream=="function",yc=vi&&(typeof TextEncoder=="function"?(o=>s=>o.encode(s))(new TextEncoder):async o=>new Uint8Array(await new Response(o).arrayBuffer())),ks=(o,...s)=>{try{return!!o(...s)}catch{return!1}},wc=Cs&&ks(()=>{let o=!1;const s=new Request(de.origin,{body:new ReadableStream,method:"POST",get duplex(){return o=!0,"half"}}).headers.has("Content-Type");return o&&!s}),Vo=64*1024,dn=Cs&&ks(()=>w.isReadableStream(new Response("").body)),li={stream:dn&&(o=>o.body)};vi&&(o=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!li[s]&&(li[s]=w.isFunction(o[s])?a=>a[s]():(a,l)=>{throw new Z(`Response type '${s}' is not supported`,Z.ERR_NOT_SUPPORT,l)})})})(new Response);const xc=async o=>{if(o==null)return 0;if(w.isBlob(o))return o.size;if(w.isSpecCompliantForm(o))return(await new Request(de.origin,{method:"POST",body:o}).arrayBuffer()).byteLength;if(w.isArrayBufferView(o)||w.isArrayBuffer(o))return o.byteLength;if(w.isURLSearchParams(o)&&(o=o+""),w.isString(o))return(await yc(o)).byteLength},Pc=async(o,s)=>{const a=w.toFiniteNumber(o.getContentLength());return a??xc(s)},Lc=vi&&(async o=>{let{url:s,method:a,data:l,signal:c,cancelToken:p,timeout:d,onDownloadProgress:m,onUploadProgress:_,responseType:v,headers:y,withCredentials:P="same-origin",fetchOptions:O}=Ss(o);v=v?(v+"").toLowerCase():"text";let E=gc([c,p&&p.toAbortSignal()],d),S;const C=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let x;try{if(_&&wc&&a!=="get"&&a!=="head"&&(x=await Pc(y,l))!==0){let V=new Request(s,{method:"POST",body:l,duplex:"half"}),ue;if(w.isFormData(l)&&(ue=V.headers.get("content-type"))&&y.setContentType(ue),V.body){const[pe,z]=Fo(x,ri(Ho(_)));l=Wo(V.body,Vo,pe,z)}}w.isString(P)||(P=P?"include":"omit");const j="credentials"in Request.prototype;S=new Request(s,{...O,signal:E,method:a.toUpperCase(),headers:y.normalize().toJSON(),body:l,duplex:"half",credentials:j?P:void 0});let A=await fetch(S);const N=dn&&(v==="stream"||v==="response");if(dn&&(m||N&&C)){const V={};["status","statusText","headers"].forEach(H=>{V[H]=A[H]});const ue=w.toFiniteNumber(A.headers.get("content-length")),[pe,z]=m&&Fo(ue,ri(Ho(m),!0))||[];A=new Response(Wo(A.body,Vo,pe,()=>{z&&z(),C&&C()}),V)}v=v||"text";let q=await li[w.findKey(li,v)||"text"](A,o);return!N&&C&&C(),await new Promise((V,ue)=>{Ts(V,ue,{data:q,headers:ve.from(A.headers),status:A.status,statusText:A.statusText,config:o,request:S})})}catch(j){throw C&&C(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,o,S),{cause:j.cause||j}):Z.from(j,j&&j.code,o,S)}}),pn={http:Ul,xhr:mc,fetch:Lc};w.forEach(pn,(o,s)=>{if(o){try{Object.defineProperty(o,"name",{value:s})}catch{}Object.defineProperty(o,"adapterName",{value:s})}});const $o=o=>`- ${o}`,Tc=o=>w.isFunction(o)||o===null||o===!1,As={getAdapter:o=>{o=w.isArray(o)?o:[o];const{length:s}=o;let a,l;const c={};for(let p=0;p<s;p++){a=o[p];let d;if(l=a,!Tc(a)&&(l=pn[(d=String(a)).toLowerCase()],l===void 0))throw new Z(`Unknown adapter '${d}'`);if(l)break;c[d||"#"+p]=l}if(!l){const p=Object.entries(c).map(([m,_])=>`adapter ${m} `+(_===!1?"is not supported by the environment":"is not available in the build"));let d=s?p.length>1?`since :
`+p.map($o).join(`
`):" "+$o(p[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return l},adapters:pn};function on(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new _t(null,o)}function Go(o){return on(o),o.headers=ve.from(o.headers),o.data=nn.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),As.getAdapter(o.adapter||It.adapter)(o).then(function(l){return on(o),l.data=nn.call(o,o.transformResponse,l),l.headers=ve.from(l.headers),l},function(l){return Ls(l)||(on(o),l&&l.response&&(l.response.data=nn.call(o,o.transformResponse,l.response),l.response.headers=ve.from(l.response.headers))),Promise.reject(l)})}const js="1.8.4",bi={};["object","boolean","number","function","string","symbol"].forEach((o,s)=>{bi[o]=function(l){return typeof l===o||"a"+(s<1?"n ":" ")+o}});const Jo={};bi.transitional=function(s,a,l){function c(p,d){return"[Axios v"+js+"] Transitional option '"+p+"'"+d+(l?". "+l:"")}return(p,d,m)=>{if(s===!1)throw new Z(c(d," has been removed"+(a?" in "+a:"")),Z.ERR_DEPRECATED);return a&&!Jo[d]&&(Jo[d]=!0,console.warn(c(d," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(p,d,m):!0}};bi.spelling=function(s){return(a,l)=>(console.warn(`${l} is likely a misspelling of ${s}`),!0)};function Ec(o,s,a){if(typeof o!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const l=Object.keys(o);let c=l.length;for(;c-- >0;){const p=l[c],d=s[p];if(d){const m=o[p],_=m===void 0||d(m,p,o);if(_!==!0)throw new Z("option "+p+" must be "+_,Z.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Z("Unknown option "+p,Z.ERR_BAD_OPTION)}}const ai={assertOptions:Ec,validators:bi},Oe=ai.validators;let it=class{constructor(s){this.defaults=s,this.interceptors={request:new Do,response:new Do}}async request(s,a){try{return await this._request(s,a)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const p=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=nt(this.defaults,a);const{transitional:l,paramsSerializer:c,headers:p}=a;l!==void 0&&ai.assertOptions(l,{silentJSONParsing:Oe.transitional(Oe.boolean),forcedJSONParsing:Oe.transitional(Oe.boolean),clarifyTimeoutError:Oe.transitional(Oe.boolean)},!1),c!=null&&(w.isFunction(c)?a.paramsSerializer={serialize:c}:ai.assertOptions(c,{encode:Oe.function,serialize:Oe.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),ai.assertOptions(a,{baseUrl:Oe.spelling("baseURL"),withXsrfToken:Oe.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let d=p&&w.merge(p.common,p[a.method]);p&&w.forEach(["delete","get","head","post","put","patch","common"],S=>{delete p[S]}),a.headers=ve.concat(d,p);const m=[];let _=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(a)===!1||(_=_&&C.synchronous,m.unshift(C.fulfilled,C.rejected))});const v=[];this.interceptors.response.forEach(function(C){v.push(C.fulfilled,C.rejected)});let y,P=0,O;if(!_){const S=[Go.bind(this),void 0];for(S.unshift.apply(S,m),S.push.apply(S,v),O=S.length,y=Promise.resolve(a);P<O;)y=y.then(S[P++],S[P++]);return y}O=m.length;let E=a;for(P=0;P<O;){const S=m[P++],C=m[P++];try{E=S(E)}catch(x){C.call(this,x);break}}try{y=Go.call(this,E)}catch(S){return Promise.reject(S)}for(P=0,O=v.length;P<O;)y=y.then(v[P++],v[P++]);return y}getUri(s){s=nt(this.defaults,s);const a=Es(s.baseURL,s.url,s.allowAbsoluteUrls);return ws(a,s.params,s.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(s){it.prototype[s]=function(a,l){return this.request(nt(l||{},{method:s,url:a,data:(l||{}).data}))}});w.forEach(["post","put","patch"],function(s){function a(l){return function(p,d,m){return this.request(nt(m||{},{method:s,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:d}))}}it.prototype[s]=a(),it.prototype[s+"Form"]=a(!0)});let Sc=class Ms{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(p){a=p});const l=this;this.promise.then(c=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](c);l._listeners=null}),this.promise.then=c=>{let p;const d=new Promise(m=>{l.subscribe(m),p=m}).then(c);return d.cancel=function(){l.unsubscribe(p)},d},s(function(p,d,m){l.reason||(l.reason=new _t(p,d,m),a(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=l=>{s.abort(l)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new Ms(function(c){s=c}),cancel:s}}};function Cc(o){return function(a){return o.apply(null,a)}}function kc(o){return w.isObject(o)&&o.isAxiosError===!0}const fn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fn).forEach(([o,s])=>{fn[s]=o});function Os(o){const s=new it(o),a=us(it.prototype.request,s);return w.extend(a,it.prototype,s,{allOwnKeys:!0}),w.extend(a,s,null,{allOwnKeys:!0}),a.create=function(c){return Os(nt(o,c))},a}const oe=Os(It);oe.Axios=it;oe.CanceledError=_t;oe.CancelToken=Sc;oe.isCancel=Ls;oe.VERSION=js;oe.toFormData=_i;oe.AxiosError=Z;oe.Cancel=oe.CanceledError;oe.all=function(s){return Promise.all(s)};oe.spread=Cc;oe.isAxiosError=kc;oe.mergeConfig=nt;oe.AxiosHeaders=ve;oe.formToJSON=o=>Ps(w.isHTMLForm(o)?new FormData(o):o);oe.getAdapter=As.getAdapter;oe.HttpStatusCode=fn;oe.default=oe;const{Axios:Zc,AxiosError:Fc,CanceledError:Hc,isCancel:qc,CancelToken:Wc,VERSION:Vc,all:$c,Cancel:Gc,isAxiosError:Jc,spread:Kc,toFormData:Xc,AxiosHeaders:Yc,HttpStatusCode:Qc,formToJSON:eu,getAdapter:tu,mergeConfig:iu}=oe;class Ac{constructor(){this.endpoints=["https://overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter","https://maps.mail.ru/osm/tools/overpass/api/interpreter"],this.currentEndpoint=0}_getEndpoint(){return this.endpoints[this.currentEndpoint]}_switchEndpoint(){this.currentEndpoint=(this.currentEndpoint+1)%this.endpoints.length,console.info(`Switching to endpoint: ${this._getEndpoint()}`)}_getCacheKey(s){return`palmela_${s}_cache`}_saveToCache(s,a){const l=this._getCacheKey(a),c={data:s,timestamp:new Date().getTime()};try{localStorage.setItem(l,JSON.stringify(c)),console.info(`Saved data to cache: ${l}`)}catch(p){console.error(`Error saving to cache: ${p}`)}}_loadFromCache(s,a=24){const l=this._getCacheKey(s);try{const c=localStorage.getItem(l);if(!c)return null;const{data:p,timestamp:d}=JSON.parse(c),m=(new Date().getTime()-d)/(1e3*60*60);return m>a?(console.info(`Cache too old (${m.toFixed(1)} hours)`),null):(console.info(`Loaded data from cache: ${l}`),p)}catch(c){return console.error(`Error loading from cache: ${c}`),null}}async queryOverpass(s,a,l=!1){if(!l){const m=this._loadFromCache(a);if(m)return m}const c={"Content-Type":"application/x-www-form-urlencoded","User-Agent":"PalmelaThematicMapsApp/1.0"},p=3;let d=2e3;for(let m=0;m<p*this.endpoints.length;m++){try{const _=this._getEndpoint();console.info(`Querying ${_} for ${a} data`);const v=await oe.post(_,s,{headers:c,timeout:3e4});if(v.status===200&&v.data)return this._saveToCache(v.data,a),v.data}catch(_){console.error(`Request failed: ${_.message}`),_.response&&_.response.status===429&&(console.warn("Rate limited, waiting longer before retry"),await new Promise(v=>setTimeout(v,d*5)))}(m+1)%this.endpoints.length===0&&(d*=2),this._switchEndpoint(),await new Promise(_=>setTimeout(_,d))}return console.error("All API endpoints failed after multiple retries"),{error:"Failed to fetch data from Overpass API"}}async getSchools(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        node["amenity"="school"](area.palmelaArea);
        way["amenity"="school"](area.palmelaArea);
        relation["amenity"="school"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"schools")}async getHistoricalSites(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        node["historic"](area.palmelaArea);
        way["historic"](area.palmelaArea);
        relation["historic"](area.palmelaArea);
        
        node["tourism"="museum"](area.palmelaArea);
        way["tourism"="museum"](area.palmelaArea);
        
        node["heritage"](area.palmelaArea);
        way["heritage"](area.palmelaArea);
        relation["heritage"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"historical_sites")}async getEnvironmentalFeatures(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        // Parks and green spaces
        node["leisure"="park"](area.palmelaArea);
        way["leisure"="park"](area.palmelaArea);
        relation["leisure"="park"](area.palmelaArea);
        
        // Nature reserves
        node["leisure"="nature_reserve"](area.palmelaArea);
        way["leisure"="nature_reserve"](area.palmelaArea);
        relation["leisure"="nature_reserve"](area.palmelaArea);
        
        // Forest areas
        way["landuse"="forest"](area.palmelaArea);
        relation["landuse"="forest"](area.palmelaArea);
        
        // Water features
        way["natural"="water"](area.palmelaArea);
        relation["natural"="water"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"environmental_features")}async getUrbanElements(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        // Land use
        way["landuse"](area.palmelaArea);
        relation["landuse"](area.palmelaArea);
        
        // Buildings
        way["building"](area.palmelaArea);
        
        // Roads
        way["highway"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"urban_elements")}async getByBoundingBox(s,a=38.54,l=-8.92,c=38.64,p=-8.58){const d=`${a},${l},${c},${p}`,m=[];s.forEach(y=>{if(y.includes("=")){const[P,O]=y.split("=");m.push(`node["${P}"="${O}"](${d});`),m.push(`way["${P}"="${O}"](${d});`),m.push(`relation["${P}"="${O}"](${d});`)}else m.push(`node["${y}"](${d});`),m.push(`way["${y}"](${d});`),m.push(`relation["${y}"](${d});`)});const _=`
      [out:json];
      (
        ${m.join(`
`)}
      );
      out body;
      >;
      out skel qt;
    `,v=`bbox_${s.join("-").replace(/=/g,"_")}`;return this.queryOverpass(_,v)}convertToGeoJSON(s){const a={type:"FeatureCollection",features:[]};if(!s||!s.elements)return a;const l={};return s.elements.forEach(c=>{c.type==="node"&&(l[c.id]={lat:c.lat,lon:c.lon})}),s.elements.forEach(c=>{if(c.tags){if(c.type==="node"&&c.lat!==void 0&&c.lon!==void 0)a.features.push({type:"Feature",id:`node/${c.id}`,properties:{...c.tags,osm_type:"node",osm_id:c.id},geometry:{type:"Point",coordinates:[c.lon,c.lat]}});else if(c.type==="way"&&c.nodes){const p=[];c.nodes.forEach(d=>{l[d]&&p.push([l[d].lon,l[d].lat])}),p.length>0&&(p.length>3&&c.nodes[0]===c.nodes[c.nodes.length-1]?a.features.push({type:"Feature",id:`way/${c.id}`,properties:{...c.tags,osm_type:"way",osm_id:c.id},geometry:{type:"Polygon",coordinates:[p]}}):a.features.push({type:"Feature",id:`way/${c.id}`,properties:{...c.tags,osm_type:"way",osm_id:c.id},geometry:{type:"LineString",coordinates:p}}))}}}),a}async getTransportHubs(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        // Bus stations and stops
        node["highway"="bus_stop"](area.palmelaArea);
        way["highway"="bus_stop"](area.palmelaArea);
        node["amenity"="bus_station"](area.palmelaArea);
        way["amenity"="bus_station"](area.palmelaArea);
        
        // Train stations
        node["railway"="station"](area.palmelaArea);
        way["railway"="station"](area.palmelaArea);
        node["railway"="halt"](area.palmelaArea);
        way["railway"="halt"](area.palmelaArea);
        
        // Taxi stands
        node["amenity"="taxi"](area.palmelaArea);
        
        // Car parking
        node["amenity"="parking"](area.palmelaArea);
        way["amenity"="parking"](area.palmelaArea);
        
        // Fuel stations
        node["amenity"="fuel"](area.palmelaArea);
        way["amenity"="fuel"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"transport_hubs")}async getHealthcareFacilities(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        // Hospitals
        node["amenity"="hospital"](area.palmelaArea);
        way["amenity"="hospital"](area.palmelaArea);
        relation["amenity"="hospital"](area.palmelaArea);
        
        // Clinics and medical centers
        node["amenity"="clinic"](area.palmelaArea);
        way["amenity"="clinic"](area.palmelaArea);
        node["amenity"="doctors"](area.palmelaArea);
        way["amenity"="doctors"](area.palmelaArea);
        
        // Pharmacies
        node["amenity"="pharmacy"](area.palmelaArea);
        way["amenity"="pharmacy"](area.palmelaArea);
        
        // Dental clinics
        node["amenity"="dentist"](area.palmelaArea);
        way["amenity"="dentist"](area.palmelaArea);
        
        // Veterinary facilities
        node["amenity"="veterinary"](area.palmelaArea);
        way["amenity"="veterinary"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"healthcare_facilities")}async getCommercialAreas(){return this.queryOverpass(`
      [out:json];
      area["name"="Palmela"]["admin_level"="8"]->.palmelaArea;
      (
        // Shopping centers and malls
        node["shop"="mall"](area.palmelaArea);
        way["shop"="mall"](area.palmelaArea);
        relation["shop"="mall"](area.palmelaArea);
        
        // Supermarkets
        node["shop"="supermarket"](area.palmelaArea);
        way["shop"="supermarket"](area.palmelaArea);
        
        // Convenience stores
        node["shop"="convenience"](area.palmelaArea);
        way["shop"="convenience"](area.palmelaArea);
        
        // Department stores
        node["shop"="department_store"](area.palmelaArea);
        way["shop"="department_store"](area.palmelaArea);
        
        // Markets
        node["amenity"="marketplace"](area.palmelaArea);
        way["amenity"="marketplace"](area.palmelaArea);
        
        // Commercial landuse zones
        way["landuse"="commercial"](area.palmelaArea);
        relation["landuse"="commercial"](area.palmelaArea);
        
        // Retail landuse zones
        way["landuse"="retail"](area.palmelaArea);
        relation["landuse"="retail"](area.palmelaArea);
      );
      out body;
      >;
      out skel qt;
    `,"commercial_areas")}}const Re=new Ac,sn=[{id:"schools",name:"Escolas",icon:"🏫"},{id:"historical_sites",name:"Locais Históricos",icon:"🏛️"},{id:"environmental_features",name:"Ambiente",icon:"🌳"},{id:"urban_elements",name:"Elementos Urbanos",icon:"🏙️"},{id:"wineries",name:"Adegas",icon:"🍷",custom:["craft=winery","amenity=winery"]},{id:"transport_hubs",name:"Transportes",icon:"🚌"},{id:"healthcare_facilities",name:"Saúde",icon:"🏥"},{id:"commercial_areas",name:"Comércio",icon:"🏬"}],jc=()=>{const[o,s]=k.useState("schools"),[a,l]=k.useState(null),[c,p]=k.useState(!0),[d,m]=k.useState(null),[_,v]=k.useState(!1),[y,P]=k.useState(null),[O,E]=k.useState("streets"),[S,C]=k.useState({});k.useEffect(()=>{const z=sessionStorage.getItem("force_map_scroll")==="true",H=sessionStorage.getItem("map_scroll_time"),Le=H&&Date.now()-parseInt(H)<1e4;console.log(`Current pathname: ${window.location.pathname}`);const X=()=>{console.log("Executing super aggressive scroll for mapping page"),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,Se();for(let Q=1;Q<=20;Q++)setTimeout(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},Q*20)};if(z&&Le){console.log("Special card click flag detected - using extreme scrolling");for(let Q=0;Q<10;Q++)setTimeout(X,Q*50);setTimeout(()=>{sessionStorage.removeItem("force_map_scroll"),sessionStorage.removeItem("map_scroll_time")},2e3)}else X(),setTimeout(X,50),setTimeout(X,150),setTimeout(X,300),setTimeout(X,600)},[]);const x={schools:[{id:"primary",label:"Primária",property:"isced",value:"1"},{id:"secondary",label:"Secundária",property:"isced",value:"2,3"}],historical_sites:[{id:"castle",label:"Castelo",property:"historic",value:"castle"},{id:"monument",label:"Monumento",property:"historic",value:"monument"},{id:"ruins",label:"Ruínas",property:"historic",value:"ruins"},{id:"archaeological",label:"Arqueológico",property:"historic",value:"archaeological_site"}],environmental_features:[{id:"park",label:"Parques",property:"leisure",value:"park"},{id:"forest",label:"Florestas",property:"landuse",value:"forest"},{id:"water",label:"Água",property:"natural",value:"water"}],urban_elements:[{id:"restaurant",label:"Restaurantes",property:"amenity",value:"restaurant"},{id:"building",label:"Edifícios",property:"building",value:"yes"}],wineries:[{id:"winery",label:"Adegas",property:"craft",value:"winery"},{id:"vineyard",label:"Vinhas",property:"landuse",value:"vineyard"}],transport_hubs:[{id:"bus",label:"Paragens de Autocarro",property:"highway",value:"bus_stop"},{id:"train",label:"Estações de Comboio",property:"railway",value:"station,halt"},{id:"parking",label:"Estacionamentos",property:"amenity",value:"parking"},{id:"fuel",label:"Postos de Combustível",property:"amenity",value:"fuel"},{id:"taxi",label:"Praças de Táxi",property:"amenity",value:"taxi"}],healthcare_facilities:[{id:"hospital",label:"Hospitais",property:"amenity",value:"hospital"},{id:"clinic",label:"Clínicas",property:"amenity",value:"clinic"},{id:"doctors",label:"Consultórios",property:"amenity",value:"doctors"},{id:"pharmacy",label:"Farmácias",property:"amenity",value:"pharmacy"},{id:"dentist",label:"Dentistas",property:"amenity",value:"dentist"},{id:"veterinary",label:"Veterinários",property:"amenity",value:"veterinary"}],commercial_areas:[{id:"mall",label:"Centros Comerciais",property:"shop",value:"mall"},{id:"supermarket",label:"Supermercados",property:"shop",value:"supermarket"},{id:"convenience",label:"Lojas de Conveniência",property:"shop",value:"convenience"},{id:"department_store",label:"Grandes Armazéns",property:"shop",value:"department_store"},{id:"marketplace",label:"Mercados",property:"amenity",value:"marketplace"},{id:"commercial",label:"Zonas Comerciais",property:"landuse",value:"commercial"},{id:"retail",label:"Zonas de Retalho",property:"landuse",value:"retail"}]};k.useEffect(()=>{_||v(!0);const z=()=>{window.innerWidth<=768&&(v(!1),setTimeout(()=>v(!0),50))};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[_]),k.useEffect(()=>{(async()=>{p(!0),m(null),P(null);try{let H;const Le=sn.find(Q=>Q.id===o);if(Le.custom)H=await Re.getByBoundingBox(Le.custom);else switch(o){case"schools":H=await Re.getSchools();break;case"historical_sites":H=await Re.getHistoricalSites();break;case"environmental_features":H=await Re.getEnvironmentalFeatures();break;case"urban_elements":H=await Re.getUrbanElements();break;case"transport_hubs":H=await Re.getTransportHubs();break;case"healthcare_facilities":H=await Re.getHealthcareFacilities();break;case"commercial_areas":H=await Re.getCommercialAreas();break;default:H=await Re.getSchools()}const X=Re.convertToGeoJSON(H);l(X),console.log(`Loaded ${X.features.length} features for ${o}`)}catch(H){console.error(`Error fetching ${o} data:`,H),m(`Failed to load ${o} data. Please try again.`)}finally{p(!1)}})()},[o]),k.useEffect(()=>{c||hi()},[c]);const[j,A]=k.useState(null);k.useEffect(()=>{if(a){const z=pe(a);A(z)}else A(null)},[a,S,o]);const N=z=>{s(z.target.value),C(H=>({...H,[z.target.value]:[]}))},q=(z,H)=>{console.log("Feature clicked:",z),P(z)},V=sn.find(z=>z.id===o),ue=z=>({name:"Nome",amenity:"Tipo",historic:"Tipo Histórico",tourism:"Turismo",leisure:"Lazer",natural:"Tipo Natural",building:"Edifício","addr:street":"Rua","addr:housenumber":"Número","addr:postcode":"Código Postal","addr:city":"Cidade",opening_hours:"Horário de Funcionamento",phone:"Telefone",website:"Website",description:"Descrição",operator:"Operador",access:"Acesso",capacity:"Capacidade",heritage:"Património",start_date:"Data de Início",ele:"Elevação",layer:"Camada",craft:"Artesanato",landuse:"Uso da Terra",height:"Altura",denomination:"Denominação",religion:"Religião",highway:"Tipo de Via",railway:"Tipo Ferroviário",ref:"Referência",route_ref:"Linhas",public_transport:"Transporte Público",network:"Rede",parking:"Estacionamento",fee:"Pagamento","fuel:diesel":"Gasóleo","fuel:petrol":"Gasolina","fuel:lpg":"GPL","payment:credit_card":"Cartão de Crédito","payment:debit_card":"Cartão de Débito",healthcare:"Tipo de Saúde","healthcare:speciality":"Especialidade",emergency:"Emergência",dispensing:"Dispensa Medicamentos","doctor:type":"Tipo de Médico",vaccination:"Vacinação",medical_supply:"Suprimentos Médicos",wheelchair:"Acessibilidade","contact:phone":"Telefone de Contacto","contact:email":"Email de Contacto","health_facility:type":"Tipo de Instalação de Saúde",shop:"Tipo de Loja",brand:"Marca","brand:wikidata":"Marca (Wikidata)",department:"Departamento","payment:cash":"Pagamento em Dinheiro",second_hand:"Segunda Mão",self_service:"Self-Service",organic:"Produtos Orgânicos",origin:"Origem",produce:"Produtos",construction:"Construção",clothes:"Roupas",merchandise:"Mercadorias",indoor:"Interior",level:"Nível"})[z]||z,pe=z=>{if(!z||!z.features||z.features.length===0)return z;const H=S[o]||[];if(H.length===0)return z;const Le=z.features.filter(X=>H.length===0?!0:H.some(Q=>{const qe=x[o].find(Ne=>Ne.id===Q);if(!qe)return!1;const{property:be,value:We}=qe,le=X.properties[be];if(We.includes(",")){const Ne=We.split(",");return le&&Ne.includes(le)}return le&&le===We}));return{...z,features:Le}};return h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsxs("div",{className:"intro-content",children:[h.jsx("p",{children:"Explore os dados geográficos do município de Palmela através de mapas interativos. Selecione diferentes conjuntos de dados para visualizar no mapa."}),h.jsxs("div",{className:"feature-selector",children:[h.jsx("label",{htmlFor:"feature-select",children:"Selecionar dados a exibir: "}),h.jsx("select",{id:"feature-select",value:o,onChange:N,className:"feature-select",children:sn.map(z=>h.jsxs("option",{value:z.id,children:[z.icon," ",z.name]},z.id))}),h.jsx("label",{htmlFor:"map-style-select",style:{marginLeft:"20px"},children:"Estilo do mapa: "}),h.jsxs("select",{id:"map-style-select",value:O,onChange:z=>E(z.target.value),className:"feature-select",children:[h.jsx("option",{value:"streets",children:"Normal"}),h.jsx("option",{value:"satellite",children:"Satélite"}),h.jsx("option",{value:"terrain",children:"Terreno"}),h.jsx("option",{value:"dark",children:"Negro"})]})]}),x[o]&&x[o].length>0&&h.jsxs("div",{className:"filter-options",children:[h.jsx("div",{className:"filter-title",children:"Filtrar por:"}),h.jsx("div",{className:"filter-checkboxes",children:x[o].map(z=>{var H;return h.jsxs("label",{className:"filter-checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:((H=S[o])==null?void 0:H.includes(z.id))||!1,onChange:Le=>{const X=Le.target.checked;C(Q=>{const qe=Q[o]||[],be=X?[...qe,z.id]:qe.filter(We=>We!==z.id);return{...Q,[o]:be}})}}),z.label]},z.id)})})]})]})}),h.jsx("div",{className:"full-width map-container",children:h.jsxs("div",{className:"intro-content",children:[h.jsxs("h2",{className:"section-title",children:[V.icon," ",V.name," ",j&&!c?`(${j.features.length})`:""]}),c&&h.jsxs("div",{className:"loading-indicator",children:[h.jsx("div",{className:"spinner"}),h.jsxs("p",{children:["A carregar dados de ",V.name,"..."]})]}),d&&h.jsxs("div",{className:"error-message",children:[h.jsx("p",{children:d}),h.jsx("button",{onClick:()=>s(o),children:"Tentar novamente"})]}),h.jsxs("div",{className:"map-wrapper",children:[h.jsx(el,{geojsonData:j,onFeatureClick:q,center:[38.569,-8.8],zoom:12,height:"600px",mapStyle:O}),y&&h.jsxs("div",{className:"feature-details-panel",children:[h.jsx("h3",{className:"feature-detail-title",children:y.properties.name||"Elemento Selecionado"}),h.jsx("div",{className:"feature-properties",children:Object.entries(y.properties).filter(([z])=>!z.startsWith("osm_")&&z!=="id").map(([z,H])=>h.jsxs("div",{className:"feature-property-item",children:[h.jsxs("span",{className:"property-label",children:[ue(z),":"]}),h.jsx("span",{className:"property-value",children:typeof H=="string"&&H.startsWith("http")?h.jsx("a",{href:H,target:"_blank",rel:"noreferrer",children:H}):H})]},z))}),h.jsxs("div",{className:"feature-actions",children:[h.jsx("button",{className:"close-panel-btn",onClick:()=>P(null),children:"Fechar"}),y.properties.osm_id&&h.jsx("a",{href:`https://www.openstreetmap.org/${y.properties.osm_type}/${y.properties.osm_id}`,target:"_blank",rel:"noreferrer",className:"view-osm-btn",children:"Ver no OpenStreetMap"})]})]})]}),h.jsxs("div",{className:"data-info",children:[h.jsxs("p",{children:[j&&a&&(j.features.length===a.features.length?`${j.features.length} elementos encontrados.`:`${j.features.length} elementos filtrados de ${a.features.length} totais.`),"Os dados são obtidos do OpenStreetMap através da API Overpass."]}),h.jsxs("p",{className:"data-attribution",children:["© Contribuidores do ",h.jsx("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noreferrer",children:"OpenStreetMap"})]})]})]})})]})},Mc=[{id:"schools",title:"Escolas",description:"Informações sobre escolas e instituições de ensino em Palmela.",keywords:["educação","ensino","escola","alunos"]},{id:"historical_sites",title:"Locais Históricos",description:"Locais históricos, monumentos e patrimônio cultural de Palmela.",keywords:["história","monumento","castelo","património","cultural"]},{id:"environmental_features",title:"Ambiente",description:"Áreas verdes, parques, florestas e recursos naturais de Palmela.",keywords:["ambiente","natureza","parque","floresta","água"]},{id:"urban_elements",title:"Elementos Urbanos",description:"Infraestrutura urbana, edifícios e restaurantes em Palmela.",keywords:["urbano","edifício","restaurante","infraestrutura"]},{id:"wineries",title:"Adegas",description:"Adegas e vinhas na região de Palmela.",keywords:["vinho","adega","vinha","produção","uva"]},{id:"transport_hubs",title:"Transportes",description:"Pontos de transporte, estações e infraestrutura de transporte em Palmela.",keywords:["transporte","estação","paragem","autocarro","comboio","combustível"]},{id:"healthcare_facilities",title:"Saúde",description:"Hospitais, clínicas e serviços de saúde em Palmela.",keywords:["saúde","hospital","clínica","médico","farmácia","dentista"]},{id:"commercial_areas",title:"Comércio",description:"Áreas comerciais, lojas e mercados em Palmela.",keywords:["comércio","loja","mercado","supermercado","shopping"]}],an={mapping:Mc},Oc=()=>new URLSearchParams(ci().search),Ko=({text:o,searchTerm:s,onMatchFound:a})=>{if(!o||!s)return h.jsx(h.Fragment,{children:o});const l=o.toLowerCase().includes(s.toLowerCase());Rt.useEffect(()=>{l&&a&&a()},[]);const c=o.split(new RegExp(`(${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"));return h.jsx(h.Fragment,{children:c.map((p,d)=>p.toLowerCase()===s.toLowerCase()?h.jsx("span",{className:"search-term-highlight","data-search-term":s,children:p},d):p)})},Rc=()=>{const o=Oc(),s=Xo(),a=o.get("q")||"",[l,c]=k.useState([]),[p,d]=k.useState(!0);k.useEffect(()=>{if(d(!0),c([]),a){const E=a.toLowerCase(),S=[];if(Ye&&Ye.projects){const C=Ye.projects.filter(x=>x.title&&x.title.toLowerCase().includes(E)||x.description&&x.description.toLowerCase().includes(E)||x.features&&x.features.some(j=>typeof j=="string"&&j.toLowerCase().includes(E)||j.feature&&j.feature.toLowerCase().includes(E))).map(x=>({id:`project-${x.id}`,title:x.title,description:x.description,type:"projects",link:"/projects",originalData:x}));S.push(...C)}if(Xe&&Xe.municipio){const C=Xe.municipio.filter(x=>x.title&&x.title.toLowerCase().includes(E)||x.description&&x.description.toLowerCase().includes(E)||x.features&&x.features.some(j=>j.feature&&j.feature.toLowerCase().includes(E))).map(x=>({id:`municipio-${x.id}`,title:x.title,description:x.description,type:"municipio",link:"/municipio",originalData:x}));S.push(...C)}if(Qe&&Qe.chapters){const C=Object.entries(Qe.chapters),x=C.filter(([j,A])=>A.title&&A.title.toLowerCase().includes(E)||A.description&&A.description.toLowerCase().includes(E)).map(([j,A])=>({id:`chapter-${j}`,title:A.title,description:A.description,type:"chapters",link:"/chapters",originalData:A}));S.push(...x),C.forEach(([j,A])=>{if(A.content){const N=A.content.filter(q=>q.title&&q.title.toLowerCase().includes(E)||q.description&&q.description.toLowerCase().includes(E)).map(q=>({id:`publication-${q.id}`,title:q.title,description:`${A.title} - ${q.description}`,type:"chapters",link:"/chapters",originalData:q,parentData:A}));S.push(...N)}})}if(an&&an.mapping){const C=an.mapping.filter(x=>x.title&&x.title.toLowerCase().includes(E)||x.description&&x.description.toLowerCase().includes(E)||x.keywords&&x.keywords.some(j=>j.toLowerCase().includes(E))).map(x=>({id:`mapping-${x.id}`,title:x.title,description:x.description,type:"mapping",link:"/mapping",originalData:x}));S.push(...C)}c(S),d(!1)}else d(!1)},[a]);const m=E=>{let S=[];const C=a.toLowerCase(),x=(A,N)=>{const V=A.toLowerCase().indexOf(N);if(V===-1)return null;const ue=Math.max(0,V-50),pe=Math.min(A.length,V+N.length+50);return{fullText:A,matchedText:A.substring(ue,pe),exactMatch:A.substring(V,V+N.length),position:V,startPos:ue,endPos:pe}};if(E.title.toLowerCase().includes(C)){const A=x(E.title,C);A&&S.push({field:"title",text:E.title,matchedText:A.matchedText,exactMatch:A.exactMatch,position:A.position})}if(E.description.toLowerCase().includes(C)){const A=x(E.description,C);A&&S.push({field:"description",text:E.description,matchedText:A.matchedText,exactMatch:A.exactMatch,position:A.position})}S.sort((A,N)=>A.field==="title"&&N.field!=="title"?-1:A.field!=="title"&&N.field==="title"?1:A.position-N.position),sessionStorage.setItem("lastSearch",a),sessionStorage.setItem("lastSearchResultId",E.id);const j={term:a,elementId:E.id,type:E.type,title:E.title,description:E.description,matches:S,exactText:S.length>0?S[0].matchedText||S[0].text:"",exactMatch:S.length>0?S[0].exactMatch:a};sessionStorage.setItem("searchMatchInfo",JSON.stringify(j)),s(E.link)},[_,v]=k.useState({}),y=(E,S)=>{v(C=>({...C,[E]:{...C[E],[S]:!0}}))},P=E=>{switch(E){case"municipio":return h.jsxs("svg",{className:"result-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"4",y:"10",width:"16",height:"11"}),h.jsx("path",{d:"M4 10 L12 3 L20 10"})]});case"projects":return h.jsx("svg",{className:"result-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})});case"mapping":return h.jsxs("svg",{className:"result-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),h.jsx("circle",{cx:"12",cy:"10",r:"3"})]});case"chapters":return h.jsxs("svg",{className:"result-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),h.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});default:return h.jsxs("svg",{className:"result-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),h.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})}},O=E=>{switch(E){case"municipio":return"Município";case"projects":return"Projetos";case"mapping":return"Mapas";case"chapters":return"Publicações";default:return"Geral"}};return h.jsxs("div",{className:"full-width-container",children:[h.jsx("div",{className:"introduction full-width",children:h.jsx("div",{className:"intro-content",children:a?h.jsxs("p",{children:["Resultados da pesquisa para: ",h.jsxs("strong",{children:['"',a,'"']})]}):h.jsx("p",{children:"Por favor, introduza um termo de pesquisa para encontrar conteúdo."})})}),p?h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{className:"loading-text",children:"A pesquisar..."})]}):h.jsx("div",{className:"search-results",children:l.length>0?l.map(E=>h.jsxs("div",{className:"search-result-item",onClick:()=>m(E),role:"button",tabIndex:0,children:[h.jsx("div",{className:"result-icon-container",children:P(E.type)}),h.jsxs("div",{className:"result-content",children:[h.jsx("h3",{className:"result-title",children:h.jsx(Ko,{text:E.title,searchTerm:a,onMatchFound:()=>y(E.id,"title")})}),h.jsx("p",{children:h.jsx(Ko,{text:E.description,searchTerm:a,onMatchFound:()=>y(E.id,"description")})}),h.jsx("div",{className:"result-type",children:O(E.type)})]})]},E.id)):a&&h.jsxs("div",{className:"no-results",children:[h.jsxs("p",{children:['Nenhum resultado encontrado para "',a,'".']}),h.jsx("p",{children:"Tente procurar por diferentes palavras-chave."})]})})]})},Ot=()=>{const o=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${o}px`)},Nc=()=>{const o=ci(),s=l=>o.pathname===l?"nav-link active":"nav-link",a=l=>{tt(),Se();const p=l.currentTarget.getAttribute("href")==="/mapping"?5:3;for(let d=1;d<=p;d++)setTimeout(()=>{tt(),Se()},d*100)};return h.jsxs("nav",{className:"bottom-nav",children:[h.jsxs(mt,{to:"/",className:s("/"),onClick:a,children:[h.jsxs("svg",{className:"nav-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),h.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),h.jsx("span",{className:"nav-label",children:"Início"})]}),h.jsxs(mt,{to:"/municipio",className:s("/municipio"),onClick:a,children:[h.jsxs("svg",{className:"nav-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"4",y:"10",width:"16",height:"11"}),h.jsx("path",{d:"M4 10 L12 3 L20 10"}),h.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"14"}),h.jsx("line",{x1:"15",y1:"21",x2:"15",y2:"14"}),h.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),h.jsx("span",{className:"nav-label",children:"Município"})]}),h.jsxs(mt,{to:"/projects",className:s("/projects"),onClick:a,children:[h.jsxs("svg",{className:"nav-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),h.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),h.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),h.jsx("span",{className:"nav-label",children:"Projetos"})]}),h.jsxs(mt,{to:"/mapping",className:s("/mapping"),onClick:a,children:[h.jsxs("svg",{className:"nav-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),h.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),h.jsx("span",{className:"nav-label",children:"Mapa"})]}),h.jsxs(mt,{to:"/chapters",className:s("/chapters"),onClick:a,children:[h.jsxs("svg",{className:"nav-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),h.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),h.jsx("line",{x1:"8",y1:"6",x2:"16",y2:"6"}),h.jsx("line",{x1:"8",y1:"10",x2:"14",y2:"10"}),h.jsx("line",{x1:"8",y1:"14",x2:"16",y2:"14"})]}),h.jsx("span",{className:"nav-label",children:"Publicações"})]})]})},ft=({children:o})=>{const s=ci(),a="1.1.4";k.useEffect(()=>{tt(),Se(),s.pathname==="/mapping"?[10,50,100,300,600].forEach(_=>{setTimeout(()=>{tt(),Se()},_)}):setTimeout(()=>{tt(),Se()},100)},[s.pathname]),k.useEffect(()=>(Ot(),window.addEventListener("resize",Ot),window.addEventListener("orientationchange",Ot),/iPad|iPhone|iPod/.test(navigator.userAgent)&&document.addEventListener("touchmove",function(m){m.target.closest(".app-content")||document.documentElement.scrollTop===0&&m.preventDefault()},{passive:!1}),()=>{window.removeEventListener("resize",Ot),window.removeEventListener("orientationchange",Ot)}),[]);const l=()=>{switch(s.pathname){case"/":return"Palmela Polis";case"/municipio":return"Município";case"/projects":return"Projetos";case"/mapping":return"Mapa";case"/chapters":return"Publicações";case"/search":return"Resultados da Pesquisa";default:return"Palmela Polis"}},c=()=>{window.history.back()},p=s.pathname!=="/";return h.jsxs("div",{className:"app-container","data-version":a,children:[h.jsx("header",{className:"app-header",children:h.jsxs("div",{className:"container",children:[p&&h.jsx("button",{className:"header-back-button",onClick:c,"aria-label":"Voltar",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M19 12H5"}),h.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),h.jsx("h1",{className:"header-title",children:l()}),h.jsx(vr,{})]})}),h.jsx("div",{className:"app-content",children:o}),h.jsx(Nc,{})]})};function zc(){return h.jsxs(lr,{basename:"/polis",children:[h.jsx(_r,{}),h.jsxs(cr,{children:[h.jsx(pt,{path:"/",element:h.jsx(ft,{children:h.jsx(br,{})})}),h.jsx(pt,{path:"/municipio",element:h.jsx(ft,{children:h.jsx(Tr,{})})}),h.jsx(pt,{path:"/projects",element:h.jsx(ft,{children:h.jsx(Cr,{})})}),h.jsx(pt,{path:"/mapping",element:h.jsx(ft,{children:h.jsx(jc,{})})}),h.jsx(pt,{path:"/chapters",element:h.jsx(ft,{children:h.jsx(Mr,{})})}),h.jsx(pt,{path:"/search",element:h.jsx(ft,{children:h.jsx(Rc,{})})})]})]})}const Rs=document.getElementById("root"),Ic=es(Rs);Ic.render(h.jsx(Rt.StrictMode,{children:h.jsx(zc,{})}));window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{if(Rs.children.length>0){console.log("React app mounted successfully");const o=document.querySelector(".loading-container");o&&(o.classList.add("fade-out"),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},300)),window.APP_READY!==void 0&&(window.APP_READY=!0)}})});
//# sourceMappingURL=index-cLQl9N94.js.map
